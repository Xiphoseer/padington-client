!function(){"use strict";function e(e){this.content=e}e.prototype={constructor:e,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return-1},get:function(e){var t=this.find(e);return-1==t?void 0:this.content[t+1]},update:function(t,r,n){var o=n&&n!=t?this.remove(n):this,i=o.find(t),s=o.content.slice();return-1==i?s.push(n||t,r):(s[i+1]=r,n&&(s[i]=n)),new e(s)},remove:function(t){var r=this.find(t);if(-1==r)return this;var n=this.content.slice();return n.splice(r,2),new e(n)},addToStart:function(t,r){return new e([t,r].concat(this.remove(t).content))},addToEnd:function(t,r){var n=this.remove(t).content.slice();return n.push(t,r),new e(n)},addBefore:function(t,r,n){var o=this.remove(r),i=o.content.slice(),s=o.find(t);return i.splice(-1==s?i.length:s,0,r,n),new e(i)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(t){return(t=e.from(t)).size?new e(t.content.concat(this.subtract(t).content)):this},append:function(t){return(t=e.from(t)).size?new e(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var r=this;t=e.from(t);for(var n=0;n<t.content.length;n+=2)r=r.remove(t.content[n]);return r},get size(){return this.content.length>>1}},e.from=function(t){if(t instanceof e)return t;var r=[];if(t)for(var n in t)r.push(n,t[n]);return new e(r)};var t=e;var r=function(e,t){if(this.content=e,this.size=t||0,null==t)for(var r=0;r<e.length;r++)this.size+=e[r].nodeSize},n={firstChild:{configurable:!0},lastChild:{configurable:!0},childCount:{configurable:!0}};r.prototype.nodesBetween=function(e,t,r,n,o){void 0===n&&(n=0);for(var i=0,s=0;s<t;i++){var a=this.content[i],c=s+a.nodeSize;if(c>e&&!1!==r(a,n+s,o,i)&&a.content.size){var l=s+1;a.nodesBetween(Math.max(0,e-l),Math.min(a.content.size,t-l),r,n+l)}s=c}},r.prototype.descendants=function(e){this.nodesBetween(0,this.size,e)},r.prototype.textBetween=function(e,t,r,n){var o="",i=!0;return this.nodesBetween(e,t,(function(s,a){s.isText?(o+=s.text.slice(Math.max(e,a)-a,t-a),i=!r):s.isLeaf&&n?(o+=n,i=!r):!i&&s.isBlock&&(o+=r,i=!0)}),0),o},r.prototype.append=function(e){if(!e.size)return this;if(!this.size)return e;var t=this.lastChild,n=e.firstChild,o=this.content.slice(),i=0;for(t.isText&&t.sameMarkup(n)&&(o[o.length-1]=t.withText(t.text+n.text),i=1);i<e.content.length;i++)o.push(e.content[i]);return new r(o,this.size+e.size)},r.prototype.cut=function(e,t){if(null==t&&(t=this.size),0==e&&t==this.size)return this;var n=[],o=0;if(t>e)for(var i=0,s=0;s<t;i++){var a=this.content[i],c=s+a.nodeSize;c>e&&((s<e||c>t)&&(a=a.isText?a.cut(Math.max(0,e-s),Math.min(a.text.length,t-s)):a.cut(Math.max(0,e-s-1),Math.min(a.content.size,t-s-1))),n.push(a),o+=a.nodeSize),s=c}return new r(n,o)},r.prototype.cutByIndex=function(e,t){return e==t?r.empty:0==e&&t==this.content.length?this:new r(this.content.slice(e,t))},r.prototype.replaceChild=function(e,t){var n=this.content[e];if(n==t)return this;var o=this.content.slice(),i=this.size+t.nodeSize-n.nodeSize;return o[e]=t,new r(o,i)},r.prototype.addToStart=function(e){return new r([e].concat(this.content),this.size+e.nodeSize)},r.prototype.addToEnd=function(e){return new r(this.content.concat(e),this.size+e.nodeSize)},r.prototype.eq=function(e){if(this.content.length!=e.content.length)return!1;for(var t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0},n.firstChild.get=function(){return this.content.length?this.content[0]:null},n.lastChild.get=function(){return this.content.length?this.content[this.content.length-1]:null},n.childCount.get=function(){return this.content.length},r.prototype.child=function(e){var t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t},r.prototype.maybeChild=function(e){return this.content[e]},r.prototype.forEach=function(e){for(var t=0,r=0;t<this.content.length;t++){var n=this.content[t];e(n,r,t),r+=n.nodeSize}},r.prototype.findDiffStart=function(e,t){return void 0===t&&(t=0),function e(t,r,n){for(var o=0;;o++){if(o==t.childCount||o==r.childCount)return t.childCount==r.childCount?null:n;var i=t.child(o),s=r.child(o);if(i!=s){if(!i.sameMarkup(s))return n;if(i.isText&&i.text!=s.text){for(var a=0;i.text[a]==s.text[a];a++)n++;return n}if(i.content.size||s.content.size){var c=e(i.content,s.content,n+1);if(null!=c)return c}n+=i.nodeSize}else n+=i.nodeSize}}(this,e,t)},r.prototype.findDiffEnd=function(e,t,r){return void 0===t&&(t=this.size),void 0===r&&(r=e.size),function e(t,r,n,o){for(var i=t.childCount,s=r.childCount;;){if(0==i||0==s)return i==s?null:{a:n,b:o};var a=t.child(--i),c=r.child(--s),l=a.nodeSize;if(a!=c){if(!a.sameMarkup(c))return{a:n,b:o};if(a.isText&&a.text!=c.text){for(var u=0,p=Math.min(a.text.length,c.text.length);u<p&&a.text[a.text.length-u-1]==c.text[c.text.length-u-1];)u++,n--,o--;return{a:n,b:o}}if(a.content.size||c.content.size){var h=e(a.content,c.content,n-1,o-1);if(h)return h}n-=l,o-=l}else n-=l,o-=l}}(this,e,t,r)},r.prototype.findIndex=function(e,t){if(void 0===t&&(t=-1),0==e)return i(0,e);if(e==this.size)return i(this.content.length,e);if(e>this.size||e<0)throw new RangeError("Position "+e+" outside of fragment ("+this+")");for(var r=0,n=0;;r++){var o=n+this.child(r).nodeSize;if(o>=e)return o==e||t>0?i(r+1,o):i(r,n);n=o}},r.prototype.toString=function(){return"<"+this.toStringInner()+">"},r.prototype.toStringInner=function(){return this.content.join(", ")},r.prototype.toJSON=function(){return this.content.length?this.content.map((function(e){return e.toJSON()})):null},r.fromJSON=function(e,t){if(!t)return r.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new r(t.map(e.nodeFromJSON))},r.fromArray=function(e){if(!e.length)return r.empty;for(var t,n=0,o=0;o<e.length;o++){var i=e[o];n+=i.nodeSize,o&&i.isText&&e[o-1].sameMarkup(i)?(t||(t=e.slice(0,o)),t[t.length-1]=i.withText(t[t.length-1].text+i.text)):t&&t.push(i)}return new r(t||e,n)},r.from=function(e){if(!e)return r.empty;if(e instanceof r)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new r([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))},Object.defineProperties(r.prototype,n);var o={index:0,offset:0};function i(e,t){return o.index=e,o.offset=t,o}function s(e,t){if(e===t)return!0;if(!e||"object"!=typeof e||!t||"object"!=typeof t)return!1;var r=Array.isArray(e);if(Array.isArray(t)!=r)return!1;if(r){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(!s(e[n],t[n]))return!1}else{for(var o in e)if(!(o in t)||!s(e[o],t[o]))return!1;for(var i in t)if(!(i in e))return!1}return!0}r.empty=new r([],0);var a=function(e,t){this.type=e,this.attrs=t};function c(e){var t=Error.call(this,e);return t.__proto__=c.prototype,t}a.prototype.addToSet=function(e){for(var t,r=!1,n=0;n<e.length;n++){var o=e[n];if(this.eq(o))return e;if(this.type.excludes(o.type))t||(t=e.slice(0,n));else{if(o.type.excludes(this.type))return e;!r&&o.type.rank>this.type.rank&&(t||(t=e.slice(0,n)),t.push(this),r=!0),t&&t.push(o)}}return t||(t=e.slice()),r||t.push(this),t},a.prototype.removeFromSet=function(e){for(var t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e},a.prototype.isInSet=function(e){for(var t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1},a.prototype.eq=function(e){return this==e||this.type==e.type&&s(this.attrs,e.attrs)},a.prototype.toJSON=function(){var e={type:this.type.name};for(var t in this.attrs){e.attrs=this.attrs;break}return e},a.fromJSON=function(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");var r=e.marks[t.type];if(!r)throw new RangeError("There is no mark type "+t.type+" in this schema");return r.create(t.attrs)},a.sameSet=function(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(!e[r].eq(t[r]))return!1;return!0},a.setFrom=function(e){if(!e||0==e.length)return a.none;if(e instanceof a)return[e];var t=e.slice();return t.sort((function(e,t){return e.type.rank-t.type.rank})),t},a.none=[],c.prototype=Object.create(Error.prototype),c.prototype.constructor=c,c.prototype.name="ReplaceError";var l=function(e,t,r){this.content=e,this.openStart=t,this.openEnd=r},u={size:{configurable:!0}};function p(e,t,n){if(n.openStart>e.depth)throw new c("Inserted content deeper than insertion position");if(e.depth-n.openStart!=t.depth-n.openEnd)throw new c("Inconsistent open depths");return function e(t,n,o,i){var s=t.index(i),a=t.node(i);if(s==n.index(i)&&i<t.depth-o.openStart){var c=e(t,n,o,i+1);return a.copy(a.content.replaceChild(s,c))}if(o.content.size){if(o.openStart||o.openEnd||t.depth!=i||n.depth!=i){var l=function(e,t){for(var n=t.depth-e.openStart,o=t.node(n).copy(e.content),i=n-1;i>=0;i--)o=t.node(i).copy(r.from(o));return{start:o.resolveNoCache(e.openStart+n),end:o.resolveNoCache(o.content.size-e.openEnd-n)}}(o,t),u=l.start,p=l.end;return g(a,function e(t,n,o,i,s){var a=t.depth>s&&d(t,n,s+1),c=i.depth>s&&d(o,i,s+1),l=[];m(null,t,s,l),a&&c&&n.index(s)==o.index(s)?(h(a,c),f(g(a,e(t,n,o,i,s+1)),l)):(a&&f(g(a,v(t,n,s+1)),l),m(n,o,s,l),c&&f(g(c,v(o,i,s+1)),l));return m(i,null,s,l),new r(l)}(t,u,p,n,i))}var y=t.parent,b=y.content;return g(y,b.cut(0,t.parentOffset).append(o.content).append(b.cut(n.parentOffset)))}return g(a,v(t,n,i))}(e,t,n,0)}function h(e,t){if(!t.type.compatibleContent(e.type))throw new c("Cannot join "+t.type.name+" onto "+e.type.name)}function d(e,t,r){var n=e.node(r);return h(n,t.node(r)),n}function f(e,t){var r=t.length-1;r>=0&&e.isText&&e.sameMarkup(t[r])?t[r]=e.withText(t[r].text+e.text):t.push(e)}function m(e,t,r,n){var o=(t||e).node(r),i=0,s=t?t.index(r):o.childCount;e&&(i=e.index(r),e.depth>r?i++:e.textOffset&&(f(e.nodeAfter,n),i++));for(var a=i;a<s;a++)f(o.child(a),n);t&&t.depth==r&&t.textOffset&&f(t.nodeBefore,n)}function g(e,t){if(!e.type.validContent(t))throw new c("Invalid content for node "+e.type.name);return e.copy(t)}function v(e,t,n){var o=[];(m(null,e,n,o),e.depth>n)&&f(g(d(e,t,n+1),v(e,t,n+1)),o);return m(t,null,n,o),new r(o)}u.size.get=function(){return this.content.size-this.openStart-this.openEnd},l.prototype.insertAt=function(e,t){var r=function e(t,r,n,o){var i=t.findIndex(r),s=i.index,a=i.offset,c=t.maybeChild(s);if(a==r||c.isText)return o&&!o.canReplace(s,s,n)?null:t.cut(0,r).append(n).append(t.cut(r));var l=e(c.content,r-a-1,n);return l&&t.replaceChild(s,c.copy(l))}(this.content,e+this.openStart,t,null);return r&&new l(r,this.openStart,this.openEnd)},l.prototype.removeBetween=function(e,t){return new l(function e(t,r,n){var o=t.findIndex(r),i=o.index,s=o.offset,a=t.maybeChild(i),c=t.findIndex(n),l=c.index,u=c.offset;if(s==r||a.isText){if(u!=n&&!t.child(l).isText)throw new RangeError("Removing non-flat range");return t.cut(0,r).append(t.cut(n))}if(i!=l)throw new RangeError("Removing non-flat range");return t.replaceChild(i,a.copy(e(a.content,r-s-1,n-s-1)))}(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)},l.prototype.eq=function(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd},l.prototype.toString=function(){return this.content+"("+this.openStart+","+this.openEnd+")"},l.prototype.toJSON=function(){if(!this.content.size)return null;var e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e},l.fromJSON=function(e,t){if(!t)return l.empty;var n=t.openStart||0,o=t.openEnd||0;if("number"!=typeof n||"number"!=typeof o)throw new RangeError("Invalid input for Slice.fromJSON");return new l(r.fromJSON(e,t.content),n,o)},l.maxOpen=function(e,t){void 0===t&&(t=!0);for(var r=0,n=0,o=e.firstChild;o&&!o.isLeaf&&(t||!o.type.spec.isolating);o=o.firstChild)r++;for(var i=e.lastChild;i&&!i.isLeaf&&(t||!i.type.spec.isolating);i=i.lastChild)n++;return new l(e,r,n)},Object.defineProperties(l.prototype,u),l.empty=new l(r.empty,0,0);var y=function(e,t,r){this.pos=e,this.path=t,this.depth=t.length/3-1,this.parentOffset=r},b={parent:{configurable:!0},doc:{configurable:!0},textOffset:{configurable:!0},nodeAfter:{configurable:!0},nodeBefore:{configurable:!0}};y.prototype.resolveDepth=function(e){return null==e?this.depth:e<0?this.depth+e:e},b.parent.get=function(){return this.node(this.depth)},b.doc.get=function(){return this.node(0)},y.prototype.node=function(e){return this.path[3*this.resolveDepth(e)]},y.prototype.index=function(e){return this.path[3*this.resolveDepth(e)+1]},y.prototype.indexAfter=function(e){return e=this.resolveDepth(e),this.index(e)+(e!=this.depth||this.textOffset?1:0)},y.prototype.start=function(e){return 0==(e=this.resolveDepth(e))?0:this.path[3*e-1]+1},y.prototype.end=function(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size},y.prototype.before=function(e){if(!(e=this.resolveDepth(e)))throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]},y.prototype.after=function(e){if(!(e=this.resolveDepth(e)))throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]+this.path[3*e].nodeSize},b.textOffset.get=function(){return this.pos-this.path[this.path.length-1]},b.nodeAfter.get=function(){var e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;var r=this.pos-this.path[this.path.length-1],n=e.child(t);return r?e.child(t).cut(r):n},b.nodeBefore.get=function(){var e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):0==e?null:this.parent.child(e-1)},y.prototype.posAtIndex=function(e,t){t=this.resolveDepth(t);for(var r=this.path[3*t],n=0==t?0:this.path[3*t-1]+1,o=0;o<e;o++)n+=r.child(o).nodeSize;return n},y.prototype.marks=function(){var e=this.parent,t=this.index();if(0==e.content.size)return a.none;if(this.textOffset)return e.child(t).marks;var r=e.maybeChild(t-1),n=e.maybeChild(t);if(!r){var o=r;r=n,n=o}for(var i=r.marks,s=0;s<i.length;s++)!1!==i[s].type.spec.inclusive||n&&i[s].isInSet(n.marks)||(i=i[s--].removeFromSet(i));return i},y.prototype.marksAcross=function(e){var t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;for(var r=t.marks,n=e.parent.maybeChild(e.index()),o=0;o<r.length;o++)!1!==r[o].type.spec.inclusive||n&&r[o].isInSet(n.marks)||(r=r[o--].removeFromSet(r));return r},y.prototype.sharedDepth=function(e){for(var t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0},y.prototype.blockRange=function(e,t){if(void 0===e&&(e=this),e.pos<this.pos)return e.blockRange(this);for(var r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!t||t(this.node(r))))return new C(this,e,r)},y.prototype.sameParent=function(e){return this.pos-this.parentOffset==e.pos-e.parentOffset},y.prototype.max=function(e){return e.pos>this.pos?e:this},y.prototype.min=function(e){return e.pos<this.pos?e:this},y.prototype.toString=function(){for(var e="",t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset},y.resolve=function(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");for(var r=[],n=0,o=t,i=e;;){var s=i.content.findIndex(o),a=s.index,c=s.offset,l=o-c;if(r.push(i,a,n+c),!l)break;if((i=i.child(a)).isText)break;o=l-1,n+=c+1}return new y(t,r,o)},y.resolveCached=function(e,t){for(var r=0;r<w.length;r++){var n=w[r];if(n.pos==t&&n.doc==e)return n}var o=w[k]=y.resolve(e,t);return k=(k+1)%x,o},Object.defineProperties(y.prototype,b);var w=[],k=0,x=12,C=function(e,t,r){this.$from=e,this.$to=t,this.depth=r},S={start:{configurable:!0},end:{configurable:!0},parent:{configurable:!0},startIndex:{configurable:!0},endIndex:{configurable:!0}};S.start.get=function(){return this.$from.before(this.depth+1)},S.end.get=function(){return this.$to.after(this.depth+1)},S.parent.get=function(){return this.$from.node(this.depth)},S.startIndex.get=function(){return this.$from.index(this.depth)},S.endIndex.get=function(){return this.$to.indexAfter(this.depth)},Object.defineProperties(C.prototype,S);var _=Object.create(null),D=function(e,t,n,o){this.type=e,this.attrs=t,this.content=n||r.empty,this.marks=o||a.none},A={nodeSize:{configurable:!0},childCount:{configurable:!0},textContent:{configurable:!0},firstChild:{configurable:!0},lastChild:{configurable:!0},isBlock:{configurable:!0},isTextblock:{configurable:!0},inlineContent:{configurable:!0},isInline:{configurable:!0},isText:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};A.nodeSize.get=function(){return this.isLeaf?1:2+this.content.size},A.childCount.get=function(){return this.content.childCount},D.prototype.child=function(e){return this.content.child(e)},D.prototype.maybeChild=function(e){return this.content.maybeChild(e)},D.prototype.forEach=function(e){this.content.forEach(e)},D.prototype.nodesBetween=function(e,t,r,n){void 0===n&&(n=0),this.content.nodesBetween(e,t,r,n,this)},D.prototype.descendants=function(e){this.nodesBetween(0,this.content.size,e)},A.textContent.get=function(){return this.textBetween(0,this.content.size,"")},D.prototype.textBetween=function(e,t,r,n){return this.content.textBetween(e,t,r,n)},A.firstChild.get=function(){return this.content.firstChild},A.lastChild.get=function(){return this.content.lastChild},D.prototype.eq=function(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)},D.prototype.sameMarkup=function(e){return this.hasMarkup(e.type,e.attrs,e.marks)},D.prototype.hasMarkup=function(e,t,r){return this.type==e&&s(this.attrs,t||e.defaultAttrs||_)&&a.sameSet(this.marks,r||a.none)},D.prototype.copy=function(e){return void 0===e&&(e=null),e==this.content?this:new this.constructor(this.type,this.attrs,e,this.marks)},D.prototype.mark=function(e){return e==this.marks?this:new this.constructor(this.type,this.attrs,this.content,e)},D.prototype.cut=function(e,t){return 0==e&&t==this.content.size?this:this.copy(this.content.cut(e,t))},D.prototype.slice=function(e,t,r){if(void 0===t&&(t=this.content.size),void 0===r&&(r=!1),e==t)return l.empty;var n=this.resolve(e),o=this.resolve(t),i=r?0:n.sharedDepth(t),s=n.start(i),a=n.node(i).content.cut(n.pos-s,o.pos-s);return new l(a,n.depth-i,o.depth-i)},D.prototype.replace=function(e,t,r){return p(this.resolve(e),this.resolve(t),r)},D.prototype.nodeAt=function(e){for(var t=this;;){var r=t.content.findIndex(e),n=r.index,o=r.offset;if(!(t=t.maybeChild(n)))return null;if(o==e||t.isText)return t;e-=o+1}},D.prototype.childAfter=function(e){var t=this.content.findIndex(e),r=t.index,n=t.offset;return{node:this.content.maybeChild(r),index:r,offset:n}},D.prototype.childBefore=function(e){if(0==e)return{node:null,index:0,offset:0};var t=this.content.findIndex(e),r=t.index,n=t.offset;if(n<e)return{node:this.content.child(r),index:r,offset:n};var o=this.content.child(r-1);return{node:o,index:r-1,offset:n-o.nodeSize}},D.prototype.resolve=function(e){return y.resolveCached(this,e)},D.prototype.resolveNoCache=function(e){return y.resolve(this,e)},D.prototype.rangeHasMark=function(e,t,r){var n=!1;return t>e&&this.nodesBetween(e,t,(function(e){return r.isInSet(e.marks)&&(n=!0),!n})),n},A.isBlock.get=function(){return this.type.isBlock},A.isTextblock.get=function(){return this.type.isTextblock},A.inlineContent.get=function(){return this.type.inlineContent},A.isInline.get=function(){return this.type.isInline},A.isText.get=function(){return this.type.isText},A.isLeaf.get=function(){return this.type.isLeaf},A.isAtom.get=function(){return this.type.isAtom},D.prototype.toString=function(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);var e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),M(this.marks,e)},D.prototype.contentMatchAt=function(e){var t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t},D.prototype.canReplace=function(e,t,n,o,i){void 0===n&&(n=r.empty),void 0===o&&(o=0),void 0===i&&(i=n.childCount);var s=this.contentMatchAt(e).matchFragment(n,o,i),a=s&&s.matchFragment(this.content,t);if(!a||!a.validEnd)return!1;for(var c=o;c<i;c++)if(!this.type.allowsMarks(n.child(c).marks))return!1;return!0},D.prototype.canReplaceWith=function(e,t,r,n){if(n&&!this.type.allowsMarks(n))return!1;var o=this.contentMatchAt(e).matchType(r),i=o&&o.matchFragment(this.content,t);return!!i&&i.validEnd},D.prototype.canAppend=function(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)},D.prototype.check=function(){if(!this.type.validContent(this.content))throw new RangeError("Invalid content for node "+this.type.name+": "+this.content.toString().slice(0,50));for(var e=a.none,t=0;t<this.marks.length;t++)e=this.marks[t].addToSet(e);if(!a.sameSet(e,this.marks))throw new RangeError("Invalid collection of marks for node "+this.type.name+": "+this.marks.map((function(e){return e.type.name})));this.content.forEach((function(e){return e.check()}))},D.prototype.toJSON=function(){var e={type:this.type.name};for(var t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map((function(e){return e.toJSON()}))),e},D.fromJSON=function(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");var n=null;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=t.marks.map(e.markFromJSON)}if("text"==t.type){if("string"!=typeof t.text)throw new RangeError("Invalid text node in JSON");return e.text(t.text,n)}var o=r.fromJSON(e,t.content);return e.nodeType(t.type).create(t.attrs,o,n)},Object.defineProperties(D.prototype,A);var E=function(e){function t(t,r,n,o){if(e.call(this,t,r,null,o),!n)throw new RangeError("Empty text nodes are not allowed");this.text=n}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={textContent:{configurable:!0},nodeSize:{configurable:!0}};return t.prototype.toString=function(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):M(this.marks,JSON.stringify(this.text))},r.textContent.get=function(){return this.text},t.prototype.textBetween=function(e,t){return this.text.slice(e,t)},r.nodeSize.get=function(){return this.text.length},t.prototype.mark=function(e){return e==this.marks?this:new t(this.type,this.attrs,this.text,e)},t.prototype.withText=function(e){return e==this.text?this:new t(this.type,this.attrs,e,this.marks)},t.prototype.cut=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.text.length),0==e&&t==this.text.length?this:this.withText(this.text.slice(e,t))},t.prototype.eq=function(e){return this.sameMarkup(e)&&this.text==e.text},t.prototype.toJSON=function(){var t=e.prototype.toJSON.call(this);return t.text=this.text,t},Object.defineProperties(t.prototype,r),t}(D);function M(e,t){for(var r=e.length-1;r>=0;r--)t=e[r].type.name+"("+t+")";return t}var T=function(e){this.validEnd=e,this.next=[],this.wrapCache=[]},O={inlineContent:{configurable:!0},defaultType:{configurable:!0},edgeCount:{configurable:!0}};T.parse=function(e,t){var r=new N(e,t);if(null==r.next)return T.empty;var n=R(r);r.next&&r.err("Unexpected trailing text");var o=function(e){var t=Object.create(null);return function r(n){var o=[];n.forEach((function(t){e[t].forEach((function(t){var r=t.term,n=t.to;if(r){var i=o.indexOf(r),s=i>-1&&o[i+1];P(e,n).forEach((function(e){s||o.push(r,s=[]),-1==s.indexOf(e)&&s.push(e)}))}}))}));for(var i=t[n.join(",")]=new T(n.indexOf(e.length-1)>-1),s=0;s<o.length;s+=2){var a=o[s+1].sort(B);i.next.push(o[s],t[a.join(",")]||r(a))}return i}(P(e,0))}(function(e){var t=[[]];return o(i(e,0),r()),t;function r(){return t.push([])-1}function n(e,r,n){var o={term:n,to:r};return t[e].push(o),o}function o(e,t){e.forEach((function(e){return e.to=t}))}function i(e,t){if("choice"==e.type)return e.exprs.reduce((function(e,r){return e.concat(i(r,t))}),[]);if("seq"==e.type)for(var s=0;;s++){var a=i(e.exprs[s],t);if(s==e.exprs.length-1)return a;o(a,t=r())}else{if("star"==e.type){var c=r();return n(t,c),o(i(e.expr,c),c),[n(c)]}if("plus"==e.type){var l=r();return o(i(e.expr,t),l),o(i(e.expr,l),l),[n(l)]}if("opt"==e.type)return[n(t)].concat(i(e.expr,t));if("range"==e.type){for(var u=t,p=0;p<e.min;p++){var h=r();o(i(e.expr,u),h),u=h}if(-1==e.max)o(i(e.expr,u),u);else for(var d=e.min;d<e.max;d++){var f=r();n(u,f),o(i(e.expr,u),f),u=f}return[n(u)]}if("name"==e.type)return[n(t,null,e.value)]}}}(n));return function(e,t){for(var r=0,n=[e];r<n.length;r++){for(var o=n[r],i=!o.validEnd,s=[],a=0;a<o.next.length;a+=2){var c=o.next[a],l=o.next[a+1];s.push(c.name),!i||c.isText||c.hasRequiredAttrs()||(i=!1),-1==n.indexOf(l)&&n.push(l)}i&&t.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(o,r),o},T.prototype.matchType=function(e){for(var t=0;t<this.next.length;t+=2)if(this.next[t]==e)return this.next[t+1];return null},T.prototype.matchFragment=function(e,t,r){void 0===t&&(t=0),void 0===r&&(r=e.childCount);for(var n=this,o=t;n&&o<r;o++)n=n.matchType(e.child(o).type);return n},O.inlineContent.get=function(){var e=this.next[0];return!!e&&e.isInline},O.defaultType.get=function(){for(var e=0;e<this.next.length;e+=2){var t=this.next[e];if(!t.isText&&!t.hasRequiredAttrs())return t}},T.prototype.compatible=function(e){for(var t=0;t<this.next.length;t+=2)for(var r=0;r<e.next.length;r+=2)if(this.next[t]==e.next[r])return!0;return!1},T.prototype.fillBefore=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=0);var o=[this];return function i(s,a){var c=s.matchFragment(e,n);if(c&&(!t||c.validEnd))return r.from(a.map((function(e){return e.createAndFill()})));for(var l=0;l<s.next.length;l+=2){var u=s.next[l],p=s.next[l+1];if(!u.isText&&!u.hasRequiredAttrs()&&-1==o.indexOf(p)){o.push(p);var h=i(p,a.concat(u));if(h)return h}}}(this,[])},T.prototype.findWrapping=function(e){for(var t=0;t<this.wrapCache.length;t+=2)if(this.wrapCache[t]==e)return this.wrapCache[t+1];var r=this.computeWrapping(e);return this.wrapCache.push(e,r),r},T.prototype.computeWrapping=function(e){for(var t=Object.create(null),r=[{match:this,type:null,via:null}];r.length;){var n=r.shift(),o=n.match;if(o.matchType(e)){for(var i=[],s=n;s.type;s=s.via)i.push(s.type);return i.reverse()}for(var a=0;a<o.next.length;a+=2){var c=o.next[a];c.isLeaf||c.hasRequiredAttrs()||c.name in t||n.type&&!o.next[a+1].validEnd||(r.push({match:c.contentMatch,type:c,via:n}),t[c.name]=!0)}}},O.edgeCount.get=function(){return this.next.length>>1},T.prototype.edge=function(e){var t=e<<1;if(t>=this.next.length)throw new RangeError("There's no "+e+"th edge in this content match");return{type:this.next[t],next:this.next[t+1]}},T.prototype.toString=function(){var e=[];return function t(r){e.push(r);for(var n=1;n<r.next.length;n+=2)-1==e.indexOf(r.next[n])&&t(r.next[n])}(this),e.map((function(t,r){for(var n=r+(t.validEnd?"*":" ")+" ",o=0;o<t.next.length;o+=2)n+=(o?", ":"")+t.next[o].name+"->"+e.indexOf(t.next[o+1]);return n})).join("\n")},Object.defineProperties(T.prototype,O),T.empty=new T(!0);var N=function(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()},q={next:{configurable:!0}};function R(e){var t=[];do{t.push(I(e))}while(e.eat("|"));return 1==t.length?t[0]:{type:"choice",exprs:t}}function I(e){var t=[];do{t.push(L(e))}while(e.next&&")"!=e.next&&"|"!=e.next);return 1==t.length?t[0]:{type:"seq",exprs:t}}function L(e){for(var t=function(e){if(e.eat("(")){var t=R(e);return e.eat(")")||e.err("Missing closing paren"),t}if(!/\W/.test(e.next)){var r=function(e,t){var r=e.nodeTypes,n=r[t];if(n)return[n];var o=[];for(var i in r){var s=r[i];s.groups.indexOf(t)>-1&&o.push(s)}0==o.length&&e.err("No node type or group '"+t+"' found");return o}(e,e.next).map((function(t){return null==e.inline?e.inline=t.isInline:e.inline!=t.isInline&&e.err("Mixing inline and block content"),{type:"name",value:t}}));return e.pos++,1==r.length?r[0]:{type:"choice",exprs:r}}e.err("Unexpected token '"+e.next+"'")}(e);;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else{if(!e.eat("{"))break;t=F(e,t)}return t}function z(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");var t=Number(e.next);return e.pos++,t}function F(e,t){var r=z(e),n=r;return e.eat(",")&&(n="}"!=e.next?z(e):-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:r,max:n,expr:t}}function B(e,t){return t-e}function P(e,t){var r=[];return function t(n){var o=e[n];if(1==o.length&&!o[0].term)return t(o[0].to);r.push(n);for(var i=0;i<o.length;i++){var s=o[i],a=s.term,c=s.to;a||-1!=r.indexOf(c)||t(c)}}(t),r.sort(B)}function V(e){var t=Object.create(null);for(var r in e){var n=e[r];if(!n.hasDefault)return null;t[r]=n.default}return t}function $(e,t){var r=Object.create(null);for(var n in e){var o=t&&t[n];if(void 0===o){var i=e[n];if(!i.hasDefault)throw new RangeError("No value supplied for attribute "+n);o=i.default}r[n]=o}return r}function j(e){var t=Object.create(null);if(e)for(var r in e)t[r]=new J(e[r]);return t}q.next.get=function(){return this.tokens[this.pos]},N.prototype.eat=function(e){return this.next==e&&(this.pos++||!0)},N.prototype.err=function(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")},Object.defineProperties(N.prototype,q);var H=function(e,t,r){this.name=e,this.schema=t,this.spec=r,this.groups=r.group?r.group.split(" "):[],this.attrs=j(r.attrs),this.defaultAttrs=V(this.attrs),this.contentMatch=null,this.markSet=null,this.inlineContent=null,this.isBlock=!(r.inline||"text"==e),this.isText="text"==e},U={isInline:{configurable:!0},isTextblock:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};U.isInline.get=function(){return!this.isBlock},U.isTextblock.get=function(){return this.isBlock&&this.inlineContent},U.isLeaf.get=function(){return this.contentMatch==T.empty},U.isAtom.get=function(){return this.isLeaf||this.spec.atom},H.prototype.hasRequiredAttrs=function(){for(var e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1},H.prototype.compatibleContent=function(e){return this==e||this.contentMatch.compatible(e.contentMatch)},H.prototype.computeAttrs=function(e){return!e&&this.defaultAttrs?this.defaultAttrs:$(this.attrs,e)},H.prototype.create=function(e,t,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new D(this,this.computeAttrs(e),r.from(t),a.setFrom(n))},H.prototype.createChecked=function(e,t,n){if(t=r.from(t),!this.validContent(t))throw new RangeError("Invalid content for node "+this.name);return new D(this,this.computeAttrs(e),t,a.setFrom(n))},H.prototype.createAndFill=function(e,t,n){if(e=this.computeAttrs(e),(t=r.from(t)).size){var o=this.contentMatch.fillBefore(t);if(!o)return null;t=o.append(t)}var i=this.contentMatch.matchFragment(t).fillBefore(r.empty,!0);return i?new D(this,e,t.append(i),a.setFrom(n)):null},H.prototype.validContent=function(e){var t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(var r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0},H.prototype.allowsMarkType=function(e){return null==this.markSet||this.markSet.indexOf(e)>-1},H.prototype.allowsMarks=function(e){if(null==this.markSet)return!0;for(var t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0},H.prototype.allowedMarks=function(e){if(null==this.markSet)return e;for(var t,r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?t&&t.push(e[r]):t||(t=e.slice(0,r));return t?t.length?t:a.empty:e},H.compile=function(e,t){var r=Object.create(null);e.forEach((function(e,n){return r[e]=new H(e,t,n)}));var n=t.spec.topNode||"doc";if(!r[n])throw new RangeError("Schema is missing its top node type ('"+n+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(var o in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r},Object.defineProperties(H.prototype,U);var J=function(e){this.hasDefault=Object.prototype.hasOwnProperty.call(e,"default"),this.default=e.default},G={isRequired:{configurable:!0}};G.isRequired.get=function(){return!this.hasDefault},Object.defineProperties(J.prototype,G);var W=function(e,t,r,n){this.name=e,this.schema=r,this.spec=n,this.attrs=j(n.attrs),this.rank=t,this.excluded=null;var o=V(this.attrs);this.instance=o&&new a(this,o)};W.prototype.create=function(e){return!e&&this.instance?this.instance:new a(this,$(this.attrs,e))},W.compile=function(e,t){var r=Object.create(null),n=0;return e.forEach((function(e,o){return r[e]=new W(e,n++,t,o)})),r},W.prototype.removeFromSet=function(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e},W.prototype.isInSet=function(e){for(var t=0;t<e.length;t++)if(e[t].type==this)return e[t]},W.prototype.excludes=function(e){return this.excluded.indexOf(e)>-1};var K=function(e){for(var r in this.spec={},e)this.spec[r]=e[r];this.spec.nodes=t.from(e.nodes),this.spec.marks=t.from(e.marks),this.nodes=H.compile(this.spec.nodes,this),this.marks=W.compile(this.spec.marks,this);var n=Object.create(null);for(var o in this.nodes){if(o in this.marks)throw new RangeError(o+" can not be both a node and a mark");var i=this.nodes[o],s=i.spec.content||"",a=i.spec.marks;i.contentMatch=n[s]||(n[s]=T.parse(s,this.nodes)),i.inlineContent=i.contentMatch.inlineContent,i.markSet="_"==a?null:a?Z(this,a.split(" ")):""!=a&&i.inlineContent?null:[]}for(var c in this.marks){var l=this.marks[c],u=l.spec.excludes;l.excluded=null==u?[l]:""==u?[]:Z(this,u.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached=Object.create(null),this.cached.wrappings=Object.create(null)};function Z(e,t){for(var r=[],n=0;n<t.length;n++){var o=t[n],i=e.marks[o],s=i;if(i)r.push(i);else for(var a in e.marks){var c=e.marks[a];("_"==o||c.spec.group&&c.spec.group.split(" ").indexOf(o)>-1)&&r.push(s=c)}if(!s)throw new SyntaxError("Unknown mark type: '"+t[n]+"'")}return r}K.prototype.node=function(e,t,r,n){if("string"==typeof e)e=this.nodeType(e);else{if(!(e instanceof H))throw new RangeError("Invalid node type: "+e);if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}return e.createChecked(t,r,n)},K.prototype.text=function(e,t){var r=this.nodes.text;return new E(r,r.defaultAttrs,e,a.setFrom(t))},K.prototype.mark=function(e,t){return"string"==typeof e&&(e=this.marks[e]),e.create(t)},K.prototype.nodeFromJSON=function(e){return D.fromJSON(this,e)},K.prototype.markFromJSON=function(e){return a.fromJSON(this,e)},K.prototype.nodeType=function(e){var t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t};var Y=function(e,t){var r=this;this.schema=e,this.rules=t,this.tags=[],this.styles=[],t.forEach((function(e){e.tag?r.tags.push(e):e.style&&r.styles.push(e)})),this.normalizeLists=!this.tags.some((function(t){if(!/^(ul|ol)\b/.test(t.tag)||!t.node)return!1;var r=e.nodes[t.node];return r.contentMatch.matchType(r)}))};Y.prototype.parse=function(e,t){void 0===t&&(t={});var r=new ne(this,t,!1);return r.addAll(e,null,t.from,t.to),r.finish()},Y.prototype.parseSlice=function(e,t){void 0===t&&(t={});var r=new ne(this,t,!0);return r.addAll(e,null,t.from,t.to),l.maxOpen(r.finish())},Y.prototype.matchTag=function(e,t,r){for(var n=r?this.tags.indexOf(r)+1:0;n<this.tags.length;n++){var o=this.tags[n];if(ie(e,o.tag)&&(void 0===o.namespace||e.namespaceURI==o.namespace)&&(!o.context||t.matchesContext(o.context))){if(o.getAttrs){var i=o.getAttrs(e);if(!1===i)continue;o.attrs=i}return o}}},Y.prototype.matchStyle=function(e,t,r,n){for(var o=n?this.styles.indexOf(n)+1:0;o<this.styles.length;o++){var i=this.styles[o];if(!(0!=i.style.indexOf(e)||i.context&&!r.matchesContext(i.context)||i.style.length>e.length&&(61!=i.style.charCodeAt(e.length)||i.style.slice(e.length+1)!=t))){if(i.getAttrs){var s=i.getAttrs(t);if(!1===s)continue;i.attrs=s}return i}}},Y.schemaRules=function(e){var t=[];function r(e){for(var r=null==e.priority?50:e.priority,n=0;n<t.length;n++){var o=t[n];if((null==o.priority?50:o.priority)<r)break}t.splice(n,0,e)}var n=function(t){var n=e.marks[t].spec.parseDOM;n&&n.forEach((function(e){r(e=se(e)),e.mark=t}))};for(var o in e.marks)n(o);var i;for(var s in e.nodes)i=void 0,(i=e.nodes[s].spec.parseDOM)&&i.forEach((function(e){r(e=se(e)),e.node=s}));return t},Y.fromSchema=function(e){return e.cached.domParser||(e.cached.domParser=new Y(e,Y.schemaRules(e)))};var Q={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},X={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},ee={ol:!0,ul:!0};function te(e){return(e?1:0)|("full"===e?2:0)}var re=function(e,t,r,n,o,i,s){this.type=e,this.attrs=t,this.solid=o,this.match=i||(4&s?null:e.contentMatch),this.options=s,this.content=[],this.marks=r,this.activeMarks=a.none,this.pendingMarks=n,this.stashMarks=[]};re.prototype.findWrapping=function(e){if(!this.match){if(!this.type)return[];var t=this.type.contentMatch.fillBefore(r.from(e));if(!t){var n,o=this.type.contentMatch;return(n=o.findWrapping(e.type))?(this.match=o,n):null}this.match=this.type.contentMatch.matchFragment(t)}return this.match.findWrapping(e.type)},re.prototype.finish=function(e){if(!(1&this.options)){var t,n=this.content[this.content.length-1];n&&n.isText&&(t=/[ \t\r\n\u000c]+$/.exec(n.text))&&(n.text.length==t[0].length?this.content.pop():this.content[this.content.length-1]=n.withText(n.text.slice(0,n.text.length-t[0].length)))}var o=r.from(this.content);return!e&&this.match&&(o=o.append(this.match.fillBefore(r.empty,!0))),this.type?this.type.create(this.attrs,o,this.marks):o},re.prototype.popFromStashMark=function(e){for(var t=this.stashMarks.length-1;t>=0;t--)if(e.eq(this.stashMarks[t]))return this.stashMarks.splice(t,1)[0]},re.prototype.applyPending=function(e){for(var t=0,r=this.pendingMarks;t<r.length;t++){var n=r[t];(this.type?this.type.allowsMarkType(n.type):ae(n.type,e))&&!n.isInSet(this.activeMarks)&&(this.activeMarks=n.addToSet(this.activeMarks),this.pendingMarks=n.removeFromSet(this.pendingMarks))}};var ne=function(e,t,r){this.parser=e,this.options=t,this.isOpen=r;var n,o=t.topNode,i=te(t.preserveWhitespace)|(r?4:0);n=o?new re(o.type,o.attrs,a.none,a.none,!0,t.topMatch||o.type.contentMatch,i):new re(r?null:e.schema.topNodeType,null,a.none,a.none,!0,null,i),this.nodes=[n],this.open=0,this.find=t.findPositions,this.needsBlock=!1},oe={top:{configurable:!0},currentPos:{configurable:!0}};function ie(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function se(e){var t={};for(var r in e)t[r]=e[r];return t}function ae(e,t){var r=t.schema.nodes,n=function(n){var o=r[n];if(o.allowsMarkType(e)){var i=[],s=function(e){i.push(e);for(var r=0;r<e.edgeCount;r++){var n=e.edge(r),o=n.type,a=n.next;if(o==t)return!0;if(i.indexOf(a)<0&&s(a))return!0}};return s(o.contentMatch)?{v:!0}:void 0}};for(var o in r){var i=n(o);if(i)return i.v}}oe.top.get=function(){return this.nodes[this.open]},ne.prototype.addDOM=function(e){if(3==e.nodeType)this.addTextNode(e);else if(1==e.nodeType){var t=e.getAttribute("style"),r=t?this.readStyles(function(e){var t,r=/\s*([\w-]+)\s*:\s*([^;]+)/g,n=[];for(;t=r.exec(e);)n.push(t[1],t[2].trim());return n}(t)):null,n=this.top;if(null!=r)for(var o=0;o<r.length;o++)this.addPendingMark(r[o]);if(this.addElement(e),null!=r)for(var i=0;i<r.length;i++)this.removePendingMark(r[i],n)}},ne.prototype.addTextNode=function(e){var t=e.nodeValue,r=this.top;if(2&r.options||(r.type?r.type.inlineContent:r.content.length&&r.content[0].isInline)||/[^ \t\r\n\u000c]/.test(t)){if(1&r.options)t=2&r.options?t.replace(/\r\n?/g,"\n"):t.replace(/\r?\n|\r/g," ");else if(t=t.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(t)&&this.open==this.nodes.length-1){var n=r.content[r.content.length-1],o=e.previousSibling;(!n||o&&"BR"==o.nodeName||n.isText&&/[ \t\r\n\u000c]$/.test(n.text))&&(t=t.slice(1))}t&&this.insertNode(this.parser.schema.text(t)),this.findInText(e)}else this.findInside(e)},ne.prototype.addElement=function(e,t){var r,n=e.nodeName.toLowerCase();ee.hasOwnProperty(n)&&this.parser.normalizeLists&&function(e){for(var t=e.firstChild,r=null;t;t=t.nextSibling){var n=1==t.nodeType?t.nodeName.toLowerCase():null;n&&ee.hasOwnProperty(n)&&r?(r.appendChild(t),t=r):"li"==n?r=t:n&&(r=null)}}(e);var o=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(r=this.parser.matchTag(e,this,t));if(o?o.ignore:X.hasOwnProperty(n))this.findInside(e),this.ignoreFallback(e);else if(!o||o.skip||o.closeParent){o&&o.closeParent?this.open=Math.max(0,this.open-1):o&&o.skip.nodeType&&(e=o.skip);var i,s=this.top,a=this.needsBlock;if(Q.hasOwnProperty(n))i=!0,s.type||(this.needsBlock=!0);else if(!e.firstChild)return void this.leafFallback(e);this.addAll(e),i&&this.sync(s),this.needsBlock=a}else this.addElementByRule(e,o,!1===o.consuming?r:null)},ne.prototype.leafFallback=function(e){"BR"==e.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode("\n"))},ne.prototype.ignoreFallback=function(e){"BR"!=e.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"))},ne.prototype.readStyles=function(e){var t=a.none;e:for(var r=0;r<e.length;r+=2)for(var n=null;;){var o=this.parser.matchStyle(e[r],e[r+1],this,n);if(!o)continue e;if(o.ignore)return null;if(t=this.parser.schema.marks[o.mark].create(o.attrs).addToSet(t),!1!==o.consuming)break;n=o}return t},ne.prototype.addElementByRule=function(e,t,r){var n,o,i,s=this;t.node?(o=this.parser.schema.nodes[t.node]).isLeaf?this.insertNode(o.create(t.attrs))||this.leafFallback(e):n=this.enter(o,t.attrs,t.preserveWhitespace):(i=this.parser.schema.marks[t.mark].create(t.attrs),this.addPendingMark(i));var a=this.top;if(o&&o.isLeaf)this.findInside(e);else if(r)this.addElement(e,r);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach((function(e){return s.insertNode(e)}));else{var c=t.contentElement;"string"==typeof c?c=e.querySelector(c):"function"==typeof c&&(c=c(e)),c||(c=e),this.findAround(e,c,!0),this.addAll(c,n)}n&&(this.sync(a),this.open--),i&&this.removePendingMark(i,a)},ne.prototype.addAll=function(e,t,r,n){for(var o=r||0,i=r?e.childNodes[r]:e.firstChild,s=null==n?null:e.childNodes[n];i!=s;i=i.nextSibling,++o)this.findAtPoint(e,o),this.addDOM(i),t&&Q.hasOwnProperty(i.nodeName.toLowerCase())&&this.sync(t);this.findAtPoint(e,o)},ne.prototype.findPlace=function(e){for(var t,r,n=this.open;n>=0;n--){var o=this.nodes[n],i=o.findWrapping(e);if(i&&(!t||t.length>i.length)&&(t=i,r=o,!i.length))break;if(o.solid)break}if(!t)return!1;this.sync(r);for(var s=0;s<t.length;s++)this.enterInner(t[s],null,!1);return!0},ne.prototype.insertNode=function(e){if(e.isInline&&this.needsBlock&&!this.top.type){var t=this.textblockFromContext();t&&this.enterInner(t)}if(this.findPlace(e)){this.closeExtra();var r=this.top;r.applyPending(e.type),r.match&&(r.match=r.match.matchType(e.type));for(var n=r.activeMarks,o=0;o<e.marks.length;o++)r.type&&!r.type.allowsMarkType(e.marks[o].type)||(n=e.marks[o].addToSet(n));return r.content.push(e.mark(n)),!0}return!1},ne.prototype.enter=function(e,t,r){var n=this.findPlace(e.create(t));return n&&this.enterInner(e,t,!0,r),n},ne.prototype.enterInner=function(e,t,r,n){this.closeExtra();var o=this.top;o.applyPending(e),o.match=o.match&&o.match.matchType(e,t);var i=null==n?-5&o.options:te(n);4&o.options&&0==o.content.length&&(i|=4),this.nodes.push(new re(e,t,o.activeMarks,o.pendingMarks,r,null,i)),this.open++},ne.prototype.closeExtra=function(e){var t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}},ne.prototype.finish=function(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)},ne.prototype.sync=function(e){for(var t=this.open;t>=0;t--)if(this.nodes[t]==e)return void(this.open=t)},oe.currentPos.get=function(){this.closeExtra();for(var e=0,t=this.open;t>=0;t--){for(var r=this.nodes[t].content,n=r.length-1;n>=0;n--)e+=r[n].nodeSize;t&&e++}return e},ne.prototype.findAtPoint=function(e,t){if(this.find)for(var r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==t&&(this.find[r].pos=this.currentPos)},ne.prototype.findInside=function(e){if(this.find)for(var t=0;t<this.find.length;t++)null==this.find[t].pos&&1==e.nodeType&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)},ne.prototype.findAround=function(e,t,r){if(e!=t&&this.find)for(var n=0;n<this.find.length;n++){if(null==this.find[n].pos&&1==e.nodeType&&e.contains(this.find[n].node))t.compareDocumentPosition(this.find[n].node)&(r?2:4)&&(this.find[n].pos=this.currentPos)}},ne.prototype.findInText=function(e){if(this.find)for(var t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))},ne.prototype.matchesContext=function(e){var t=this;if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);var r=e.split("/"),n=this.options.context,o=!(this.isOpen||n&&n.parent.type!=this.nodes[0].type),i=-(n?n.depth+1:0)+(o?0:1),s=function(e,a){for(;e>=0;e--){var c=r[e];if(""==c){if(e==r.length-1||0==e)continue;for(;a>=i;a--)if(s(e-1,a))return!0;return!1}var l=a>0||0==a&&o?t.nodes[a].type:n&&a>=i?n.node(a-i).type:null;if(!l||l.name!=c&&-1==l.groups.indexOf(c))return!1;a--}return!0};return s(r.length-1,this.open)},ne.prototype.textblockFromContext=function(){var e=this.options.context;if(e)for(var t=e.depth;t>=0;t--){var r=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(var n in this.parser.schema.nodes){var o=this.parser.schema.nodes[n];if(o.isTextblock&&o.defaultAttrs)return o}},ne.prototype.addPendingMark=function(e){var t=function(e,t){for(var r=0;r<t.length;r++)if(e.eq(t[r]))return t[r]}(e,this.top.pendingMarks);t&&this.top.stashMarks.push(t),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)},ne.prototype.removePendingMark=function(e,t){for(var r=this.open;r>=0;r--){var n=this.nodes[r];if(n.pendingMarks.lastIndexOf(e)>-1)n.pendingMarks=e.removeFromSet(n.pendingMarks);else{n.activeMarks=e.removeFromSet(n.activeMarks);var o=n.popFromStashMark(e);o&&n.type&&n.type.allowsMarkType(o.type)&&(n.activeMarks=o.addToSet(n.activeMarks))}if(n==t)break}},Object.defineProperties(ne.prototype,oe);var ce=function(e,t){this.nodes=e||{},this.marks=t||{}};function le(e){var t={};for(var r in e){var n=e[r].spec.toDOM;n&&(t[r]=n)}return t}function ue(e){return e.document||window.document}ce.prototype.serializeFragment=function(e,t,r){var n=this;void 0===t&&(t={}),r||(r=ue(t).createDocumentFragment());var o=r,i=null;return e.forEach((function(e){if(i||e.marks.length){i||(i=[]);for(var r=0,s=0;r<i.length&&s<e.marks.length;){var a=e.marks[s];if(n.marks[a.type.name]){if(!a.eq(i[r])||!1===a.type.spec.spanning)break;r+=2,s++}else s++}for(;r<i.length;)o=i.pop(),i.pop();for(;s<e.marks.length;){var c=e.marks[s++],l=n.serializeMark(c,e.isInline,t);l&&(i.push(c,o),o.appendChild(l.dom),o=l.contentDOM||l.dom)}}o.appendChild(n.serializeNode(e,t))})),r},ce.prototype.serializeNode=function(e,t){void 0===t&&(t={});var r=ce.renderSpec(ue(t),this.nodes[e.type.name](e)),n=r.dom,o=r.contentDOM;if(o){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");t.onContent?t.onContent(e,o,t):this.serializeFragment(e.content,t,o)}return n},ce.prototype.serializeNodeAndMarks=function(e,t){void 0===t&&(t={});for(var r=this.serializeNode(e,t),n=e.marks.length-1;n>=0;n--){var o=this.serializeMark(e.marks[n],e.isInline,t);o&&((o.contentDOM||o.dom).appendChild(r),r=o.dom)}return r},ce.prototype.serializeMark=function(e,t,r){void 0===r&&(r={});var n=this.marks[e.type.name];return n&&ce.renderSpec(ue(r),n(e,t))},ce.renderSpec=function(e,t,r){if(void 0===r&&(r=null),"string"==typeof t)return{dom:e.createTextNode(t)};if(null!=t.nodeType)return{dom:t};if(t.dom&&null!=t.dom.nodeType)return t;var n=t[0],o=n.indexOf(" ");o>0&&(r=n.slice(0,o),n=n.slice(o+1));var i=null,s=r?e.createElementNS(r,n):e.createElement(n),a=t[1],c=1;if(a&&"object"==typeof a&&null==a.nodeType&&!Array.isArray(a))for(var l in c=2,a)if(null!=a[l]){var u=l.indexOf(" ");u>0?s.setAttributeNS(l.slice(0,u),l.slice(u+1),a[l]):s.setAttribute(l,a[l])}for(var p=c;p<t.length;p++){var h=t[p];if(0===h){if(p<t.length-1||p>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:s,contentDOM:s}}var d=ce.renderSpec(e,h,r),f=d.dom,m=d.contentDOM;if(s.appendChild(f),m){if(i)throw new RangeError("Multiple content holes");i=m}}return{dom:s,contentDOM:i}},ce.fromSchema=function(e){return e.cached.domSerializer||(e.cached.domSerializer=new ce(this.nodesFromSchema(e),this.marksFromSchema(e)))},ce.nodesFromSchema=function(e){var t=le(e.nodes);return t.text||(t.text=function(e){return e.text}),t},ce.marksFromSchema=function(e){return le(e.marks)};var pe=Math.pow(2,16);function he(e){return 65535&e}var de=function(e,t,r){void 0===t&&(t=!1),void 0===r&&(r=null),this.pos=e,this.deleted=t,this.recover=r},fe=function(e,t){void 0===t&&(t=!1),this.ranges=e,this.inverted=t};fe.prototype.recover=function(e){var t=0,r=he(e);if(!this.inverted)for(var n=0;n<r;n++)t+=this.ranges[3*n+2]-this.ranges[3*n+1];return this.ranges[3*r]+t+function(e){return(e-(65535&e))/pe}(e)},fe.prototype.mapResult=function(e,t){return void 0===t&&(t=1),this._map(e,t,!1)},fe.prototype.map=function(e,t){return void 0===t&&(t=1),this._map(e,t,!0)},fe.prototype._map=function(e,t,r){for(var n=0,o=this.inverted?2:1,i=this.inverted?1:2,s=0;s<this.ranges.length;s+=3){var a=this.ranges[s]-(this.inverted?n:0);if(a>e)break;var c=this.ranges[s+o],l=this.ranges[s+i],u=a+c;if(e<=u){var p=a+n+((c?e==a?-1:e==u?1:t:t)<0?0:l);if(r)return p;var h=s/3+(e-a)*pe;return new de(p,t<0?e!=a:e!=u,h)}n+=l-c}return r?e+n:new de(e+n)},fe.prototype.touches=function(e,t){for(var r=0,n=he(t),o=this.inverted?2:1,i=this.inverted?1:2,s=0;s<this.ranges.length;s+=3){var a=this.ranges[s]-(this.inverted?r:0);if(a>e)break;var c=this.ranges[s+o];if(e<=a+c&&s==3*n)return!0;r+=this.ranges[s+i]-c}return!1},fe.prototype.forEach=function(e){for(var t=this.inverted?2:1,r=this.inverted?1:2,n=0,o=0;n<this.ranges.length;n+=3){var i=this.ranges[n],s=i-(this.inverted?o:0),a=i+(this.inverted?0:o),c=this.ranges[n+t],l=this.ranges[n+r];e(s,s+c,a,a+l),o+=l-c}},fe.prototype.invert=function(){return new fe(this.ranges,!this.inverted)},fe.prototype.toString=function(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)},fe.offset=function(e){return 0==e?fe.empty:new fe(e<0?[0,-e,0]:[0,0,e])},fe.empty=new fe([]);var me=function(e,t,r,n){this.maps=e||[],this.from=r||0,this.to=null==n?this.maps.length:n,this.mirror=t};function ge(e){var t=Error.call(this,e);return t.__proto__=ge.prototype,t}me.prototype.slice=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.maps.length),new me(this.maps,this.mirror,e,t)},me.prototype.copy=function(){return new me(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)},me.prototype.appendMap=function(e,t){this.to=this.maps.push(e),null!=t&&this.setMirror(this.maps.length-1,t)},me.prototype.appendMapping=function(e){for(var t=0,r=this.maps.length;t<e.maps.length;t++){var n=e.getMirror(t);this.appendMap(e.maps[t],null!=n&&n<t?r+n:null)}},me.prototype.getMirror=function(e){if(this.mirror)for(var t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]},me.prototype.setMirror=function(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)},me.prototype.appendMappingInverted=function(e){for(var t=e.maps.length-1,r=this.maps.length+e.maps.length;t>=0;t--){var n=e.getMirror(t);this.appendMap(e.maps[t].invert(),null!=n&&n>t?r-n-1:null)}},me.prototype.invert=function(){var e=new me;return e.appendMappingInverted(this),e},me.prototype.map=function(e,t){if(void 0===t&&(t=1),this.mirror)return this._map(e,t,!0);for(var r=this.from;r<this.to;r++)e=this.maps[r].map(e,t);return e},me.prototype.mapResult=function(e,t){return void 0===t&&(t=1),this._map(e,t,!1)},me.prototype._map=function(e,t,r){for(var n=!1,o=null,i=this.from;i<this.to;i++){var s=this.maps[i],a=o&&o[i];if(null!=a&&s.touches(e,a))e=s.recover(a);else{var c=s.mapResult(e,t);if(null!=c.recover){var l=this.getMirror(i);if(null!=l&&l>i&&l<this.to){if(c.deleted){i=l,e=this.maps[l].recover(c.recover);continue}(o||(o=Object.create(null)))[l]=c.recover}}c.deleted&&(n=!0),e=c.pos}}return r?e:new de(e,n)},ge.prototype=Object.create(Error.prototype),ge.prototype.constructor=ge,ge.prototype.name="TransformError";var ve=function(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new me},ye={before:{configurable:!0},docChanged:{configurable:!0}};function be(){throw new Error("Override me")}ye.before.get=function(){return this.docs.length?this.docs[0]:this.doc},ve.prototype.step=function(e){var t=this.maybeStep(e);if(t.failed)throw new ge(t.failed);return this},ve.prototype.maybeStep=function(e){var t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t},ye.docChanged.get=function(){return this.steps.length>0},ve.prototype.addStep=function(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t},Object.defineProperties(ve.prototype,ye);var we=Object.create(null),ke=function(){};ke.prototype.apply=function(e){return be()},ke.prototype.getMap=function(){return fe.empty},ke.prototype.invert=function(e){return be()},ke.prototype.map=function(e){return be()},ke.prototype.merge=function(e){return null},ke.prototype.toJSON=function(){return be()},ke.fromJSON=function(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");var r=we[t.stepType];if(!r)throw new RangeError("No step type "+t.stepType+" defined");return r.fromJSON(e,t)},ke.jsonID=function(e,t){if(e in we)throw new RangeError("Duplicate use of step JSON ID "+e);return we[e]=t,t.prototype.jsonID=e,t};var xe=function(e,t){this.doc=e,this.failed=t};xe.ok=function(e){return new xe(e,null)},xe.fail=function(e){return new xe(null,e)},xe.fromReplace=function(e,t,r,n){try{return xe.ok(e.replace(t,r,n))}catch(e){if(e instanceof c)return xe.fail(e.message);throw e}};var Ce=function(e){function t(t,r,n,o){e.call(this),this.from=t,this.to=r,this.slice=n,this.structure=!!o}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(e){return this.structure&&_e(e,this.from,this.to)?xe.fail("Structure replace would overwrite content"):xe.fromReplace(e,this.from,this.to,this.slice)},t.prototype.getMap=function(){return new fe([this.from,this.to-this.from,this.slice.size])},t.prototype.invert=function(e){return new t(this.from,this.from+this.slice.size,e.slice(this.from,this.to))},t.prototype.map=function(e){var r=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return r.deleted&&n.deleted?null:new t(r.pos,Math.max(r.pos,n.pos),this.slice)},t.prototype.merge=function(e){if(!(e instanceof t)||e.structure!=this.structure)return null;if(this.from+this.slice.size!=e.from||this.slice.openEnd||e.slice.openStart){if(e.to!=this.from||this.slice.openStart||e.slice.openEnd)return null;var r=this.slice.size+e.slice.size==0?l.empty:new l(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new t(e.from,this.to,r,this.structure)}var n=this.slice.size+e.slice.size==0?l.empty:new l(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new t(this.from,this.to+(e.to-e.from),n,this.structure)},t.prototype.toJSON=function(){var e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e},t.fromJSON=function(e,r){if("number"!=typeof r.from||"number"!=typeof r.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new t(r.from,r.to,l.fromJSON(e,r.slice),!!r.structure)},t}(ke);ke.jsonID("replace",Ce);var Se=function(e){function t(t,r,n,o,i,s,a){e.call(this),this.from=t,this.to=r,this.gapFrom=n,this.gapTo=o,this.slice=i,this.insert=s,this.structure=!!a}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(e){if(this.structure&&(_e(e,this.from,this.gapFrom)||_e(e,this.gapTo,this.to)))return xe.fail("Structure gap-replace would overwrite content");var t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return xe.fail("Gap is not a flat range");var r=this.slice.insertAt(this.insert,t.content);return r?xe.fromReplace(e,this.from,this.to,r):xe.fail("Content does not fit in gap")},t.prototype.getMap=function(){return new fe([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])},t.prototype.invert=function(e){var r=this.gapTo-this.gapFrom;return new t(this.from,this.from+this.slice.size+r,this.from+this.insert,this.from+this.insert+r,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)},t.prototype.map=function(e){var r=e.mapResult(this.from,1),n=e.mapResult(this.to,-1),o=e.map(this.gapFrom,-1),i=e.map(this.gapTo,1);return r.deleted&&n.deleted||o<r.pos||i>n.pos?null:new t(r.pos,n.pos,o,i,this.slice,this.insert,this.structure)},t.prototype.toJSON=function(){var e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e},t.fromJSON=function(e,r){if("number"!=typeof r.from||"number"!=typeof r.to||"number"!=typeof r.gapFrom||"number"!=typeof r.gapTo||"number"!=typeof r.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new t(r.from,r.to,r.gapFrom,r.gapTo,l.fromJSON(e,r.slice),r.insert,!!r.structure)},t}(ke);function _e(e,t,r){for(var n=e.resolve(t),o=r-t,i=n.depth;o>0&&i>0&&n.indexAfter(i)==n.node(i).childCount;)i--,o--;if(o>0)for(var s=n.node(i).maybeChild(n.indexAfter(i));o>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,o--}return!1}function De(e,t,r){return(0==t||e.canReplace(t,e.childCount))&&(r==e.childCount||e.canReplace(0,r))}function Ae(e){for(var t=e.parent.content.cutByIndex(e.startIndex,e.endIndex),r=e.depth;;--r){var n=e.$from.node(r),o=e.$from.index(r),i=e.$to.indexAfter(r);if(r<e.depth&&n.canReplace(o,i,t))return r;if(0==r||n.type.spec.isolating||!De(n,o,i))break}}function Ee(e,t,r,n){void 0===n&&(n=e);var o=function(e,t){var r=e.parent,n=e.startIndex,o=e.endIndex,i=r.contentMatchAt(n).findWrapping(t);if(!i)return null;var s=i.length?i[0]:t;return r.canReplaceWith(n,o,s)?i:null}(e,t),i=o&&function(e,t){var r=e.parent,n=e.startIndex,o=e.endIndex,i=r.child(n),s=t.contentMatch.findWrapping(i.type);if(!s)return null;for(var a=(s.length?s[s.length-1]:t).contentMatch,c=n;a&&c<o;c++)a=a.matchType(r.child(c).type);if(!a||!a.validEnd)return null;return s}(n,t);return i?o.map(Me).concat({type:t,attrs:r}).concat(i.map(Me)):null}function Me(e){return{type:e,attrs:null}}function Te(e,t,r,n){void 0===r&&(r=1);var o=e.resolve(t),i=o.depth-r,s=n&&n[n.length-1]||o.parent;if(i<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!s.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(var a=o.depth-1,c=r-2;a>i;a--,c--){var l=o.node(a),u=o.index(a);if(l.type.spec.isolating)return!1;var p=l.content.cutByIndex(u,l.childCount),h=n&&n[c]||l;if(h!=l&&(p=p.replaceChild(0,h.type.create(h.attrs))),!l.canReplace(u+1,l.childCount)||!h.type.validContent(p))return!1}var d=o.indexAfter(i),f=n&&n[0];return o.node(i).canReplaceWith(d,d,f?f.type:o.node(i+1).type)}function Oe(e,t){var r=e.resolve(t),n=r.index();return Ne(r.nodeBefore,r.nodeAfter)&&r.parent.canReplace(n,n+1)}function Ne(e,t){return e&&t&&!e.isLeaf&&e.canAppend(t)}function qe(e,t,r){void 0===r&&(r=-1);for(var n=e.resolve(t),o=n.depth;;o--){var i=void 0,s=void 0,a=n.index(o);if(o==n.depth?(i=n.nodeBefore,s=n.nodeAfter):r>0?(i=n.node(o+1),a++,s=n.node(o).maybeChild(a)):(i=n.node(o).maybeChild(a-1),s=n.node(o+1)),i&&!i.isTextblock&&Ne(i,s)&&n.node(o).canReplace(a,a+1))return t;if(0==o)break;t=r<0?n.before(o):n.after(o)}}function Re(e,t,r){var n=e.resolve(t);if(!r.content.size)return t;for(var o=r.content,i=0;i<r.openStart;i++)o=o.firstChild.content;for(var s=1;s<=(0==r.openStart&&r.size?2:1);s++)for(var a=n.depth;a>=0;a--){var c=a==n.depth?0:n.pos<=(n.start(a+1)+n.end(a+1))/2?-1:1,l=n.index(a)+(c>0?1:0);if(1==s?n.node(a).canReplace(l,l,o):n.node(a).contentMatchAt(l).findWrapping(o.firstChild.type))return 0==c?n.pos:c<0?n.before(a+1):n.after(a+1)}return null}function Ie(e,t,n){for(var o=[],i=0;i<e.childCount;i++){var s=e.child(i);s.content.size&&(s=s.copy(Ie(s.content,t,s))),s.isInline&&(s=t(s,n,i)),o.push(s)}return r.fromArray(o)}ke.jsonID("replaceAround",Se),ve.prototype.lift=function(e,t){for(var n=e.$from,o=e.$to,i=e.depth,s=n.before(i+1),a=o.after(i+1),c=s,u=a,p=r.empty,h=0,d=i,f=!1;d>t;d--)f||n.index(d)>0?(f=!0,p=r.from(n.node(d).copy(p)),h++):c--;for(var m=r.empty,g=0,v=i,y=!1;v>t;v--)y||o.after(v+1)<o.end(v)?(y=!0,m=r.from(o.node(v).copy(m)),g++):u++;return this.step(new Se(c,u,s,a,new l(p.append(m),h,g),p.size-h,!0))},ve.prototype.wrap=function(e,t){for(var n=r.empty,o=t.length-1;o>=0;o--)n=r.from(t[o].type.create(t[o].attrs,n));var i=e.start,s=e.end;return this.step(new Se(i,s,i,s,new l(n,0,0),t.length,!0))},ve.prototype.setBlockType=function(e,t,n,o){var i=this;if(void 0===t&&(t=e),!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");var s=this.steps.length;return this.doc.nodesBetween(e,t,(function(e,t){if(e.isTextblock&&!e.hasMarkup(n,o)&&function(e,t,r){var n=e.resolve(t),o=n.index();return n.parent.canReplaceWith(o,o+1,r)}(i.doc,i.mapping.slice(s).map(t),n)){i.clearIncompatible(i.mapping.slice(s).map(t,1),n);var a=i.mapping.slice(s),c=a.map(t,1),u=a.map(t+e.nodeSize,1);return i.step(new Se(c,u,c+1,u-1,new l(r.from(n.create(o,null,e.marks)),0,0),1,!0)),!1}})),this},ve.prototype.setNodeMarkup=function(e,t,n,o){var i=this.doc.nodeAt(e);if(!i)throw new RangeError("No node at given position");t||(t=i.type);var s=t.create(n,null,o||i.marks);if(i.isLeaf)return this.replaceWith(e,e+i.nodeSize,s);if(!t.validContent(i.content))throw new RangeError("Invalid content for node type "+t.name);return this.step(new Se(e,e+i.nodeSize,e+1,e+i.nodeSize-1,new l(r.from(s),0,0),1,!0))},ve.prototype.split=function(e,t,n){void 0===t&&(t=1);for(var o=this.doc.resolve(e),i=r.empty,s=r.empty,a=o.depth,c=o.depth-t,u=t-1;a>c;a--,u--){i=r.from(o.node(a).copy(i));var p=n&&n[u];s=r.from(p?p.type.create(p.attrs,s):o.node(a).copy(s))}return this.step(new Ce(e,e,new l(i.append(s),t,t),!0))},ve.prototype.join=function(e,t){void 0===t&&(t=1);var r=new Ce(e-t,e+t,l.empty,!0);return this.step(r)};var Le=function(e){function t(t,r,n){e.call(this),this.from=t,this.to=r,this.mark=n}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(e){var t=this,r=e.slice(this.from,this.to),n=e.resolve(this.from),o=n.node(n.sharedDepth(this.to)),i=new l(Ie(r.content,(function(e,r){return r.type.allowsMarkType(t.mark.type)?e.mark(t.mark.addToSet(e.marks)):e}),o),r.openStart,r.openEnd);return xe.fromReplace(e,this.from,this.to,i)},t.prototype.invert=function(){return new ze(this.from,this.to,this.mark)},t.prototype.map=function(e){var r=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return r.deleted&&n.deleted||r.pos>=n.pos?null:new t(r.pos,n.pos,this.mark)},t.prototype.merge=function(e){if(e instanceof t&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from)return new t(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark)},t.prototype.toJSON=function(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},t.fromJSON=function(e,r){if("number"!=typeof r.from||"number"!=typeof r.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new t(r.from,r.to,e.markFromJSON(r.mark))},t}(ke);ke.jsonID("addMark",Le);var ze=function(e){function t(t,r,n){e.call(this),this.from=t,this.to=r,this.mark=n}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(e){var t=this,r=e.slice(this.from,this.to),n=new l(Ie(r.content,(function(e){return e.mark(t.mark.removeFromSet(e.marks))})),r.openStart,r.openEnd);return xe.fromReplace(e,this.from,this.to,n)},t.prototype.invert=function(){return new Le(this.from,this.to,this.mark)},t.prototype.map=function(e){var r=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return r.deleted&&n.deleted||r.pos>=n.pos?null:new t(r.pos,n.pos,this.mark)},t.prototype.merge=function(e){if(e instanceof t&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from)return new t(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark)},t.prototype.toJSON=function(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},t.fromJSON=function(e,r){if("number"!=typeof r.from||"number"!=typeof r.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new t(r.from,r.to,e.markFromJSON(r.mark))},t}(ke);function Fe(e,t,r){return!r.openStart&&!r.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),r.content)}ke.jsonID("removeMark",ze),ve.prototype.addMark=function(e,t,r){var n=this,o=[],i=[],s=null,a=null;return this.doc.nodesBetween(e,t,(function(n,c,l){if(n.isInline){var u=n.marks;if(!r.isInSet(u)&&l.type.allowsMarkType(r.type)){for(var p=Math.max(c,e),h=Math.min(c+n.nodeSize,t),d=r.addToSet(u),f=0;f<u.length;f++)u[f].isInSet(d)||(s&&s.to==p&&s.mark.eq(u[f])?s.to=h:o.push(s=new ze(p,h,u[f])));a&&a.to==p?a.to=h:i.push(a=new Le(p,h,r))}}})),o.forEach((function(e){return n.step(e)})),i.forEach((function(e){return n.step(e)})),this},ve.prototype.removeMark=function(e,t,r){var n=this;void 0===r&&(r=null);var o=[],i=0;return this.doc.nodesBetween(e,t,(function(n,s){if(n.isInline){i++;var a=null;if(r instanceof W){var c=r.isInSet(n.marks);c&&(a=[c])}else r?r.isInSet(n.marks)&&(a=[r]):a=n.marks;if(a&&a.length)for(var l=Math.min(s+n.nodeSize,t),u=0;u<a.length;u++){for(var p=a[u],h=void 0,d=0;d<o.length;d++){var f=o[d];f.step==i-1&&p.eq(o[d].style)&&(h=f)}h?(h.to=l,h.step=i):o.push({style:p,from:Math.max(s,e),to:l,step:i})}}})),o.forEach((function(e){return n.step(new ze(e.from,e.to,e.style))})),this},ve.prototype.clearIncompatible=function(e,t,n){void 0===n&&(n=t.contentMatch);for(var o=this.doc.nodeAt(e),i=[],s=e+1,a=0;a<o.childCount;a++){var c=o.child(a),u=s+c.nodeSize,p=n.matchType(c.type,c.attrs);if(p){n=p;for(var h=0;h<c.marks.length;h++)t.allowsMarkType(c.marks[h].type)||this.step(new ze(s,u,c.marks[h]))}else i.push(new Ce(s,u,l.empty));s=u}if(!n.validEnd){var d=n.fillBefore(r.empty,!0);this.replace(s,s,new l(d,0,0))}for(var f=i.length-1;f>=0;f--)this.step(i[f]);return this},ve.prototype.replace=function(e,t,r){void 0===t&&(t=e),void 0===r&&(r=l.empty);var n=function(e,t,r,n){if(void 0===r&&(r=t),void 0===n&&(n=l.empty),t==r&&!n.size)return null;var o=e.resolve(t),i=e.resolve(r);return Fe(o,i,n)?new Ce(t,r,n):new Be(o,i,n).fit()}(this.doc,e,t,r);return n&&this.step(n),this},ve.prototype.replaceWith=function(e,t,n){return this.replace(e,t,new l(r.from(n),0,0))},ve.prototype.delete=function(e,t){return this.replace(e,t,l.empty)},ve.prototype.insert=function(e,t){return this.replaceWith(e,e,t)};var Be=function(e,t,n){this.$to=t,this.$from=e,this.unplaced=n,this.frontier=[];for(var o=0;o<=e.depth;o++){var i=e.node(o);this.frontier.push({type:i.type,match:i.contentMatchAt(e.indexAfter(o))})}this.placed=r.empty;for(var s=e.depth;s>0;s--)this.placed=r.from(e.node(s).copy(this.placed))},Pe={depth:{configurable:!0}};function Ve(e,t,r){return 0==t?e.cutByIndex(r):e.replaceChild(0,e.firstChild.copy(Ve(e.firstChild.content,t-1,r)))}function $e(e,t,r){return 0==t?e.append(r):e.replaceChild(e.childCount-1,e.lastChild.copy($e(e.lastChild.content,t-1,r)))}function je(e,t){for(var r=0;r<t;r++)e=e.firstChild.content;return e}function He(e,t,n){if(t<=0)return e;var o=e.content;return t>1&&(o=o.replaceChild(0,He(o.firstChild,t-1,1==o.childCount?n-1:0))),t>0&&(o=e.type.contentMatch.fillBefore(o).append(o),n<=0&&(o=o.append(e.type.contentMatch.matchFragment(o).fillBefore(r.empty,!0)))),e.copy(o)}function Ue(e,t,r,n,o){var i=e.node(t),s=o?e.indexAfter(t):e.index(t);if(s==i.childCount&&!r.compatibleContent(i.type))return null;var a=n.fillBefore(i.content,!0,s);return a&&!function(e,t,r){for(var n=r;n<t.childCount;n++)if(!e.allowsMarks(t.child(n).marks))return!0;return!1}(r,i.content,s)?a:null}function Je(e,t,n,o,i){if(t<n){var s=e.firstChild;e=e.replaceChild(0,s.copy(Je(s.content,t+1,n,o,s)))}if(t>o){var a=i.contentMatchAt(0),c=a.fillBefore(e).append(e);e=c.append(a.matchFragment(c).fillBefore(r.empty,!0))}return e}function Ge(e,t){for(var r=[],n=Math.min(e.depth,t.depth);n>=0;n--){var o=e.start(n);if(o<e.pos-(e.depth-n)||t.end(n)>t.pos+(t.depth-n)||e.node(n).type.spec.isolating||t.node(n).type.spec.isolating)break;o==t.start(n)&&r.push(n)}return r}Pe.depth.get=function(){return this.frontier.length-1},Be.prototype.fit=function(){for(;this.unplaced.size;){var e=this.findFittable();e?this.placeNodes(e):this.openMore()||this.dropNode()}var t=this.mustMoveInline(),r=this.placed.size-this.depth-this.$from.depth,n=this.$from,o=t<0?this.$to:n.doc.resolve(t);if(this.close(o)){for(var i=this.placed,s=n.depth,a=o.depth;s&&a&&1==i.childCount;)i=i.firstChild.content,s--,a--;var c=new l(i,s,a);if(t>-1)return new Se(n.pos,t,this.$to.pos,this.$to.end(),c,r);if(c.size||n.pos!=this.$to.pos)return new Ce(n.pos,o.pos,c)}return null},Be.prototype.findFittable=function(){for(var e=1;e<=2;e++)for(var t=this.unplaced.openStart;t>=0;t--)for(var n=void 0,o=(t?(n=je(this.unplaced.content,t-1).firstChild).content:this.unplaced.content).firstChild,i=this.depth;i>=0;i--){var s=this.frontier[i],a=s.type,c=s.match,l=void 0,u=void 0;if(1==e&&(o?c.matchType(o.type)||(u=c.fillBefore(r.from(o),!1)):a.compatibleContent(n.type)))return{sliceDepth:t,frontierDepth:i,parent:n,inject:u};if(2==e&&o&&(l=c.findWrapping(o.type)))return{sliceDepth:t,frontierDepth:i,parent:n,wrap:l};if(n&&c.matchType(n.type))break}},Be.prototype.openMore=function(){var e=this.unplaced,t=e.content,r=e.openStart,n=e.openEnd,o=je(t,r);return!(!o.childCount||o.firstChild.isLeaf)&&(this.unplaced=new l(t,r+1,Math.max(n,o.size+r>=t.size-n?r+1:0)),!0)},Be.prototype.dropNode=function(){var e=this.unplaced,t=e.content,r=e.openStart,n=e.openEnd,o=je(t,r);if(o.childCount<=1&&r>0){var i=t.size-r<=r+o.size;this.unplaced=new l(Ve(t,r-1,1),r-1,i?r-1:n)}else this.unplaced=new l(Ve(t,r,1),r,n)},Be.prototype.placeNodes=function(e){for(var t=e.sliceDepth,n=e.frontierDepth,o=e.parent,i=e.inject,s=e.wrap;this.depth>n;)this.closeFrontierNode();if(s)for(var a=0;a<s.length;a++)this.openFrontierNode(s[a]);var c=this.unplaced,u=o?o.content:c.content,p=c.openStart-t,h=0,d=[],f=this.frontier[n],m=f.match,g=f.type;if(i){for(var v=0;v<i.childCount;v++)d.push(i.child(v));m=m.matchFragment(i)}for(var y=u.size+t-(c.content.size-c.openEnd);h<u.childCount;){var b=u.child(h),w=m.matchType(b.type);if(!w)break;(++h>1||0==p||b.content.size)&&(m=w,d.push(He(b.mark(g.allowedMarks(b.marks)),1==h?p:0,h==u.childCount?y:-1)))}var k=h==u.childCount;k||(y=-1),k&&y<0&&o&&o.type==this.frontier[this.depth].type?this.closeFrontierNode():this.frontier[n].match=m;for(var x=0,C=u;x<y;x++){var S=C.lastChild;this.frontier.push({type:S.type,match:S.contentMatchAt(S.childCount)}),C=S.content}this.unplaced=k?0==t?l.empty:new l(Ve(c.content,t-1,1),t-1,y<0?c.openEnd:t-1):new l(Ve(c.content,t,h),c.openStart,c.openEnd),this.placed=$e(this.placed,n,r.from(d))},Be.prototype.mustMoveInline=function(){if(!this.$to.parent.isTextblock)return-1;var e,t=this.frontier[this.depth];if(!t.type.isTextblock||!Ue(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(e=this.findCloseLevel(this.$to))&&e.depth==this.depth)return-1;for(var r=this.$to.depth,n=this.$to.after(r);r>1&&n==this.$to.end(--r);)++n;return n},Be.prototype.findCloseLevel=function(e){e:for(var t=Math.min(this.depth,e.depth);t>=0;t--){var r=this.frontier[t],n=r.match,o=Ue(e,t,r.type,n,!1);if(o){for(var i=t-1;i>=0;i--){var s=this.frontier[i],a=s.match,c=Ue(e,i,s.type,a,!0);if(!c||c.childCount)continue e}return{depth:t,fit:o}}}},Be.prototype.close=function(e){var t=this.findCloseLevel(e);if(!t)return!1;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=$e(this.placed,t.depth,t.fit));for(var r=t.depth+1;r<=e.depth;r++){var n=e.node(r),o=n.type.contentMatch.fillBefore(n.content,!0,e.index(r));this.openFrontierNode(n.type,n.attrs,o)}return!0},Be.prototype.openFrontierNode=function(e,t,n){var o=this.frontier[this.depth];o.match=o.match.matchType(e),this.placed=$e(this.placed,this.depth,r.from(e.create(t,n))),this.frontier.push({type:e,match:e.contentMatch})},Be.prototype.closeFrontierNode=function(){var e=this.frontier.pop().match.fillBefore(r.empty,!0);e.childCount&&(this.placed=$e(this.placed,this.frontier.length,e))},Object.defineProperties(Be.prototype,Pe),ve.prototype.replaceRange=function(e,t,r){if(!r.size)return this.deleteRange(e,t);var n=this.doc.resolve(e),o=this.doc.resolve(t);if(Fe(n,o,r))return this.step(new Ce(e,t,r));var i=Ge(n,this.doc.resolve(t));0==i[i.length-1]&&i.pop();var s=-(n.depth+1);i.unshift(s);for(var a=n.depth,c=n.pos-1;a>0;a--,c--){var u=n.node(a).type.spec;if(u.defining||u.isolating)break;i.indexOf(a)>-1?s=a:n.before(a)==c&&i.splice(1,0,-a)}for(var p=i.indexOf(s),h=[],d=r.openStart,f=r.content,m=0;;m++){var g=f.firstChild;if(h.push(g),m==r.openStart)break;f=g.content}d>0&&h[d-1].type.spec.defining&&n.node(p).type!=h[d-1].type?d-=1:d>=2&&h[d-1].isTextblock&&h[d-2].type.spec.defining&&n.node(p).type!=h[d-2].type&&(d-=2);for(var v=r.openStart;v>=0;v--){var y=(v+d+1)%(r.openStart+1),b=h[y];if(b)for(var w=0;w<i.length;w++){var k=i[(w+p)%i.length],x=!0;k<0&&(x=!1,k=-k);var C=n.node(k-1),S=n.index(k-1);if(C.canReplaceWith(S,S,b.type,b.marks))return this.replace(n.before(k),x?o.after(k):t,new l(Je(r.content,0,r.openStart,y),y,r.openEnd))}}for(var _=this.steps.length,D=i.length-1;D>=0&&(this.replace(e,t,r),!(this.steps.length>_));D--){var A=i[D];D<0||(e=n.before(A),t=o.after(A))}return this},ve.prototype.replaceRangeWith=function(e,t,n){if(!n.isInline&&e==t&&this.doc.resolve(e).parent.content.size){var o=function(e,t,r){var n=e.resolve(t);if(n.parent.canReplaceWith(n.index(),n.index(),r))return t;if(0==n.parentOffset)for(var o=n.depth-1;o>=0;o--){var i=n.index(o);if(n.node(o).canReplaceWith(i,i,r))return n.before(o+1);if(i>0)return null}if(n.parentOffset==n.parent.content.size)for(var s=n.depth-1;s>=0;s--){var a=n.indexAfter(s);if(n.node(s).canReplaceWith(a,a,r))return n.after(s+1);if(a<n.node(s).childCount)return null}}(this.doc,e,n.type);null!=o&&(e=t=o)}return this.replaceRange(e,t,new l(r.from(n),0,0))},ve.prototype.deleteRange=function(e,t){for(var r=this.doc.resolve(e),n=this.doc.resolve(t),o=Ge(r,n),i=0;i<o.length;i++){var s=o[i],a=i==o.length-1;if(a&&0==s||r.node(s).type.contentMatch.validEnd)return this.delete(r.start(s),n.end(s));if(s>0&&(a||r.node(s-1).canReplace(r.index(s-1),n.indexAfter(s-1))))return this.delete(r.before(s),n.after(s))}for(var c=1;c<=r.depth&&c<=n.depth;c++)if(e-r.start(c)==r.depth-c&&t>r.end(c)&&n.end(c)-t!=n.depth-c)return this.delete(r.before(c),t);return this.delete(e,t)};var We=Object.create(null),Ke=function(e,t,r){this.ranges=r||[new Ye(e.min(t),e.max(t))],this.$anchor=e,this.$head=t},Ze={anchor:{configurable:!0},head:{configurable:!0},from:{configurable:!0},to:{configurable:!0},$from:{configurable:!0},$to:{configurable:!0},empty:{configurable:!0}};Ze.anchor.get=function(){return this.$anchor.pos},Ze.head.get=function(){return this.$head.pos},Ze.from.get=function(){return this.$from.pos},Ze.to.get=function(){return this.$to.pos},Ze.$from.get=function(){return this.ranges[0].$from},Ze.$to.get=function(){return this.ranges[0].$to},Ze.empty.get=function(){for(var e=this.ranges,t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0},Ke.prototype.content=function(){return this.$from.node(0).slice(this.from,this.to,!0)},Ke.prototype.replace=function(e,t){void 0===t&&(t=l.empty);for(var r=t.content.lastChild,n=null,o=0;o<t.openEnd;o++)n=r,r=r.lastChild;for(var i=e.steps.length,s=this.ranges,a=0;a<s.length;a++){var c=s[a],u=c.$from,p=c.$to,h=e.mapping.slice(i);e.replaceRange(h.map(u.pos),h.map(p.pos),a?l.empty:t),0==a&&it(e,i,(r?r.isInline:n&&n.isTextblock)?-1:1)}},Ke.prototype.replaceWith=function(e,t){for(var r=e.steps.length,n=this.ranges,o=0;o<n.length;o++){var i=n[o],s=i.$from,a=i.$to,c=e.mapping.slice(r),l=c.map(s.pos),u=c.map(a.pos);o?e.deleteRange(l,u):(e.replaceRangeWith(l,u,t),it(e,r,t.isInline?-1:1))}},Ke.findFrom=function(e,t,r){var n=e.parent.inlineContent?new Qe(e):ot(e.node(0),e.parent,e.pos,e.index(),t,r);if(n)return n;for(var o=e.depth-1;o>=0;o--){var i=t<0?ot(e.node(0),e.node(o),e.before(o+1),e.index(o),t,r):ot(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,t,r);if(i)return i}},Ke.near=function(e,t){return void 0===t&&(t=1),this.findFrom(e,t)||this.findFrom(e,-t)||new rt(e.node(0))},Ke.atStart=function(e){return ot(e,e,0,0,1)||new rt(e)},Ke.atEnd=function(e){return ot(e,e,e.content.size,e.childCount,-1)||new rt(e)},Ke.fromJSON=function(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");var r=We[t.type];if(!r)throw new RangeError("No selection type "+t.type+" defined");return r.fromJSON(e,t)},Ke.jsonID=function(e,t){if(e in We)throw new RangeError("Duplicate use of selection JSON ID "+e);return We[e]=t,t.prototype.jsonID=e,t},Ke.prototype.getBookmark=function(){return Qe.between(this.$anchor,this.$head).getBookmark()},Object.defineProperties(Ke.prototype,Ze),Ke.prototype.visible=!0;var Ye=function(e,t){this.$from=e,this.$to=t},Qe=function(e){function t(t,r){void 0===r&&(r=t),e.call(this,t,r)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={$cursor:{configurable:!0}};return r.$cursor.get=function(){return this.$anchor.pos==this.$head.pos?this.$head:null},t.prototype.map=function(r,n){var o=r.resolve(n.map(this.head));if(!o.parent.inlineContent)return e.near(o);var i=r.resolve(n.map(this.anchor));return new t(i.parent.inlineContent?i:o,o)},t.prototype.replace=function(t,r){if(void 0===r&&(r=l.empty),e.prototype.replace.call(this,t,r),r==l.empty){var n=this.$from.marksAcross(this.$to);n&&t.ensureMarks(n)}},t.prototype.eq=function(e){return e instanceof t&&e.anchor==this.anchor&&e.head==this.head},t.prototype.getBookmark=function(){return new Xe(this.anchor,this.head)},t.prototype.toJSON=function(){return{type:"text",anchor:this.anchor,head:this.head}},t.fromJSON=function(e,r){if("number"!=typeof r.anchor||"number"!=typeof r.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new t(e.resolve(r.anchor),e.resolve(r.head))},t.create=function(e,t,r){void 0===r&&(r=t);var n=e.resolve(t);return new this(n,r==t?n:e.resolve(r))},t.between=function(r,n,o){var i=r.pos-n.pos;if(o&&!i||(o=i>=0?1:-1),!n.parent.inlineContent){var s=e.findFrom(n,o,!0)||e.findFrom(n,-o,!0);if(!s)return e.near(n,o);n=s.$head}return r.parent.inlineContent||(0==i||(r=(e.findFrom(r,-o,!0)||e.findFrom(r,o,!0)).$anchor).pos<n.pos!=i<0)&&(r=n),new t(r,n)},Object.defineProperties(t.prototype,r),t}(Ke);Ke.jsonID("text",Qe);var Xe=function(e,t){this.anchor=e,this.head=t};Xe.prototype.map=function(e){return new Xe(e.map(this.anchor),e.map(this.head))},Xe.prototype.resolve=function(e){return Qe.between(e.resolve(this.anchor),e.resolve(this.head))};var et=function(e){function t(t){var r=t.nodeAfter,n=t.node(0).resolve(t.pos+r.nodeSize);e.call(this,t,n),this.node=r}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.map=function(r,n){var o=n.mapResult(this.anchor),i=o.deleted,s=o.pos,a=r.resolve(s);return i?e.near(a):new t(a)},t.prototype.content=function(){return new l(r.from(this.node),0,0)},t.prototype.eq=function(e){return e instanceof t&&e.anchor==this.anchor},t.prototype.toJSON=function(){return{type:"node",anchor:this.anchor}},t.prototype.getBookmark=function(){return new tt(this.anchor)},t.fromJSON=function(e,r){if("number"!=typeof r.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new t(e.resolve(r.anchor))},t.create=function(e,t){return new this(e.resolve(t))},t.isSelectable=function(e){return!e.isText&&!1!==e.type.spec.selectable},t}(Ke);et.prototype.visible=!1,Ke.jsonID("node",et);var tt=function(e){this.anchor=e};tt.prototype.map=function(e){var t=e.mapResult(this.anchor),r=t.deleted,n=t.pos;return r?new Xe(n,n):new tt(n)},tt.prototype.resolve=function(e){var t=e.resolve(this.anchor),r=t.nodeAfter;return r&&et.isSelectable(r)?new et(t):Ke.near(t)};var rt=function(e){function t(t){e.call(this,t.resolve(0),t.resolve(t.content.size))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.replace=function(t,r){if(void 0===r&&(r=l.empty),r==l.empty){t.delete(0,t.doc.content.size);var n=e.atStart(t.doc);n.eq(t.selection)||t.setSelection(n)}else e.prototype.replace.call(this,t,r)},t.prototype.toJSON=function(){return{type:"all"}},t.fromJSON=function(e){return new t(e)},t.prototype.map=function(e){return new t(e)},t.prototype.eq=function(e){return e instanceof t},t.prototype.getBookmark=function(){return nt},t}(Ke);Ke.jsonID("all",rt);var nt={map:function(){return this},resolve:function(e){return new rt(e)}};function ot(e,t,r,n,o,i){if(t.inlineContent)return Qe.create(e,r);for(var s=n-(o>0?0:1);o>0?s<t.childCount:s>=0;s+=o){var a=t.child(s);if(a.isAtom){if(!i&&et.isSelectable(a))return et.create(e,r-(o<0?a.nodeSize:0))}else{var c=ot(e,a,r+o,o<0?a.childCount:0,o,i);if(c)return c}r+=a.nodeSize*o}}function it(e,t,r){var n=e.steps.length-1;if(!(n<t)){var o,i=e.steps[n];if(i instanceof Ce||i instanceof Se)e.mapping.maps[n].forEach((function(e,t,r,n){null==o&&(o=n)})),e.setSelection(Ke.near(e.doc.resolve(o),r))}}var st=function(e){function t(t){e.call(this,t.doc),this.time=Date.now(),this.curSelection=t.selection,this.curSelectionFor=0,this.storedMarks=t.storedMarks,this.updated=0,this.meta=Object.create(null)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={selection:{configurable:!0},selectionSet:{configurable:!0},storedMarksSet:{configurable:!0},isGeneric:{configurable:!0},scrolledIntoView:{configurable:!0}};return r.selection.get=function(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection},t.prototype.setSelection=function(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=-3&(1|this.updated),this.storedMarks=null,this},r.selectionSet.get=function(){return(1&this.updated)>0},t.prototype.setStoredMarks=function(e){return this.storedMarks=e,this.updated|=2,this},t.prototype.ensureMarks=function(e){return a.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this},t.prototype.addStoredMark=function(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))},t.prototype.removeStoredMark=function(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))},r.storedMarksSet.get=function(){return(2&this.updated)>0},t.prototype.addStep=function(t,r){e.prototype.addStep.call(this,t,r),this.updated=-3&this.updated,this.storedMarks=null},t.prototype.setTime=function(e){return this.time=e,this},t.prototype.replaceSelection=function(e){return this.selection.replace(this,e),this},t.prototype.replaceSelectionWith=function(e,t){var r=this.selection;return!1!==t&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||a.none))),r.replaceWith(this,e),this},t.prototype.deleteSelection=function(){return this.selection.replace(this),this},t.prototype.insertText=function(e,t,r){void 0===r&&(r=t);var n=this.doc.type.schema;if(null==t)return e?this.replaceSelectionWith(n.text(e),!0):this.deleteSelection();if(!e)return this.deleteRange(t,r);var o=this.storedMarks;if(!o){var i=this.doc.resolve(t);o=r==t?i.marks():i.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(t,r,n.text(e,o)),this.selection.empty||this.setSelection(Ke.near(this.selection.$to)),this},t.prototype.setMeta=function(e,t){return this.meta["string"==typeof e?e:e.key]=t,this},t.prototype.getMeta=function(e){return this.meta["string"==typeof e?e:e.key]},r.isGeneric.get=function(){for(var e in this.meta)return!1;return!0},t.prototype.scrollIntoView=function(){return this.updated|=4,this},r.scrolledIntoView.get=function(){return(4&this.updated)>0},Object.defineProperties(t.prototype,r),t}(ve);function at(e,t){return t&&e?e.bind(t):e}var ct=function(e,t,r){this.name=e,this.init=at(t.init,r),this.apply=at(t.apply,r)},lt=[new ct("doc",{init:function(e){return e.doc||e.schema.topNodeType.createAndFill()},apply:function(e){return e.doc}}),new ct("selection",{init:function(e,t){return e.selection||Ke.atStart(t.doc)},apply:function(e){return e.selection}}),new ct("storedMarks",{init:function(e){return e.storedMarks||null},apply:function(e,t,r,n){return n.selection.$cursor?e.storedMarks:null}}),new ct("scrollToSelection",{init:function(){return 0},apply:function(e,t){return e.scrolledIntoView?t+1:t}})],ut=function(e,t){var r=this;this.schema=e,this.fields=lt.concat(),this.plugins=[],this.pluginsByKey=Object.create(null),t&&t.forEach((function(e){if(r.pluginsByKey[e.key])throw new RangeError("Adding different instances of a keyed plugin ("+e.key+")");r.plugins.push(e),r.pluginsByKey[e.key]=e,e.spec.state&&r.fields.push(new ct(e.key,e.spec.state,e))}))},pt=function(e){this.config=e},ht={schema:{configurable:!0},plugins:{configurable:!0},tr:{configurable:!0}};ht.schema.get=function(){return this.config.schema},ht.plugins.get=function(){return this.config.plugins},pt.prototype.apply=function(e){return this.applyTransaction(e).state},pt.prototype.filterTransaction=function(e,t){void 0===t&&(t=-1);for(var r=0;r<this.config.plugins.length;r++)if(r!=t){var n=this.config.plugins[r];if(n.spec.filterTransaction&&!n.spec.filterTransaction.call(n,e,this))return!1}return!0},pt.prototype.applyTransaction=function(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};for(var t=[e],r=this.applyInner(e),n=null;;){for(var o=!1,i=0;i<this.config.plugins.length;i++){var s=this.config.plugins[i];if(s.spec.appendTransaction){var a=n?n[i].n:0,c=n?n[i].state:this,l=a<t.length&&s.spec.appendTransaction.call(s,a?t.slice(a):t,c,r);if(l&&r.filterTransaction(l,i)){if(l.setMeta("appendedTransaction",e),!n){n=[];for(var u=0;u<this.config.plugins.length;u++)n.push(u<i?{state:r,n:t.length}:{state:this,n:0})}t.push(l),r=r.applyInner(l),o=!0}n&&(n[i]={state:r,n:t.length})}}if(!o)return{state:r,transactions:t}}},pt.prototype.applyInner=function(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");for(var t=new pt(this.config),r=this.config.fields,n=0;n<r.length;n++){var o=r[n];t[o.name]=o.apply(e,this[o.name],this,t)}for(var i=0;i<dt.length;i++)dt[i](this,e,t);return t},ht.tr.get=function(){return new st(this)},pt.create=function(e){for(var t=new ut(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new pt(t),n=0;n<t.fields.length;n++)r[t.fields[n].name]=t.fields[n].init(e,r);return r},pt.prototype.reconfigure=function(e){for(var t=new ut(this.schema,e.plugins),r=t.fields,n=new pt(t),o=0;o<r.length;o++){var i=r[o].name;n[i]=this.hasOwnProperty(i)?this[i]:r[o].init(e,n)}return n},pt.prototype.toJSON=function(e){var t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map((function(e){return e.toJSON()}))),e&&"object"==typeof e)for(var r in e){if("doc"==r||"selection"==r)throw new RangeError("The JSON fields `doc` and `selection` are reserved");var n=e[r],o=n.spec.state;o&&o.toJSON&&(t[r]=o.toJSON.call(n,this[n.key]))}return t},pt.fromJSON=function(e,t,r){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");var n=new ut(e.schema,e.plugins),o=new pt(n);return n.fields.forEach((function(n){if("doc"==n.name)o.doc=D.fromJSON(e.schema,t.doc);else if("selection"==n.name)o.selection=Ke.fromJSON(o.doc,t.selection);else if("storedMarks"==n.name)t.storedMarks&&(o.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(r)for(var i in r){var s=r[i],a=s.spec.state;if(s.key==n.name&&a&&a.fromJSON&&Object.prototype.hasOwnProperty.call(t,i))return void(o[n.name]=a.fromJSON.call(s,e,t[i],o))}o[n.name]=n.init(e,o)}})),o},pt.addApplyListener=function(e){dt.push(e)},pt.removeApplyListener=function(e){var t=dt.indexOf(e);t>-1&&dt.splice(t,1)},Object.defineProperties(pt.prototype,ht);var dt=[];var ft=function(e){this.props={},e.props&&function e(t,r,n){for(var o in t){var i=t[o];i instanceof Function?i=i.bind(r):"handleDOMEvents"==o&&(i=e(i,r,{})),n[o]=i}return n}(e.props,this,this.props),this.spec=e,this.key=e.key?e.key.key:gt("plugin")};ft.prototype.getState=function(e){return e[this.key]};var mt=Object.create(null);function gt(e){return e in mt?e+"$"+ ++mt[e]:(mt[e]=0,e+"$")}var vt=function(e){void 0===e&&(e="key"),this.key=gt(e)};vt.prototype.get=function(e){return e.config.pluginsByKey[this.key]},vt.prototype.getState=function(e){return e[this.key]};var yt={};if("undefined"!=typeof navigator&&"undefined"!=typeof document){var bt=/Edge\/(\d+)/.exec(navigator.userAgent),wt=/MSIE \d/.test(navigator.userAgent),kt=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);yt.mac=/Mac/.test(navigator.platform);var xt=yt.ie=!!(wt||kt||bt);yt.ie_version=wt?document.documentMode||6:kt?+kt[1]:bt?+bt[1]:null,yt.gecko=!xt&&/gecko\/(\d+)/i.test(navigator.userAgent),yt.gecko_version=yt.gecko&&+(/Firefox\/(\d+)/.exec(navigator.userAgent)||[0,0])[1];var Ct=!xt&&/Chrome\/(\d+)/.exec(navigator.userAgent);yt.chrome=!!Ct,yt.chrome_version=Ct&&+Ct[1],yt.safari=!xt&&/Apple Computer/.test(navigator.vendor),yt.ios=yt.safari&&(/Mobile\/\w+/.test(navigator.userAgent)||navigator.maxTouchPoints>2),yt.android=/Android \d/.test(navigator.userAgent),yt.webkit="webkitFontSmoothing"in document.documentElement.style,yt.webkit_version=yt.webkit&&+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]}var St=function(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t},_t=function(e){var t=e.assignedSlot||e.parentNode;return t&&11==t.nodeType?t.host:t},Dt=null,At=function(e,t,r){var n=Dt||(Dt=document.createRange());return n.setEnd(e,null==r?e.nodeValue.length:r),n.setStart(e,t||0),n},Et=function(e,t,r,n){return r&&(Tt(e,t,r,n,-1)||Tt(e,t,r,n,1))},Mt=/^(img|br|input|textarea|hr)$/i;function Tt(e,t,r,n,o){for(;;){if(e==r&&t==n)return!0;if(t==(o<0?0:Ot(e))){var i=e.parentNode;if(1!=i.nodeType||Nt(e)||Mt.test(e.nodeName)||"false"==e.contentEditable)return!1;t=St(e)+(o<0?0:1),e=i}else{if(1!=e.nodeType)return!1;if("false"==(e=e.childNodes[t+(o<0?-1:0)]).contentEditable)return!1;t=o<0?Ot(e):0}}}function Ot(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function Nt(e){for(var t,r=e;r&&!(t=r.pmViewDesc);r=r.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}var qt=function(e){var t=e.isCollapsed;return t&&yt.chrome&&e.rangeCount&&!e.getRangeAt(0).collapsed&&(t=!1),t};function Rt(e,t){var r=document.createEvent("Event");return r.initEvent("keydown",!0,!0),r.keyCode=e,r.key=r.code=t,r}function It(e){return{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function Lt(e,t){return"number"==typeof e?e:e[t]}function zt(e){var t=e.getBoundingClientRect(),r=t.width/e.offsetWidth||1,n=t.height/e.offsetHeight||1;return{left:t.left,right:t.left+e.clientWidth*r,top:t.top,bottom:t.top+e.clientHeight*n}}function Ft(e,t,r){for(var n=e.someProp("scrollThreshold")||0,o=e.someProp("scrollMargin")||5,i=e.dom.ownerDocument,s=r||e.dom;s;s=_t(s))if(1==s.nodeType){var a=s==i.body||1!=s.nodeType,c=a?It(i):zt(s),l=0,u=0;if(t.top<c.top+Lt(n,"top")?u=-(c.top-t.top+Lt(o,"top")):t.bottom>c.bottom-Lt(n,"bottom")&&(u=t.bottom-c.bottom+Lt(o,"bottom")),t.left<c.left+Lt(n,"left")?l=-(c.left-t.left+Lt(o,"left")):t.right>c.right-Lt(n,"right")&&(l=t.right-c.right+Lt(o,"right")),l||u)if(a)i.defaultView.scrollBy(l,u);else{var p=s.scrollLeft,h=s.scrollTop;u&&(s.scrollTop+=u),l&&(s.scrollLeft+=l);var d=s.scrollLeft-p,f=s.scrollTop-h;t={left:t.left-d,top:t.top-f,right:t.right-d,bottom:t.bottom-f}}if(a)break}}function Bt(e){for(var t=[],r=e.ownerDocument;e&&(t.push({dom:e,top:e.scrollTop,left:e.scrollLeft}),e!=r);e=_t(e));return t}function Pt(e,t){for(var r=0;r<e.length;r++){var n=e[r],o=n.dom,i=n.top,s=n.left;o.scrollTop!=i+t&&(o.scrollTop=i+t),o.scrollLeft!=s&&(o.scrollLeft=s)}}var Vt=null;function $t(e,t){for(var r,n,o=2e8,i=0,s=t.top,a=t.top,c=e.firstChild,l=0;c;c=c.nextSibling,l++){var u=void 0;if(1==c.nodeType)u=c.getClientRects();else{if(3!=c.nodeType)continue;u=At(c).getClientRects()}for(var p=0;p<u.length;p++){var h=u[p];if(h.top<=s&&h.bottom>=a){s=Math.max(h.bottom,s),a=Math.min(h.top,a);var d=h.left>t.left?h.left-t.left:h.right<t.left?t.left-h.right:0;if(d<o){r=c,o=d,n=d&&3==r.nodeType?{left:h.right<t.left?h.right:h.left,top:t.top}:t,1==c.nodeType&&d&&(i=l+(t.left>=(h.left+h.right)/2?1:0));continue}}!r&&(t.left>=h.right&&t.top>=h.top||t.left>=h.left&&t.top>=h.bottom)&&(i=l+1)}}return r&&3==r.nodeType?function(e,t){for(var r=e.nodeValue.length,n=document.createRange(),o=0;o<r;o++){n.setEnd(e,o+1),n.setStart(e,o);var i=Ut(n,1);if(i.top!=i.bottom&&jt(t,i))return{node:e,offset:o+(t.left>=(i.left+i.right)/2?1:0)}}return{node:e,offset:0}}(r,n):!r||o&&1==r.nodeType?{node:e,offset:i}:$t(r,n)}function jt(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function Ht(e,t){var r,n,o,i,s=e.root;if(s.caretPositionFromPoint)try{var a=s.caretPositionFromPoint(t.left,t.top);a&&(o=(r=a).offsetNode,i=r.offset)}catch(e){}if(!o&&s.caretRangeFromPoint){var c=s.caretRangeFromPoint(t.left,t.top);c&&(o=(n=c).startContainer,i=n.startOffset)}var l,u=s.elementFromPoint(t.left,t.top+1);if(!u||!e.dom.contains(1!=u.nodeType?u.parentNode:u)){var p=e.dom.getBoundingClientRect();if(!jt(t,p))return null;if(!(u=function e(t,r,n){var o=t.childNodes.length;if(o&&n.top<n.bottom)for(var i=Math.max(0,Math.min(o-1,Math.floor(o*(r.top-n.top)/(n.bottom-n.top))-2)),s=i;;){var a=t.childNodes[s];if(1==a.nodeType)for(var c=a.getClientRects(),l=0;l<c.length;l++){var u=c[l];if(jt(r,u))return e(a,r,u)}if((s=(s+1)%o)==i)break}return t}(e.dom,t,p)))return null}if(yt.safari&&u.draggable&&(o=i=null),u=function(e,t){var r=e.parentNode;return r&&/^li$/i.test(r.nodeName)&&t.left<e.getBoundingClientRect().left?r:e}(u,t),o){if(yt.gecko&&1==o.nodeType&&(i=Math.min(i,o.childNodes.length))<o.childNodes.length){var h,d=o.childNodes[i];"IMG"==d.nodeName&&(h=d.getBoundingClientRect()).right<=t.left&&h.bottom>t.top&&i++}o==e.dom&&i==o.childNodes.length-1&&1==o.lastChild.nodeType&&t.top>o.lastChild.getBoundingClientRect().bottom?l=e.state.doc.content.size:0!=i&&1==o.nodeType&&"BR"==o.childNodes[i-1].nodeName||(l=function(e,t,r,n){for(var o=-1,i=t;i!=e.dom;){var s=e.docView.nearestDesc(i,!0);if(!s)return null;if(s.node.isBlock&&s.parent){var a=s.dom.getBoundingClientRect();if(a.left>n.left||a.top>n.top)o=s.posBefore;else{if(!(a.right<n.left||a.bottom<n.top))break;o=s.posAfter}}i=s.dom.parentNode}return o>-1?o:e.docView.posFromDOM(t,r)}(e,o,i,t))}null==l&&(l=function(e,t,r){var n=$t(t,r),o=n.node,i=n.offset,s=-1;if(1==o.nodeType&&!o.firstChild){var a=o.getBoundingClientRect();s=a.left!=a.right&&r.left>(a.left+a.right)/2?1:-1}return e.docView.posFromDOM(o,i,s)}(e,u,t));var f=e.docView.nearestDesc(u,!0);return{pos:l,inside:f?f.posAtStart-f.border:-1}}function Ut(e,t){var r=e.getClientRects();return r.length?r[t<0?0:r.length-1]:e.getBoundingClientRect()}var Jt=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function Gt(e,t,r){var n=e.docView.domFromPos(t,r<0?-1:1),o=n.node,i=n.offset,s=yt.webkit||yt.gecko;if(3==o.nodeType){if(!s||!Jt.test(o.nodeValue)&&(r<0?i:i!=o.nodeValue.length)){var a=i,c=i,l=r<0?1:-1;return r<0&&!i?(c++,l=-1):r>=0&&i==o.nodeValue.length?(a--,l=1):r<0?a--:c++,Wt(Ut(At(o,a,c),l),l<0)}var u=Ut(At(o,i,i),r);if(yt.gecko&&i&&/\s/.test(o.nodeValue[i-1])&&i<o.nodeValue.length){var p=Ut(At(o,i-1,i-1),-1);if(p.top==u.top){var h=Ut(At(o,i,i+1),-1);if(h.top!=u.top)return Wt(h,h.left<p.left)}}return u}if(!e.state.doc.resolve(t).parent.inlineContent){if(i&&(r<0||i==Ot(o))){var d=o.childNodes[i-1];if(1==d.nodeType)return Kt(d.getBoundingClientRect(),!1)}if(i<Ot(o)){var f=o.childNodes[i];if(1==f.nodeType)return Kt(f.getBoundingClientRect(),!0)}return Kt(o.getBoundingClientRect(),r>=0)}if(i&&(r<0||i==Ot(o))){var m=o.childNodes[i-1],g=3==m.nodeType?At(m,Ot(m)-(s?0:1)):1!=m.nodeType||"BR"==m.nodeName&&m.nextSibling?null:m;if(g)return Wt(Ut(g,1),!1)}if(i<Ot(o)){var v=o.childNodes[i],y=3==v.nodeType?At(v,0,s?0:1):1==v.nodeType?v:null;if(y)return Wt(Ut(y,-1),!0)}return Wt(Ut(3==o.nodeType?At(o):o,-r),r>=0)}function Wt(e,t){if(0==e.width)return e;var r=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:r,right:r}}function Kt(e,t){if(0==e.height)return e;var r=t?e.top:e.bottom;return{top:r,bottom:r,left:e.left,right:e.right}}function Zt(e,t,r){var n=e.state,o=e.root.activeElement;n!=t&&e.updateState(t),o!=e.dom&&e.focus();try{return r()}finally{n!=t&&e.updateState(n),o!=e.dom&&o&&o.focus()}}var Yt=/[\u0590-\u08ac]/;var Qt=null,Xt=null,er=!1;function tr(e,t,r){return Qt==t&&Xt==r?er:(Qt=t,Xt=r,er="up"==r||"down"==r?function(e,t,r){var n=t.selection,o="up"==r?n.$from:n.$to;return Zt(e,t,(function(){for(var t=e.docView.domFromPos(o.pos,"up"==r?-1:1).node;;){var n=e.docView.nearestDesc(t,!0);if(!n)break;if(n.node.isBlock){t=n.dom;break}t=n.dom.parentNode}for(var i=Gt(e,o.pos,1),s=t.firstChild;s;s=s.nextSibling){var a=void 0;if(1==s.nodeType)a=s.getClientRects();else{if(3!=s.nodeType)continue;a=At(s,0,s.nodeValue.length).getClientRects()}for(var c=0;c<a.length;c++){var l=a[c];if(l.bottom>l.top&&("up"==r?l.bottom<i.top+1:l.top>i.bottom-1))return!1}}return!0}))}(e,t,r):function(e,t,r){var n=t.selection.$head;if(!n.parent.isTextblock)return!1;var o=n.parentOffset,i=!o,s=o==n.parent.content.size,a=getSelection();return Yt.test(n.parent.textContent)&&a.modify?Zt(e,t,(function(){var t=a.getRangeAt(0),o=a.focusNode,i=a.focusOffset,s=a.caretBidiLevel;a.modify("move",r,"character");var c=!(n.depth?e.docView.domAfterPos(n.before()):e.dom).contains(1==a.focusNode.nodeType?a.focusNode:a.focusNode.parentNode)||o==a.focusNode&&i==a.focusOffset;return a.removeAllRanges(),a.addRange(t),null!=s&&(a.caretBidiLevel=s),c})):"left"==r||"backward"==r?i:s}(e,t,r))}var rr=function(e,t,r,n){this.parent=e,this.children=t,this.dom=r,r.pmViewDesc=this,this.contentDOM=n,this.dirty=0},nr={beforePosition:{configurable:!0},size:{configurable:!0},border:{configurable:!0},posBefore:{configurable:!0},posAtStart:{configurable:!0},posAfter:{configurable:!0},posAtEnd:{configurable:!0},contentLost:{configurable:!0},domAtom:{configurable:!0}};rr.prototype.matchesWidget=function(){return!1},rr.prototype.matchesMark=function(){return!1},rr.prototype.matchesNode=function(){return!1},rr.prototype.matchesHack=function(){return!1},nr.beforePosition.get=function(){return!1},rr.prototype.parseRule=function(){return null},rr.prototype.stopEvent=function(){return!1},nr.size.get=function(){for(var e=0,t=0;t<this.children.length;t++)e+=this.children[t].size;return e},nr.border.get=function(){return 0},rr.prototype.destroy=function(){this.parent=null,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=null);for(var e=0;e<this.children.length;e++)this.children[e].destroy()},rr.prototype.posBeforeChild=function(e){for(var t=0,r=this.posAtStart;t<this.children.length;t++){var n=this.children[t];if(n==e)return r;r+=n.size}},nr.posBefore.get=function(){return this.parent.posBeforeChild(this)},nr.posAtStart.get=function(){return this.parent?this.parent.posBeforeChild(this)+this.border:0},nr.posAfter.get=function(){return this.posBefore+this.size},nr.posAtEnd.get=function(){return this.posAtStart+this.size-2*this.border},rr.prototype.localPosFromDOM=function(e,t,r){if(this.contentDOM&&this.contentDOM.contains(1==e.nodeType?e:e.parentNode)){if(r<0){var n,o;if(e==this.contentDOM)n=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;n=e.previousSibling}for(;n&&(!(o=n.pmViewDesc)||o.parent!=this);)n=n.previousSibling;return n?this.posBeforeChild(o)+o.size:this.posAtStart}var i,s;if(e==this.contentDOM)i=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;i=e.nextSibling}for(;i&&(!(s=i.pmViewDesc)||s.parent!=this);)i=i.nextSibling;return i?this.posBeforeChild(s):this.posAtEnd}var a;if(e==this.dom&&this.contentDOM)a=t>St(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))a=2&e.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==t)for(var c=e;;c=c.parentNode){if(c==this.dom){a=!1;break}if(c.parentNode.firstChild!=c)break}if(null==a&&t==e.childNodes.length)for(var l=e;;l=l.parentNode){if(l==this.dom){a=!0;break}if(l.parentNode.lastChild!=l)break}}return(null==a?r>0:a)?this.posAtEnd:this.posAtStart},rr.prototype.nearestDesc=function(e,t){for(var r=!0,n=e;n;n=n.parentNode){var o=this.getDesc(n);if(o&&(!t||o.node)){if(!r||!o.nodeDOM||(1==o.nodeDOM.nodeType?o.nodeDOM.contains(1==e.nodeType?e:e.parentNode):o.nodeDOM==e))return o;r=!1}}},rr.prototype.getDesc=function(e){for(var t=e.pmViewDesc,r=t;r;r=r.parent)if(r==this)return t},rr.prototype.posFromDOM=function(e,t,r){for(var n=e;n;n=n.parentNode){var o=this.getDesc(n);if(o)return o.localPosFromDOM(e,t,r)}return-1},rr.prototype.descAt=function(e){for(var t=0,r=0;t<this.children.length;t++){var n=this.children[t],o=r+n.size;if(r==e&&o!=r){for(;!n.border&&n.children.length;)n=n.children[0];return n}if(e<o)return n.descAt(e-r-n.border);r=o}},rr.prototype.domFromPos=function(e,t){if(!this.contentDOM)return{node:this.dom,offset:0};for(var r=0,n=0,o=!0;;n++,o=!1){for(;n<this.children.length&&(this.children[n].beforePosition||this.children[n].dom.parentNode!=this.contentDOM);)r+=this.children[n++].size;var i=n==this.children.length?null:this.children[n];if(r==e&&(0==t||!i||!i.size||i.border||t<0&&o)||i&&i.domAtom&&e<r+i.size)return{node:this.contentDOM,offset:i?St(i.dom):this.contentDOM.childNodes.length};if(!i)throw new Error("Invalid position "+e);var s=r+i.size;if(!i.domAtom&&(t<0&&!i.border?s>=e:s>e)&&(s>e||n+1>=this.children.length||!this.children[n+1].beforePosition))return i.domFromPos(e-r-i.border,t);r=s}},rr.prototype.parseRange=function(e,t,r){if(void 0===r&&(r=0),0==this.children.length)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};for(var n=-1,o=-1,i=r,s=0;;s++){var a=this.children[s],c=i+a.size;if(-1==n&&e<=c){var l=i+a.border;if(e>=l&&t<=c-a.border&&a.node&&a.contentDOM&&this.contentDOM.contains(a.contentDOM))return a.parseRange(e,t,l);e=i;for(var u=s;u>0;u--){var p=this.children[u-1];if(p.size&&p.dom.parentNode==this.contentDOM&&!p.emptyChildAt(1)){n=St(p.dom)+1;break}e-=p.size}-1==n&&(n=0)}if(n>-1&&(c>t||s==this.children.length-1)){t=c;for(var h=s+1;h<this.children.length;h++){var d=this.children[h];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){o=St(d.dom);break}t+=d.size}-1==o&&(o=this.contentDOM.childNodes.length);break}i=c}return{node:this.contentDOM,from:e,to:t,fromOffset:n,toOffset:o}},rr.prototype.emptyChildAt=function(e){if(this.border||!this.contentDOM||!this.children.length)return!1;var t=this.children[e<0?0:this.children.length-1];return 0==t.size||t.emptyChildAt(e)},rr.prototype.domAfterPos=function(e){var t=this.domFromPos(e,0),r=t.node,n=t.offset;if(1!=r.nodeType||n==r.childNodes.length)throw new RangeError("No node after pos "+e);return r.childNodes[n]},rr.prototype.setSelection=function(e,t,r,n){for(var o=Math.min(e,t),i=Math.max(e,t),s=0,a=0;s<this.children.length;s++){var c=this.children[s],l=a+c.size;if(o>a&&i<l)return c.setSelection(e-a-c.border,t-a-c.border,r,n);a=l}var u=this.domFromPos(e,e?-1:1),p=t==e?u:this.domFromPos(t,t?-1:1),h=r.getSelection(),d=!1;if((yt.gecko||yt.safari)&&e==t){var f=u.node,m=u.offset;if(3==f.nodeType)(d=m&&"\n"==f.nodeValue[m-1])&&m==f.nodeValue.length&&f.nextSibling&&"BR"==f.nextSibling.nodeName&&(u=p={node:f.parentNode,offset:St(f)+1});else{var g=f.childNodes[m-1];d=g&&("BR"==g.nodeName||"false"==g.contentEditable)}}if(yt.gecko&&h.focusNode&&h.focusNode!=p.node&&1==h.focusNode.nodeType){var v=h.focusNode.childNodes[h.focusOffset];v&&"false"==v.contentEditable&&(n=!0)}if(n||d&&yt.safari||!Et(u.node,u.offset,h.anchorNode,h.anchorOffset)||!Et(p.node,p.offset,h.focusNode,h.focusOffset)){var y=!1;if((h.extend||e==t)&&!d){h.collapse(u.node,u.offset);try{e!=t&&h.extend(p.node,p.offset),y=!0}catch(e){if(!(e instanceof DOMException))throw e}}if(!y){if(e>t){var b=u;u=p,p=b}var w=document.createRange();w.setEnd(p.node,p.offset),w.setStart(u.node,u.offset),h.removeAllRanges(),h.addRange(w)}}},rr.prototype.ignoreMutation=function(e){return!this.contentDOM&&"selection"!=e.type},nr.contentLost.get=function(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)},rr.prototype.markDirty=function(e,t){for(var r=0,n=0;n<this.children.length;n++){var o=this.children[n],i=r+o.size;if(r==i?e<=i&&t>=r:e<i&&t>r){var s=r+o.border,a=i-o.border;if(e>=s&&t<=a)return this.dirty=e==r||t==i?2:1,void(e!=s||t!=a||!o.contentLost&&o.dom.parentNode==this.contentDOM?o.markDirty(e-s,t-s):o.dirty=3);o.dirty=3}r=i}this.dirty=2},rr.prototype.markParentsDirty=function(){for(var e=1,t=this.parent;t;t=t.parent,e++){var r=1==e?2:1;t.dirty<r&&(t.dirty=r)}},nr.domAtom.get=function(){return!1},Object.defineProperties(rr.prototype,nr);var or=[],ir=function(e){function t(t,r,n,o){var i,s=r.type.toDOM;if("function"==typeof s&&(s=s(n,(function(){return i?i.parent?i.parent.posBeforeChild(i):void 0:o}))),!r.type.spec.raw){if(1!=s.nodeType){var a=document.createElement("span");a.appendChild(s),s=a}s.contentEditable=!1,s.classList.add("ProseMirror-widget")}e.call(this,t,or,s,null),this.widget=r,i=this}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={beforePosition:{configurable:!0},domAtom:{configurable:!0}};return r.beforePosition.get=function(){return this.widget.type.side<0},t.prototype.matchesWidget=function(e){return 0==this.dirty&&e.type.eq(this.widget.type)},t.prototype.parseRule=function(){return{ignore:!0}},t.prototype.stopEvent=function(e){var t=this.widget.spec.stopEvent;return!!t&&t(e)},t.prototype.ignoreMutation=function(e){return"selection"!=e.type||this.widget.spec.ignoreSelection},r.domAtom.get=function(){return!0},Object.defineProperties(t.prototype,r),t}(rr),sr=function(e){function t(t,r,n,o){e.call(this,t,or,r,null),this.textDOM=n,this.text=o}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={size:{configurable:!0}};return r.size.get=function(){return this.text.length},t.prototype.localPosFromDOM=function(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t},t.prototype.domFromPos=function(e){return{node:this.textDOM,offset:e}},t.prototype.ignoreMutation=function(e){return"characterData"===e.type&&e.target.nodeValue==e.oldValue},Object.defineProperties(t.prototype,r),t}(rr),ar=function(e){function t(t,r,n,o){e.call(this,t,[],n,o),this.mark=r}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.create=function(e,r,n,o){var i=o.nodeViews[r.type.name],s=i&&i(r,o,n);return s&&s.dom||(s=ce.renderSpec(document,r.type.spec.toDOM(r,n))),new t(e,r,s.dom,s.contentDOM||s.dom)},t.prototype.parseRule=function(){return{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}},t.prototype.matchesMark=function(e){return 3!=this.dirty&&this.mark.eq(e)},t.prototype.markDirty=function(t,r){if(e.prototype.markDirty.call(this,t,r),0!=this.dirty){for(var n=this.parent;!n.node;)n=n.parent;n.dirty<this.dirty&&(n.dirty=this.dirty),this.dirty=0}},t.prototype.slice=function(e,r,n){var o=t.create(this.parent,this.mark,!0,n),i=this.children,s=this.size;r<s&&(i=Cr(i,r,s,n)),e>0&&(i=Cr(i,0,e,n));for(var a=0;a<i.length;a++)i[a].parent=o;return o.children=i,o},t}(rr),cr=function(e){function t(t,r,n,o,i,s,a,c,l){e.call(this,t,r.isLeaf?or:[],i,s),this.nodeDOM=a,this.node=r,this.outerDeco=n,this.innerDeco=o,s&&this.updateChildren(c,l)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={size:{configurable:!0},border:{configurable:!0},domAtom:{configurable:!0}};return t.create=function(e,r,n,o,i,s){var a,c,l=i.nodeViews[r.type.name],u=l&&l(r,i,(function(){return c?c.parent?c.parent.posBeforeChild(c):void 0:s}),n,o),p=u&&u.dom,h=u&&u.contentDOM;if(r.isText)if(p){if(3!=p.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else p=document.createTextNode(r.text);else p||(p=(a=ce.renderSpec(document,r.type.spec.toDOM(r))).dom,h=a.contentDOM);h||r.isText||"BR"==p.nodeName||(p.hasAttribute("contenteditable")||(p.contentEditable=!1),r.type.spec.draggable&&(p.draggable=!0));var d=p;return p=yr(p,n,r),u?c=new hr(e,r,n,o,p,h,d,u,i,s+1):r.isText?new ur(e,r,n,o,p,d,i):new t(e,r,n,o,p,h,d,i,s+1)},t.prototype.parseRule=function(){var e=this;if(this.node.type.spec.reparseInView)return null;var t={node:this.node.type.name,attrs:this.node.attrs};return this.node.type.spec.code&&(t.preserveWhitespace="full"),this.contentDOM&&!this.contentLost?t.contentElement=this.contentDOM:t.getContent=function(){return e.contentDOM?r.empty:e.node.content},t},t.prototype.matchesNode=function(e,t,r){return 0==this.dirty&&e.eq(this.node)&&br(t,this.outerDeco)&&r.eq(this.innerDeco)},n.size.get=function(){return this.node.nodeSize},n.border.get=function(){return this.node.isLeaf?0:1},t.prototype.updateChildren=function(e,t){var r=this,n=this.node.inlineContent,o=t,i=n&&e.composing&&this.localCompositionNode(e,t),s=new kr(this,i&&i.node);!function(e,t,r,n){var o=t.locals(e),i=0;if(0==o.length){for(var s=0;s<e.childCount;s++){var a=e.child(s);n(a,o,t.forChild(i,a),s),i+=a.nodeSize}return}for(var c=0,l=[],u=null,p=0;;){if(c<o.length&&o[c].to==i){for(var h=o[c++],d=void 0;c<o.length&&o[c].to==i;)(d||(d=[h])).push(o[c++]);if(d){d.sort(xr);for(var f=0;f<d.length;f++)r(d[f],p,!!u)}else r(h,p,!!u)}var m=void 0,g=void 0;if(u)g=-1,m=u,u=null;else{if(!(p<e.childCount))break;g=p,m=e.child(p++)}for(var v=0;v<l.length;v++)l[v].to<=i&&l.splice(v--,1);for(;c<o.length&&o[c].from<=i&&o[c].to>i;)l.push(o[c++]);var y=i+m.nodeSize;if(m.isText){var b=y;c<o.length&&o[c].from<b&&(b=o[c].from);for(var w=0;w<l.length;w++)l[w].to<b&&(b=l[w].to);b<y&&(u=m.cut(b-i),m=m.cut(0,b-i),y=b,g=-1)}var k=l.length?m.isInline&&!m.isLeaf?l.filter((function(e){return!e.inline})):l.slice():or;n(m,k,t.forChild(i,m),g),i=y}}(this.node,this.innerDeco,(function(t,i,c){t.spec.marks?s.syncToMarks(t.spec.marks,n,e):t.type.side>=0&&!c&&s.syncToMarks(i==r.node.childCount?a.none:r.node.child(i).marks,n,e),s.placeWidget(t,e,o)}),(function(t,r,i,a){s.syncToMarks(t.marks,n,e),s.findNodeMatch(t,r,i,a)||s.updateNextNode(t,r,i,e,a)||s.addNode(t,r,i,e,o),o+=t.nodeSize})),s.syncToMarks(or,n,e),this.node.isTextblock&&s.addTextblockHacks(),s.destroyRest(),(s.changed||2==this.dirty)&&(i&&this.protectLocalComposition(e,i),function e(t,r,n){for(var o=t.firstChild,i=!1,s=0;s<r.length;s++){var a=r[s],c=a.dom;if(c.parentNode==t){for(;c!=o;)o=wr(o),i=!0;o=o.nextSibling}else i=!0,t.insertBefore(c,o);if(a instanceof ar){var l=o?o.previousSibling:t.lastChild;e(a.contentDOM,a.children,n),o=l?l.nextSibling:t.firstChild}}for(;o;)o=wr(o),i=!0;i&&n.trackWrites==t&&(n.trackWrites=null)}(this.contentDOM,this.children,e),yt.ios&&function(e){if("UL"==e.nodeName||"OL"==e.nodeName){var t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}(this.dom))},t.prototype.localCompositionNode=function(e,t){var r=e.state.selection,n=r.from,o=r.to;if(!(!(e.state.selection instanceof Qe)||n<t||o>t+this.node.content.size)){var i=e.root.getSelection(),s=function(e,t){for(;;){if(3==e.nodeType)return e;if(1==e.nodeType&&t>0){if(e.childNodes.length>t&&3==e.childNodes[t].nodeType)return e.childNodes[t];e=e.childNodes[t-1],t=Ot(e)}else{if(!(1==e.nodeType&&t<e.childNodes.length))return null;e=e.childNodes[t],t=0}}}(i.focusNode,i.focusOffset);if(s&&this.dom.contains(s.parentNode)){var a=s.nodeValue,c=function(e,t,r,n){for(var o=0,i=0;o<e.childCount&&i<=n;){var s=e.child(o++),a=i;if(i+=s.nodeSize,s.isText){for(var c=s.text;o<e.childCount;){var l=e.child(o++);if(i+=l.nodeSize,!l.isText)break;c+=l.text}if(i>=r){var u=c.lastIndexOf(t,n-a);if(u>=0&&u+t.length+a>=r)return a+u}}}return-1}(this.node.content,a,n-t,o-t);return c<0?null:{node:s,pos:c,text:a}}}},t.prototype.protectLocalComposition=function(e,t){var r=t.node,n=t.pos,o=t.text;if(!this.getDesc(r)){for(var i=r;i.parentNode!=this.contentDOM;i=i.parentNode){for(;i.previousSibling;)i.parentNode.removeChild(i.previousSibling);for(;i.nextSibling;)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=null)}var s=new sr(this,i,r,o);e.compositionNodes.push(s),this.children=Cr(this.children,n,n+o.length,e,s)}},t.prototype.update=function(e,t,r,n){return!(3==this.dirty||!e.sameMarkup(this.node))&&(this.updateInner(e,t,r,n),!0)},t.prototype.updateInner=function(e,t,r,n){this.updateOuterDeco(t),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(n,this.posAtStart),this.dirty=0},t.prototype.updateOuterDeco=function(e){if(!br(e,this.outerDeco)){var t=1!=this.nodeDOM.nodeType,r=this.dom;this.dom=gr(this.dom,this.nodeDOM,mr(this.outerDeco,this.node,t),mr(e,this.node,t)),this.dom!=r&&(r.pmViewDesc=null,this.dom.pmViewDesc=this),this.outerDeco=e}},t.prototype.selectNode=function(){this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!0)},t.prototype.deselectNode=function(){this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||this.dom.removeAttribute("draggable")},n.domAtom.get=function(){return this.node.isAtom},Object.defineProperties(t.prototype,n),t}(rr);function lr(e,t,r,n,o){return yr(n,t,e),new cr(null,e,t,r,n,n,n,o,0)}var ur=function(e){function t(t,r,n,o,i,s,a){e.call(this,t,r,n,o,i,null,s,a)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={domAtom:{configurable:!0}};return t.prototype.parseRule=function(){for(var e=this.nodeDOM.parentNode;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}},t.prototype.update=function(e,t,r,n){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!e.sameMarkup(this.node))&&(this.updateOuterDeco(t),0==this.dirty&&e.text==this.node.text||e.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=e.text,n.trackWrites==this.nodeDOM&&(n.trackWrites=null)),this.node=e,this.dirty=0,!0)},t.prototype.inParent=function(){for(var e=this.parent.contentDOM,t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1},t.prototype.domFromPos=function(e){return{node:this.nodeDOM,offset:e}},t.prototype.localPosFromDOM=function(t,r,n){return t==this.nodeDOM?this.posAtStart+Math.min(r,this.node.text.length):e.prototype.localPosFromDOM.call(this,t,r,n)},t.prototype.ignoreMutation=function(e){return"characterData"!=e.type&&"selection"!=e.type},t.prototype.slice=function(e,r,n){var o=this.node.cut(e,r),i=document.createTextNode(o.text);return new t(this.parent,o,this.outerDeco,this.innerDeco,i,i,n)},r.domAtom.get=function(){return!1},Object.defineProperties(t.prototype,r),t}(cr),pr=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={domAtom:{configurable:!0}};return t.prototype.parseRule=function(){return{ignore:!0}},t.prototype.matchesHack=function(){return 0==this.dirty},r.domAtom.get=function(){return!0},Object.defineProperties(t.prototype,r),t}(rr),hr=function(e){function t(t,r,n,o,i,s,a,c,l,u){e.call(this,t,r,n,o,i,s,a,l,u),this.spec=c}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.update=function(t,r,n,o){if(3==this.dirty)return!1;if(this.spec.update){var i=this.spec.update(t,r,n);return i&&this.updateInner(t,r,n,o),i}return!(!this.contentDOM&&!t.isLeaf)&&e.prototype.update.call(this,t,r,n,o)},t.prototype.selectNode=function(){this.spec.selectNode?this.spec.selectNode():e.prototype.selectNode.call(this)},t.prototype.deselectNode=function(){this.spec.deselectNode?this.spec.deselectNode():e.prototype.deselectNode.call(this)},t.prototype.setSelection=function(t,r,n,o){this.spec.setSelection?this.spec.setSelection(t,r,n):e.prototype.setSelection.call(this,t,r,n,o)},t.prototype.destroy=function(){this.spec.destroy&&this.spec.destroy(),e.prototype.destroy.call(this)},t.prototype.stopEvent=function(e){return!!this.spec.stopEvent&&this.spec.stopEvent(e)},t.prototype.ignoreMutation=function(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):e.prototype.ignoreMutation.call(this,t)},t}(cr);function dr(e){e&&(this.nodeName=e)}dr.prototype=Object.create(null);var fr=[new dr];function mr(e,t,r){if(0==e.length)return fr;for(var n=r?fr[0]:new dr,o=[n],i=0;i<e.length;i++){var s=e[i].type.attrs;if(s)for(var a in s.nodeName&&o.push(n=new dr(s.nodeName)),s){var c=s[a];null!=c&&(r&&1==o.length&&o.push(n=new dr(t.isInline?"span":"div")),"class"==a?n.class=(n.class?n.class+" ":"")+c:"style"==a?n.style=(n.style?n.style+";":"")+c:"nodeName"!=a&&(n[a]=c))}}return o}function gr(e,t,r,n){if(r==fr&&n==fr)return t;for(var o=t,i=0;i<n.length;i++){var s=n[i],a=r[i];if(i){var c=void 0;a&&a.nodeName==s.nodeName&&o!=e&&(c=o.parentNode)&&c.tagName.toLowerCase()==s.nodeName||((c=document.createElement(s.nodeName)).pmIsDeco=!0,c.appendChild(o),a=fr[0]),o=c}vr(o,a||fr[0],s)}return o}function vr(e,t,r){for(var n in t)"class"==n||"style"==n||"nodeName"==n||n in r||e.removeAttribute(n);for(var o in r)"class"!=o&&"style"!=o&&"nodeName"!=o&&r[o]!=t[o]&&e.setAttribute(o,r[o]);if(t.class!=r.class){for(var i=t.class?t.class.split(" ").filter(Boolean):or,s=r.class?r.class.split(" ").filter(Boolean):or,a=0;a<i.length;a++)-1==s.indexOf(i[a])&&e.classList.remove(i[a]);for(var c=0;c<s.length;c++)-1==i.indexOf(s[c])&&e.classList.add(s[c])}if(t.style!=r.style){if(t.style)for(var l,u=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;l=u.exec(t.style);)e.style.removeProperty(l[1]);r.style&&(e.style.cssText+=r.style)}}function yr(e,t,r){return gr(e,e,fr,mr(t,r,1!=e.nodeType))}function br(e,t){if(e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(!e[r].type.eq(t[r].type))return!1;return!0}function wr(e){var t=e.nextSibling;return e.parentNode.removeChild(e),t}var kr=function(e,t){this.top=e,this.lock=t,this.index=0,this.stack=[],this.changed=!1,this.preMatch=function(e,t){for(var r=e.childCount,n=t.length,o=new Map;r>0&&n>0;n--){var i=t[n-1],s=i.node;if(s){if(s!=e.child(r-1))break;--r,o.set(i,r)}}return{index:r,matched:o}}(e.node.content,e.children)};function xr(e,t){return e.type.side-t.type.side}function Cr(e,t,r,n,o){for(var i=[],s=0,a=0;s<e.length;s++){var c=e[s],l=a,u=a+=c.size;l>=r||u<=t?i.push(c):(l<t&&i.push(c.slice(0,t-l,n)),o&&(i.push(o),o=null),u>r&&i.push(c.slice(r-l,c.size,n)))}return i}function Sr(e,t){var r=e.root.getSelection(),n=e.state.doc;if(!r.focusNode)return null;var o=e.docView.nearestDesc(r.focusNode),i=o&&0==o.size,s=e.docView.posFromDOM(r.focusNode,r.focusOffset);if(s<0)return null;var a,c,l=n.resolve(s);if(qt(r)){for(a=l;o&&!o.node;)o=o.parent;if(o&&o.node.isAtom&&et.isSelectable(o.node)&&o.parent&&(!o.node.isInline||!function(e,t,r){for(var n=0==t,o=t==Ot(e);n||o;){if(e==r)return!0;var i=St(e);if(!(e=e.parentNode))return!1;n=n&&0==i,o=o&&i==Ot(e)}}(r.focusNode,r.focusOffset,o.dom))){var u=o.posBefore;c=new et(s==u?l:n.resolve(u))}}else{var p=e.docView.posFromDOM(r.anchorNode,r.anchorOffset);if(p<0)return null;a=n.resolve(p)}c||(c=qr(e,a,l,"pointer"==t||e.state.selection.head<l.pos&&!i?1:-1));return c}function _r(e){return e.editable?e.hasFocus():Rr(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function Dr(e,t){var r=e.state.selection;if(Or(e,r),_r(e)){if(e.domObserver.disconnectSelection(),e.cursorWrapper)!function(e){var t=e.root.getSelection(),r=document.createRange(),n=e.cursorWrapper.dom,o="IMG"==n.nodeName;o?r.setEnd(n.parentNode,St(n)+1):r.setEnd(n,0);r.collapse(!1),t.removeAllRanges(),t.addRange(r),!o&&!e.state.selection.visible&&yt.ie&&yt.ie_version<=11&&(n.disabled=!0,n.disabled=!1)}(e);else{var n,o,i=r.anchor,s=r.head;!Ar||r instanceof Qe||(r.$from.parent.inlineContent||(n=Er(e,r.from)),r.empty||r.$from.parent.inlineContent||(o=Er(e,r.to))),e.docView.setSelection(i,s,e.root,t),Ar&&(n&&Tr(n),o&&Tr(o)),r.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function(e){var t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.hideSelectionGuard);var r=e.root.getSelection(),n=r.anchorNode,o=r.anchorOffset;t.addEventListener("selectionchange",e.hideSelectionGuard=function(){r.anchorNode==n&&r.anchorOffset==o||(t.removeEventListener("selectionchange",e.hideSelectionGuard),setTimeout((function(){_r(e)&&!e.state.selection.visible||e.dom.classList.remove("ProseMirror-hideselection")}),20))})}(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}kr.prototype.destroyBetween=function(e,t){if(e!=t){for(var r=e;r<t;r++)this.top.children[r].destroy();this.top.children.splice(e,t-e),this.changed=!0}},kr.prototype.destroyRest=function(){this.destroyBetween(this.index,this.top.children.length)},kr.prototype.syncToMarks=function(e,t,r){for(var n=0,o=this.stack.length>>1,i=Math.min(o,e.length);n<i&&(n==o-1?this.top:this.stack[n+1<<1]).matchesMark(e[n])&&!1!==e[n].type.spec.spanning;)n++;for(;n<o;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<e.length;){this.stack.push(this.top,this.index+1);for(var s=-1,a=this.index;a<Math.min(this.index+3,this.top.children.length);a++)if(this.top.children[a].matchesMark(e[o])){s=a;break}if(s>-1)s>this.index&&(this.changed=!0,this.destroyBetween(this.index,s)),this.top=this.top.children[this.index];else{var c=ar.create(this.top,e[o],t,r);this.top.children.splice(this.index,0,c),this.top=c,this.changed=!0}this.index=0,o++}},kr.prototype.findNodeMatch=function(e,t,r,n){var o=this.top.children,i=-1;if(n>=this.preMatch.index){for(var s=this.index;s<o.length;s++)if(o[s].matchesNode(e,t,r)){i=s;break}}else for(var a=this.index,c=Math.min(o.length,a+1);a<c;a++){var l=o[a];if(l.matchesNode(e,t,r)&&!this.preMatch.matched.has(l)){i=a;break}}return!(i<0)&&(this.destroyBetween(this.index,i),this.index++,!0)},kr.prototype.updateNextNode=function(e,t,r,n,o){for(var i=this.index;i<this.top.children.length;i++){var s=this.top.children[i];if(s instanceof cr){var a=this.preMatch.matched.get(s);if(null!=a&&a!=o)return!1;var c=s.dom;if(!(this.lock&&(c==this.lock||1==c.nodeType&&c.contains(this.lock.parentNode))&&!(e.isText&&s.node&&s.node.isText&&s.nodeDOM.nodeValue==e.text&&3!=s.dirty&&br(t,s.outerDeco)))&&s.update(e,t,r,n))return this.destroyBetween(this.index,i),s.dom!=c&&(this.changed=!0),this.index++,!0;break}}return!1},kr.prototype.addNode=function(e,t,r,n,o){this.top.children.splice(this.index++,0,cr.create(this.top,e,t,r,n,o)),this.changed=!0},kr.prototype.placeWidget=function(e,t,r){var n=this.index<this.top.children.length?this.top.children[this.index]:null;if(!n||!n.matchesWidget(e)||e!=n.widget&&n.widget.type.toDOM.parentNode){var o=new ir(this.top,e,t,r);this.top.children.splice(this.index++,0,o),this.changed=!0}else this.index++},kr.prototype.addTextblockHacks=function(){for(var e=this.top.children[this.index-1];e instanceof ar;)e=e.children[e.children.length-1];if(!e||!(e instanceof ur)||/\n$/.test(e.node.text))if(this.index<this.top.children.length&&this.top.children[this.index].matchesHack())this.index++;else{var t=document.createElement("br");this.top.children.splice(this.index++,0,new pr(this.top,or,t,null)),this.changed=!0}};var Ar=yt.safari||yt.chrome&&yt.chrome_version<63;function Er(e,t){var r=e.docView.domFromPos(t,0),n=r.node,o=r.offset,i=o<n.childNodes.length?n.childNodes[o]:null,s=o?n.childNodes[o-1]:null;if(yt.safari&&i&&"false"==i.contentEditable)return Mr(i);if(!(i&&"false"!=i.contentEditable||s&&"false"!=s.contentEditable)){if(i)return Mr(i);if(s)return Mr(s)}}function Mr(e){return e.contentEditable="true",yt.safari&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function Tr(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function Or(e,t){if(t instanceof et){var r=e.docView.descAt(t.from);r!=e.lastSelectedViewDesc&&(Nr(e),r&&r.selectNode(),e.lastSelectedViewDesc=r)}else Nr(e)}function Nr(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=null)}function qr(e,t,r,n){return e.someProp("createSelectionBetween",(function(n){return n(e,t,r)}))||Qe.between(t,r,n)}function Rr(e){var t=e.root.getSelection();if(!t.anchorNode)return!1;try{return e.dom.contains(3==t.anchorNode.nodeType?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(3==t.focusNode.nodeType?t.focusNode.parentNode:t.focusNode))}catch(e){return!1}}function Ir(e,t){var r=e.selection,n=r.$anchor,o=r.$head,i=t>0?n.max(o):n.min(o),s=i.parent.inlineContent?i.depth?e.doc.resolve(t>0?i.after():i.before()):null:i;return s&&Ke.findFrom(s,t)}function Lr(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function zr(e,t,r){var n=e.state.selection;if(!(n instanceof Qe)){if(n instanceof et&&n.node.isInline)return Lr(e,new Qe(t>0?n.$to:n.$from));var o=Ir(e.state,t);return!!o&&Lr(e,o)}if(!n.empty||r.indexOf("s")>-1)return!1;if(e.endOfTextblock(t>0?"right":"left")){var i=Ir(e.state,t);return!!(i&&i instanceof et)&&Lr(e,i)}if(!(yt.mac&&r.indexOf("m")>-1)){var s,a=n.$head,c=a.textOffset?null:t<0?a.nodeBefore:a.nodeAfter;if(!c||c.isText)return!1;var l=t<0?a.pos-c.nodeSize:a.pos;return!!(c.isAtom||(s=e.docView.descAt(l))&&!s.contentDOM)&&(et.isSelectable(c)?Lr(e,new et(t<0?e.state.doc.resolve(a.pos-c.nodeSize):a)):!!yt.webkit&&Lr(e,new Qe(e.state.doc.resolve(t<0?l:l+c.nodeSize))))}}function Fr(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function Br(e){var t=e.pmViewDesc;return t&&0==t.size&&(e.nextSibling||"BR"!=e.nodeName)}function Pr(e){var t=e.root.getSelection(),r=t.focusNode,n=t.focusOffset;if(r){var o,i,s=!1;for(yt.gecko&&1==r.nodeType&&n<Fr(r)&&Br(r.childNodes[n])&&(s=!0);;)if(n>0){if(1!=r.nodeType)break;var a=r.childNodes[n-1];if(Br(a))o=r,i=--n;else{if(3!=a.nodeType)break;n=(r=a).nodeValue.length}}else{if($r(r))break;for(var c=r.previousSibling;c&&Br(c);)o=r.parentNode,i=St(c),c=c.previousSibling;if(c)n=Fr(r=c);else{if((r=r.parentNode)==e.dom)break;n=0}}s?jr(e,t,r,n):o&&jr(e,t,o,i)}}function Vr(e){var t=e.root.getSelection(),r=t.focusNode,n=t.focusOffset;if(r){for(var o,i,s=Fr(r);;)if(n<s){if(1!=r.nodeType)break;if(!Br(r.childNodes[n]))break;o=r,i=++n}else{if($r(r))break;for(var a=r.nextSibling;a&&Br(a);)o=a.parentNode,i=St(a)+1,a=a.nextSibling;if(a)n=0,s=Fr(r=a);else{if((r=r.parentNode)==e.dom)break;n=s=0}}o&&jr(e,t,o,i)}}function $r(e){var t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function jr(e,t,r,n){if(qt(t)){var o=document.createRange();o.setEnd(r,n),o.setStart(r,n),t.removeAllRanges(),t.addRange(o)}else t.extend&&t.extend(r,n);e.domObserver.setCurSelection();var i=e.state;setTimeout((function(){e.state==i&&Dr(e)}),50)}function Hr(e,t,r){var n=e.state.selection;if(n instanceof Qe&&!n.empty||r.indexOf("s")>-1)return!1;if(yt.mac&&r.indexOf("m")>-1)return!1;var o=n.$from,i=n.$to;if(!o.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){var s=Ir(e.state,t);if(s&&s instanceof et)return Lr(e,s)}if(!o.parent.inlineContent){var a=t<0?o:i,c=n instanceof rt?Ke.near(a,t):Ke.findFrom(a,t);return!!c&&Lr(e,c)}return!1}function Ur(e,t){if(!(e.state.selection instanceof Qe))return!0;var r=e.state.selection,n=r.$head,o=r.$anchor,i=r.empty;if(!n.sameParent(o))return!0;if(!i)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;var s=!n.textOffset&&(t<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){var a=e.state.tr;return t<0?a.delete(n.pos-s.nodeSize,n.pos):a.delete(n.pos,n.pos+s.nodeSize),e.dispatch(a),!0}return!1}function Jr(e,t,r){e.domObserver.stop(),t.contentEditable=r,e.domObserver.start()}function Gr(e,t){var r=t.keyCode,n=function(e){var t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}(t);return 8==r||yt.mac&&72==r&&"c"==n?Ur(e,-1)||Pr(e):46==r||yt.mac&&68==r&&"c"==n?Ur(e,1)||Vr(e):13==r||27==r||(37==r?zr(e,-1,n)||Pr(e):39==r?zr(e,1,n)||Vr(e):38==r?Hr(e,-1,n)||Pr(e):40==r?function(e){if(yt.safari&&!(e.state.selection.$head.parentOffset>0)){var t=e.root.getSelection(),r=t.focusNode,n=t.focusOffset;if(r&&1==r.nodeType&&0==n&&r.firstChild&&"false"==r.firstChild.contentEditable){var o=r.firstChild;Jr(e,o,!0),setTimeout((function(){return Jr(e,o,!1)}),20)}}}(e)||Hr(e,1,n)||Vr(e):n==(yt.mac?"m":"c")&&(66==r||73==r||89==r||90==r))}function Wr(e){var t=e.pmViewDesc;if(t)return t.parseRule();if("BR"==e.nodeName&&e.parentNode){if(yt.safari&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){var r=document.createElement("div");return r.appendChild(document.createElement("li")),{skip:r}}if(e.parentNode.lastChild==e||yt.safari&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if("IMG"==e.nodeName&&e.getAttribute("mark-placeholder"))return{ignore:!0}}function Kr(e,t,n,o,i){if(t<0){var s=e.lastSelectionTime>Date.now()-50?e.lastSelectionOrigin:null,a=Sr(e,s);if(a&&!e.state.selection.eq(a)){var c=e.state.tr.setSelection(a);"pointer"==s?c.setMeta("pointer",!0):"key"==s&&c.scrollIntoView(),e.dispatch(c)}}else{var l=e.state.doc.resolve(t),u=l.sharedDepth(n);t=l.before(u+1),n=e.state.doc.resolve(n).after(u+1);var p=e.state.selection,h=function(e,t,r){var n=e.docView.parseRange(t,r),o=n.node,i=n.fromOffset,s=n.toOffset,a=n.from,c=n.to,l=e.root.getSelection(),u=null,p=l.anchorNode;if(p&&e.dom.contains(1==p.nodeType?p:p.parentNode)&&(u=[{node:p,offset:l.anchorOffset}],qt(l)||u.push({node:l.focusNode,offset:l.focusOffset})),yt.chrome&&8===e.lastKeyCode)for(var h=s;h>i;h--){var d=o.childNodes[h-1],f=d.pmViewDesc;if("BR"==d.nodeName&&!f){s=h;break}if(!f||f.size)break}var m=e.state.doc,g=e.someProp("domParser")||Y.fromSchema(e.state.schema),v=m.resolve(a),y=null,b=g.parse(o,{topNode:v.parent,topMatch:v.parent.contentMatchAt(v.index()),topOpen:!0,from:i,to:s,preserveWhitespace:!v.parent.type.spec.code||"full",editableContent:!0,findPositions:u,ruleFromNode:Wr,context:v});if(u&&null!=u[0].pos){var w=u[0].pos,k=u[1]&&u[1].pos;null==k&&(k=w),y={anchor:w+a,head:k+a}}return{doc:b,sel:y,from:a,to:c}}(e,t,n);if(yt.chrome&&e.cursorWrapper&&h.sel&&h.sel.anchor==e.cursorWrapper.deco.from){var d=e.cursorWrapper.deco.type.toDOM.nextSibling,f=d&&d.nodeValue?d.nodeValue.length:1;h.sel={anchor:h.sel.anchor+f,head:h.sel.anchor+f}}var m,g,v=e.state.doc,y=v.slice(h.from,h.to);8===e.lastKeyCode&&Date.now()-100<e.lastKeyCodeTime?(m=e.state.selection.to,g="end"):(m=e.state.selection.from,g="start"),e.lastKeyCode=null;var b=function(e,t,r,n,o){var i=e.findDiffStart(t,r);if(null==i)return null;var s=e.findDiffEnd(t,r+e.size,r+t.size),a=s.a,c=s.b;if("end"==o){var l=Math.max(0,i-Math.min(a,c));n-=a+l-i}if(a<i&&e.size<t.size){c=(i-=n<=i&&n>=a?i-n:0)+(c-a),a=i}else if(c<i){a=(i-=n<=i&&n>=c?i-n:0)+(a-c),c=i}return{start:i,endA:a,endB:c}}(y.content,h.doc.content,h.from,m,g);if(!b){if(!(o&&p instanceof Qe&&!p.empty&&p.$head.sameParent(p.$anchor))||e.composing||h.sel&&h.sel.anchor!=h.sel.head){if((yt.ios&&e.lastIOSEnter>Date.now()-225||yt.android)&&i.some((function(e){return"DIV"==e.nodeName||"P"==e.nodeName}))&&e.someProp("handleKeyDown",(function(t){return t(e,Rt(13,"Enter"))})))return void(e.lastIOSEnter=0);if(h.sel){var w=Zr(e,e.state.doc,h.sel);w&&!w.eq(e.state.selection)&&e.dispatch(e.state.tr.setSelection(w))}return}b={start:p.from,endA:p.to,endB:p.to}}e.domChangeCount++,e.state.selection.from<e.state.selection.to&&b.start==b.endB&&e.state.selection instanceof Qe&&(b.start>e.state.selection.from&&b.start<=e.state.selection.from+2?b.start=e.state.selection.from:b.endA<e.state.selection.to&&b.endA>=e.state.selection.to-2&&(b.endB+=e.state.selection.to-b.endA,b.endA=e.state.selection.to)),yt.ie&&yt.ie_version<=11&&b.endB==b.start+1&&b.endA==b.start&&b.start>h.from&&"  "==h.doc.textBetween(b.start-h.from-1,b.start-h.from+1)&&(b.start--,b.endA--,b.endB--);var k,x=h.doc.resolveNoCache(b.start-h.from),C=h.doc.resolveNoCache(b.endB-h.from),S=x.sameParent(C)&&x.parent.inlineContent;if((yt.ios&&e.lastIOSEnter>Date.now()-225&&(!S||i.some((function(e){return"DIV"==e.nodeName||"P"==e.nodeName})))||!S&&x.pos<h.doc.content.size&&(k=Ke.findFrom(h.doc.resolve(x.pos+1),1,!0))&&k.head==C.pos)&&e.someProp("handleKeyDown",(function(t){return t(e,Rt(13,"Enter"))})))e.lastIOSEnter=0;else if(e.state.selection.anchor>b.start&&function(e,t,r,n,o){if(!n.parent.isTextblock||r-t<=o.pos-n.pos||Yr(n,!0,!1)<o.pos)return!1;var i=e.resolve(t);if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;var s=e.resolve(Yr(i,!0,!0));if(!s.parent.isTextblock||s.pos>r||Yr(s,!0,!1)<r)return!1;return n.parent.content.cut(n.parentOffset).eq(s.parent.content)}(v,b.start,b.endA,x,C)&&e.someProp("handleKeyDown",(function(t){return t(e,Rt(8,"Backspace"))})))yt.android&&yt.chrome&&e.domObserver.suppressSelectionUpdates();else{yt.chrome&&yt.android&&b.toB==b.from&&(e.lastAndroidDelete=Date.now()),yt.android&&!S&&x.start()!=C.start()&&0==C.parentOffset&&x.depth==C.depth&&h.sel&&h.sel.anchor==h.sel.head&&h.sel.head==b.endA&&(b.endB-=2,C=h.doc.resolveNoCache(b.endB-h.from),setTimeout((function(){e.someProp("handleKeyDown",(function(t){return t(e,Rt(13,"Enter"))}))}),20));var _,D,A,E,M=b.start,T=b.endA;if(S)if(x.pos==C.pos)yt.ie&&yt.ie_version<=11&&0==x.parentOffset&&(e.domObserver.suppressSelectionUpdates(),setTimeout((function(){return Dr(e)}),20)),_=e.state.tr.delete(M,T),D=v.resolve(b.start).marksAcross(v.resolve(b.endA));else if(b.endA==b.endB&&(E=v.resolve(b.start))&&(A=function(e,t){for(var n,o,i,s=e.firstChild.marks,a=t.firstChild.marks,c=s,l=a,u=0;u<a.length;u++)c=a[u].removeFromSet(c);for(var p=0;p<s.length;p++)l=s[p].removeFromSet(l);if(1==c.length&&0==l.length)o=c[0],n="add",i=function(e){return e.mark(o.addToSet(e.marks))};else{if(0!=c.length||1!=l.length)return null;o=l[0],n="remove",i=function(e){return e.mark(o.removeFromSet(e.marks))}}for(var h=[],d=0;d<t.childCount;d++)h.push(i(t.child(d)));if(r.from(h).eq(e))return{mark:o,type:n}}(x.parent.content.cut(x.parentOffset,C.parentOffset),E.parent.content.cut(E.parentOffset,b.endA-E.start()))))_=e.state.tr,"add"==A.type?_.addMark(M,T,A.mark):_.removeMark(M,T,A.mark);else if(x.parent.child(x.index()).isText&&x.index()==C.index()-(C.textOffset?0:1)){var O=x.parent.textBetween(x.parentOffset,C.parentOffset);if(e.someProp("handleTextInput",(function(t){return t(e,M,T,O)})))return;_=e.state.tr.insertText(O,M,T)}if(_||(_=e.state.tr.replace(M,T,h.doc.slice(b.start-h.from,b.endB-h.from))),h.sel){var N=Zr(e,_.doc,h.sel);N&&!(yt.chrome&&yt.android&&e.composing&&N.empty&&(b.from!=b.toB||e.lastAndroidDelete<Date.now()-100)&&(N.head==M||N.head==_.mapping.map(T)-1)||yt.ie&&N.empty&&N.head==M)&&_.setSelection(N)}D&&_.ensureMarks(D),e.dispatch(_.scrollIntoView())}}}function Zr(e,t,r){return Math.max(r.anchor,r.head)>t.content.size?null:qr(e,t.resolve(r.anchor),t.resolve(r.head))}function Yr(e,t,r){for(var n=e.depth,o=t?e.end():e.pos;n>0&&(t||e.indexAfter(n)==e.node(n).childCount);)n--,o++,t=!1;if(r)for(var i=e.node(n).maybeChild(e.indexAfter(n));i&&!i.isLeaf;)i=i.firstChild,o++;return o}function Qr(e,t){for(var r=[],n=t.content,o=t.openStart,i=t.openEnd;o>1&&i>1&&1==n.childCount&&1==n.firstChild.childCount;){o--,i--;var s=n.firstChild;r.push(s.type.name,s.attrs!=s.type.defaultAttrs?s.attrs:null),n=s.content}var a=e.someProp("clipboardSerializer")||ce.fromSchema(e.state.schema),c=on(),l=c.createElement("div");l.appendChild(a.serializeFragment(n,{document:c}));for(var u,p=l.firstChild;p&&1==p.nodeType&&(u=rn[p.nodeName.toLowerCase()]);){for(var h=u.length-1;h>=0;h--){for(var d=c.createElement(u[h]);l.firstChild;)d.appendChild(l.firstChild);l.appendChild(d)}p=l.firstChild}return p&&1==p.nodeType&&p.setAttribute("data-pm-slice",o+" "+i+" "+JSON.stringify(r)),{dom:l,text:e.someProp("clipboardTextSerializer",(function(e){return e(t)}))||t.content.textBetween(0,t.content.size,"\n\n")}}function Xr(e,t,n,o,i){var s,a,c=i.parent.type.spec.code;if(!n&&!t)return null;var u=t&&(o||c||!n);if(u){if(e.someProp("transformPastedText",(function(e){t=e(t,c||o)})),c)return new l(r.from(e.state.schema.text(t.replace(/\r\n?/g,"\n"))),0,0);var p=e.someProp("clipboardTextParser",(function(e){return e(t,i,o)}));p?a=p:(s=document.createElement("div"),t.trim().split(/(?:\r\n?|\n)+/).forEach((function(e){s.appendChild(document.createElement("p")).textContent=e})))}else e.someProp("transformPastedHTML",(function(e){n=e(n)})),s=function(e){var t=/^(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));var r,n=on().createElement("div"),o=/<([a-z][^>\s]+)/i.exec(e);(r=o&&rn[o[1].toLowerCase()])&&(e=r.map((function(e){return"<"+e+">"})).join("")+e+r.map((function(e){return"</"+e+">"})).reverse().join(""));if(n.innerHTML=e,r)for(var i=0;i<r.length;i++)n=n.querySelector(r[i])||n;return n}(n);var h=s&&s.querySelector("[data-pm-slice]"),d=h&&/^(\d+) (\d+) (.*)/.exec(h.getAttribute("data-pm-slice"));if(!a){var f=e.someProp("clipboardParser")||e.someProp("domParser")||Y.fromSchema(e.state.schema);a=f.parseSlice(s,{preserveWhitespace:!(!u&&!d),context:i})}return a=d?function(e,t){if(!e.size)return e;var n,o=e.content.firstChild.type.schema;try{n=JSON.parse(t)}catch(t){return e}for(var i=e.content,s=e.openStart,a=e.openEnd,c=n.length-2;c>=0;c-=2){var u=o.nodes[n[c]];if(!u||u.hasRequiredAttrs())break;i=r.from(u.create(n[c+1],i)),s++,a++}return new l(i,s,a)}(function(e,t,r){t<e.openStart&&(e=new l(tn(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd));r<e.openEnd&&(e=new l(tn(e.content,1,r,e.openEnd,0,0),e.openStart,r));return e}(a,+d[1],+d[2]),d[3]):l.maxOpen(function(e,t){if(e.childCount<2)return e;for(var n=function(n){var o=t.node(n).contentMatchAt(t.index(n)),i=void 0,s=[];if(e.forEach((function(e){if(s){var t,n=o.findWrapping(e.type);if(!n)return s=null;if(t=s.length&&i.length&&function e(t,n,o,i,s){if(s<t.length&&s<n.length&&t[s]==n[s]){var a=e(t,n,o,i.lastChild,s+1);if(a)return i.copy(i.content.replaceChild(i.childCount-1,a));if(i.contentMatchAt(i.childCount).matchType(s==t.length-1?o.type:t[s+1]))return i.copy(i.content.append(r.from(en(o,t,s+1))))}}(n,i,e,s[s.length-1],0))s[s.length-1]=t;else{s.length&&(s[s.length-1]=function e(t,n){if(0==n)return t;var o=t.content.replaceChild(t.childCount-1,e(t.lastChild,n-1)),i=t.contentMatchAt(t.childCount).fillBefore(r.empty,!0);return t.copy(o.append(i))}(s[s.length-1],i.length));var a=en(e,n);s.push(a),o=o.matchType(a.type,a.attrs),i=n}}})),s)return{v:r.from(s)}},o=t.depth;o>=0;o--){var i=n(o);if(i)return i.v}return e}(a.content,i),!1),e.someProp("transformPasted",(function(e){a=e(a)})),a}function en(e,t,n){void 0===n&&(n=0);for(var o=t.length-1;o>=n;o--)e=t[o].create(null,r.from(e));return e}function tn(e,t,n,o,i,s){var a=t<0?e.firstChild:e.lastChild,c=a.content;return i<o-1&&(c=tn(c,t,n,o,i+1,s)),i>=n&&(c=t<0?a.contentMatchAt(0).fillBefore(c,e.childCount>1||s<=i).append(c):c.append(a.contentMatchAt(a.childCount).fillBefore(r.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,a.copy(c))}var rn={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},nn=null;function on(){return nn||(nn=document.implementation.createHTMLDocument("title"))}var sn={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},an=yt.ie&&yt.ie_version<=11,cn=function(){this.anchorNode=this.anchorOffset=this.focusNode=this.focusOffset=null};cn.prototype.set=function(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset},cn.prototype.eq=function(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset};var ln=function(e,t){var r=this;this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=window.MutationObserver&&new window.MutationObserver((function(e){for(var t=0;t<e.length;t++)r.queue.push(e[t]);yt.ie&&yt.ie_version<=11&&e.some((function(e){return"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length}))?r.flushSoon():r.flush()})),this.currentSelection=new cn,an&&(this.onCharData=function(e){r.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),r.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.suppressingSelectionUpdates=!1};ln.prototype.flushSoon=function(){var e=this;this.flushingSoon<0&&(this.flushingSoon=window.setTimeout((function(){e.flushingSoon=-1,e.flush()}),20))},ln.prototype.forceFlush=function(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())},ln.prototype.start=function(){this.observer&&this.observer.observe(this.view.dom,sn),an&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()},ln.prototype.stop=function(){var e=this;if(this.observer){var t=this.observer.takeRecords();if(t.length){for(var r=0;r<t.length;r++)this.queue.push(t[r]);window.setTimeout((function(){return e.flush()}),20)}this.observer.disconnect()}an&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()},ln.prototype.connectSelection=function(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)},ln.prototype.disconnectSelection=function(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)},ln.prototype.suppressSelectionUpdates=function(){var e=this;this.suppressingSelectionUpdates=!0,setTimeout((function(){return e.suppressingSelectionUpdates=!1}),50)},ln.prototype.onSelectionChange=function(){if(function(e){return(!e.editable||e.root.activeElement==e.dom)&&Rr(e)}(this.view)){if(this.suppressingSelectionUpdates)return Dr(this.view);if(yt.ie&&yt.ie_version<=11&&!this.view.state.selection.empty){var e=this.view.root.getSelection();if(e.focusNode&&Et(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}},ln.prototype.setCurSelection=function(){this.currentSelection.set(this.view.root.getSelection())},ln.prototype.ignoreSelectionChange=function(e){if(0==e.rangeCount)return!0;var t=e.getRangeAt(0).commonAncestorContainer,r=this.view.docView.nearestDesc(t);return r&&r.ignoreMutation({type:"selection",target:3==t.nodeType?t.parentNode:t})?(this.setCurSelection(),!0):void 0},ln.prototype.flush=function(){if(this.view.docView&&!(this.flushingSoon>-1)){var e=this.observer?this.observer.takeRecords():[];this.queue.length&&(e=this.queue.concat(e),this.queue.length=0);var t=this.view.root.getSelection(),r=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(t)&&Rr(this.view)&&!this.ignoreSelectionChange(t),n=-1,o=-1,i=!1,s=[];if(this.view.editable)for(var a=0;a<e.length;a++){var c=this.registerMutation(e[a],s);c&&(n=n<0?c.from:Math.min(c.from,n),o=o<0?c.to:Math.max(c.to,o),c.typeOver&&(i=!0))}if(yt.gecko&&s.length>1){var l=s.filter((function(e){return"BR"==e.nodeName}));if(2==l.length){var u=l[0],p=l[1];u.parentNode&&u.parentNode.parentNode==p.parentNode?p.remove():u.remove()}}(n>-1||r)&&(n>-1&&(this.view.docView.markDirty(n,o),function(e){if(un)return;un=!0,"normal"==getComputedStyle(e.dom).whiteSpace&&console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package.")}(this.view)),this.handleDOMChange(n,o,i,s),this.view.docView.dirty?this.view.updateState(this.view.state):this.currentSelection.eq(t)||Dr(this.view),this.currentSelection.set(t))}},ln.prototype.registerMutation=function(e,t){if(t.indexOf(e.target)>-1)return null;var r=this.view.docView.nearestDesc(e.target);if("attributes"==e.type&&(r==this.view.docView||"contenteditable"==e.attributeName||"style"==e.attributeName&&!e.oldValue&&!e.target.getAttribute("style")))return null;if(!r||r.ignoreMutation(e))return null;if("childList"==e.type){for(var n=0;n<e.addedNodes.length;n++)t.push(e.addedNodes[n]);if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};var o=e.previousSibling,i=e.nextSibling;if(yt.ie&&yt.ie_version<=11&&e.addedNodes.length)for(var s=0;s<e.addedNodes.length;s++){var a=e.addedNodes[s],c=a.previousSibling,l=a.nextSibling;(!c||Array.prototype.indexOf.call(e.addedNodes,c)<0)&&(o=c),(!l||Array.prototype.indexOf.call(e.addedNodes,l)<0)&&(i=l)}var u=o&&o.parentNode==e.target?St(o)+1:0,p=r.localPosFromDOM(e.target,u,-1),h=i&&i.parentNode==e.target?St(i):e.target.childNodes.length;return{from:p,to:r.localPosFromDOM(e.target,h,1)}}return"attributes"==e.type?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}};var un=!1;var pn={},hn={};function dn(e,t){e.lastSelectionOrigin=t,e.lastSelectionTime=Date.now()}function fn(e){e.someProp("handleDOMEvents",(function(t){for(var r in t)e.eventHandlers[r]||e.dom.addEventListener(r,e.eventHandlers[r]=function(t){return mn(e,t)})}))}function mn(e,t){return e.someProp("handleDOMEvents",(function(r){var n=r[t.type];return!!n&&(n(e,t)||t.defaultPrevented)}))}function gn(e){return{left:e.clientX,top:e.clientY}}function vn(e,t,r,n,o){if(-1==n)return!1;for(var i=e.state.doc.resolve(n),s=function(n){if(e.someProp(t,(function(t){return n>i.depth?t(e,r,i.nodeAfter,i.before(n),o,!0):t(e,r,i.node(n),i.before(n),o,!1)})))return{v:!0}},a=i.depth+1;a>0;a--){var c=s(a);if(c)return c.v}return!1}function yn(e,t,r){e.focused||e.focus();var n=e.state.tr.setSelection(t);"pointer"==r&&n.setMeta("pointer",!0),e.dispatch(n)}function bn(e,t,r,n,o){return vn(e,"handleClickOn",t,r,n)||e.someProp("handleClick",(function(r){return r(e,t,n)}))||(o?function(e,t){if(-1==t)return!1;var r,n,o=e.state.selection;o instanceof et&&(r=o.node);for(var i=e.state.doc.resolve(t),s=i.depth+1;s>0;s--){var a=s>i.depth?i.nodeAfter:i.node(s);if(et.isSelectable(a)){n=r&&o.$from.depth>0&&s>=o.$from.depth&&i.before(o.$from.depth+1)==o.$from.pos?i.before(o.$from.depth):i.before(s);break}}return null!=n&&(yn(e,et.create(e.state.doc,n),"pointer"),!0)}(e,r):function(e,t){if(-1==t)return!1;var r=e.state.doc.resolve(t),n=r.nodeAfter;return!!(n&&n.isAtom&&et.isSelectable(n))&&(yn(e,new et(r),"pointer"),!0)}(e,r))}function wn(e,t,r,n){return vn(e,"handleDoubleClickOn",t,r,n)||e.someProp("handleDoubleClick",(function(r){return r(e,t,n)}))}function kn(e,t,r,n){return vn(e,"handleTripleClickOn",t,r,n)||e.someProp("handleTripleClick",(function(r){return r(e,t,n)}))||function(e,t){var r=e.state.doc;if(-1==t)return!!r.inlineContent&&(yn(e,Qe.create(r,0,r.content.size),"pointer"),!0);for(var n=r.resolve(t),o=n.depth+1;o>0;o--){var i=o>n.depth?n.nodeAfter:n.node(o),s=n.before(o);if(i.inlineContent)yn(e,Qe.create(r,s+1,s+1+i.content.size),"pointer");else{if(!et.isSelectable(i))continue;yn(e,et.create(r,s),"pointer")}return!0}}(e,r)}function xn(e){return Mn(e)}hn.keydown=function(e,t){if(e.shiftKey=16==t.keyCode||t.shiftKey,!_n(e,t))if(e.domObserver.forceFlush(),e.lastKeyCode=t.keyCode,e.lastKeyCodeTime=Date.now(),!yt.ios||13!=t.keyCode||t.ctrlKey||t.altKey||t.metaKey)e.someProp("handleKeyDown",(function(r){return r(e,t)}))||Gr(e,t)?t.preventDefault():dn(e,"key");else{var r=Date.now();e.lastIOSEnter=r,e.lastIOSEnterFallbackTimeout=setTimeout((function(){e.lastIOSEnter==r&&(e.someProp("handleKeyDown",(function(t){return t(e,Rt(13,"Enter"))})),e.lastIOSEnter=0)}),200)}},hn.keyup=function(e,t){16==t.keyCode&&(e.shiftKey=!1)},hn.keypress=function(e,t){if(!(_n(e,t)||!t.charCode||t.ctrlKey&&!t.altKey||yt.mac&&t.metaKey))if(e.someProp("handleKeyPress",(function(r){return r(e,t)})))t.preventDefault();else{var r=e.state.selection;if(!(r instanceof Qe&&r.$from.sameParent(r.$to))){var n=String.fromCharCode(t.charCode);e.someProp("handleTextInput",(function(t){return t(e,r.$from.pos,r.$to.pos,n)}))||e.dispatch(e.state.tr.insertText(n).scrollIntoView()),t.preventDefault()}}};var Cn=yt.mac?"metaKey":"ctrlKey";pn.mousedown=function(e,t){e.shiftKey=t.shiftKey;var r=xn(e),n=Date.now(),o="singleClick";n-e.lastClick.time<500&&function(e,t){var r=t.x-e.clientX,n=t.y-e.clientY;return r*r+n*n<100}(t,e.lastClick)&&!t[Cn]&&("singleClick"==e.lastClick.type?o="doubleClick":"doubleClick"==e.lastClick.type&&(o="tripleClick")),e.lastClick={time:n,x:t.clientX,y:t.clientY,type:o};var i=e.posAtCoords(gn(t));i&&("singleClick"==o?(e.mouseDown&&e.mouseDown.done(),e.mouseDown=new Sn(e,i,t,r)):("doubleClick"==o?wn:kn)(e,i.pos,i.inside,t)?t.preventDefault():dn(e,"pointer"))};var Sn=function(e,t,r,n){var o,i,s=this;if(this.view=e,this.startDoc=e.state.doc,this.pos=t,this.event=r,this.flushed=n,this.selectNode=r[Cn],this.allowDefault=r.shiftKey,t.inside>-1)o=e.state.doc.nodeAt(t.inside),i=t.inside;else{var a=e.state.doc.resolve(t.pos);o=a.parent,i=a.depth?a.before():0}this.mightDrag=null;var c=n?null:r.target,l=c?e.docView.nearestDesc(c,!0):null;this.target=l?l.dom:null,(o.type.spec.draggable&&!1!==o.type.spec.selectable||e.state.selection instanceof et&&i==e.state.selection.from)&&(this.mightDrag={node:o,pos:i,addAttr:this.target&&!this.target.draggable,setUneditable:this.target&&yt.gecko&&!this.target.hasAttribute("contentEditable")}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout((function(){s.view.mouseDown==s&&s.target.setAttribute("contentEditable","false")}),20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),dn(e,"pointer")};function _n(e,t){return!!e.composing||!!(yt.safari&&Math.abs(t.timeStamp-e.compositionEndedAt)<500)&&(e.compositionEndedAt=-2e8,!0)}Sn.prototype.done=function(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.view.mouseDown=null},Sn.prototype.up=function(e){if(this.done(),this.view.dom.contains(3==e.target.nodeType?e.target.parentNode:e.target)){var t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(gn(e))),this.allowDefault||!t?dn(this.view,"pointer"):bn(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():this.flushed||yt.safari&&this.mightDrag&&!this.mightDrag.node.isAtom||yt.chrome&&!(this.view.state.selection instanceof Qe)&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2?(yn(this.view,Ke.near(this.view.state.doc.resolve(t.pos)),"pointer"),e.preventDefault()):dn(this.view,"pointer")}},Sn.prototype.move=function(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0),dn(this.view,"pointer"),0==e.buttons&&this.done()},pn.touchdown=function(e){xn(e),dn(e,"pointer")},pn.contextmenu=function(e){return xn(e)};var Dn=yt.android?5e3:-1;function An(e,t){clearTimeout(e.composingTimeout),t>-1&&(e.composingTimeout=setTimeout((function(){return Mn(e)}),t))}function En(e){for(e.composing=!1;e.compositionNodes.length>0;)e.compositionNodes.pop().markParentsDirty()}function Mn(e,t){if(e.domObserver.forceFlush(),En(e),t||e.docView.dirty){var r=Sr(e);return r&&!r.eq(e.state.selection)?e.dispatch(e.state.tr.setSelection(r)):e.updateState(e.state),!0}return!1}hn.compositionstart=hn.compositionupdate=function(e){if(!e.composing){e.domObserver.flush();var t=e.state,r=t.selection.$from;if(t.selection.empty&&(t.storedMarks||!r.textOffset&&r.parentOffset&&r.nodeBefore.marks.some((function(e){return!1===e.type.spec.inclusive}))))e.markCursor=e.state.storedMarks||r.marks(),Mn(e,!0),e.markCursor=null;else if(Mn(e),yt.gecko&&t.selection.empty&&r.parentOffset&&!r.textOffset&&r.nodeBefore.marks.length)for(var n=e.root.getSelection(),o=n.focusNode,i=n.focusOffset;o&&1==o.nodeType&&0!=i;){var s=i<0?o.lastChild:o.childNodes[i-1];if(!s)break;if(3==s.nodeType){n.collapse(s,s.nodeValue.length);break}o=s,i=-1}e.composing=!0}An(e,Dn)},hn.compositionend=function(e,t){e.composing&&(e.composing=!1,e.compositionEndedAt=t.timeStamp,An(e,20))};var Tn=yt.ie&&yt.ie_version<15||yt.ios&&yt.webkit_version<604;function On(e,t,r,n){var o=Xr(e,t,r,e.shiftKey,e.state.selection.$from);if(e.someProp("handlePaste",(function(t){return t(e,n,o||l.empty)})))return!0;if(!o)return!1;var i=function(e){return 0==e.openStart&&0==e.openEnd&&1==e.content.childCount?e.content.firstChild:null}(o),s=i?e.state.tr.replaceSelectionWith(i,e.shiftKey):e.state.tr.replaceSelection(o);return e.dispatch(s.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}pn.copy=hn.cut=function(e,t){var r=e.state.selection,n="cut"==t.type;if(!r.empty){var o=Tn?null:t.clipboardData,i=Qr(e,r.content()),s=i.dom,a=i.text;o?(t.preventDefault(),o.clearData(),o.setData("text/html",s.innerHTML),o.setData("text/plain",a)):function(e,t){if(e.dom.parentNode){var r=e.dom.parentNode.appendChild(document.createElement("div"));r.appendChild(t),r.style.cssText="position: fixed; left: -10000px; top: 10px";var n=getSelection(),o=document.createRange();o.selectNodeContents(t),e.dom.blur(),n.removeAllRanges(),n.addRange(o),setTimeout((function(){r.parentNode&&r.parentNode.removeChild(r),e.focus()}),50)}}(e,s),n&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))}},hn.paste=function(e,t){var r=Tn?null:t.clipboardData;r&&On(e,r.getData("text/plain"),r.getData("text/html"),t)?t.preventDefault():function(e,t){if(e.dom.parentNode){var r=e.shiftKey||e.state.selection.$from.parent.type.spec.code,n=e.dom.parentNode.appendChild(document.createElement(r?"textarea":"div"));r||(n.contentEditable="true"),n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout((function(){e.focus(),n.parentNode&&n.parentNode.removeChild(n),r?On(e,n.value,null,t):On(e,n.textContent,n.innerHTML,t)}),50)}}(e,t)};var Nn=function(e,t){this.slice=e,this.move=t},qn=yt.mac?"altKey":"ctrlKey";for(var Rn in pn.dragstart=function(e,t){var r=e.mouseDown;if(r&&r.done(),t.dataTransfer){var n=e.state.selection,o=n.empty?null:e.posAtCoords(gn(t));if(o&&o.pos>=n.from&&o.pos<=(n instanceof et?n.to-1:n.to));else if(r&&r.mightDrag)e.dispatch(e.state.tr.setSelection(et.create(e.state.doc,r.mightDrag.pos)));else if(t.target&&1==t.target.nodeType){var i=e.docView.nearestDesc(t.target,!0);if(!i||!i.node.type.spec.draggable||i==e.docView)return;e.dispatch(e.state.tr.setSelection(et.create(e.state.doc,i.posBefore)))}var s=e.state.selection.content(),a=Qr(e,s),c=a.dom,l=a.text;t.dataTransfer.clearData(),t.dataTransfer.setData(Tn?"Text":"text/html",c.innerHTML),t.dataTransfer.effectAllowed="copyMove",Tn||t.dataTransfer.setData("text/plain",l),e.dragging=new Nn(s,!t[qn])}},pn.dragend=function(e){var t=e.dragging;window.setTimeout((function(){e.dragging==t&&(e.dragging=null)}),50)},hn.dragover=hn.dragenter=function(e,t){return t.preventDefault()},hn.drop=function(e,t){var r=e.dragging;if(e.dragging=null,t.dataTransfer){var n=e.posAtCoords(gn(t));if(n){var o=e.state.doc.resolve(n.pos);if(o){var i=r&&r.slice;i?e.someProp("transformPasted",(function(e){i=e(i)})):i=Xr(e,t.dataTransfer.getData(Tn?"Text":"text/plain"),Tn?null:t.dataTransfer.getData("text/html"),!1,o);var s=r&&!t[qn];if(e.someProp("handleDrop",(function(r){return r(e,t,i||l.empty,s)})))t.preventDefault();else if(i){t.preventDefault();var a=i?Re(e.state.doc,o.pos,i):o.pos;null==a&&(a=o.pos);var c=e.state.tr;s&&c.deleteSelection();var u=c.mapping.map(a),p=0==i.openStart&&0==i.openEnd&&1==i.content.childCount,h=c.doc;if(p?c.replaceRangeWith(u,u,i.content.firstChild):c.replaceRange(u,u,i),!c.doc.eq(h)){var d=c.doc.resolve(u);if(p&&et.isSelectable(i.content.firstChild)&&d.nodeAfter&&d.nodeAfter.sameMarkup(i.content.firstChild))c.setSelection(new et(d));else{var f=c.mapping.map(a);c.mapping.maps[c.mapping.maps.length-1].forEach((function(e,t,r,n){return f=n})),c.setSelection(qr(e,d,c.doc.resolve(f)))}e.focus(),e.dispatch(c.setMeta("uiEvent","drop"))}}}}}},pn.focus=function(e){e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout((function(){e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.root.getSelection())&&Dr(e)}),20))},pn.blur=function(e){e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),e.domObserver.currentSelection.set({}),e.focused=!1)},pn.beforeinput=function(e,t){if(yt.chrome&&yt.android&&"deleteContentBackward"==t.inputType){var r=e.domChangeCount;setTimeout((function(){if(e.domChangeCount==r&&(e.dom.blur(),e.focus(),!e.someProp("handleKeyDown",(function(t){return t(e,Rt(8,"Backspace"))})))){var t=e.state.selection.$cursor;t&&t.pos>0&&e.dispatch(e.state.tr.delete(t.pos-1,t.pos).scrollIntoView())}}),50)}},hn)pn[Rn]=hn[Rn];function In(e,t){if(e==t)return!0;for(var r in e)if(e[r]!==t[r])return!1;for(var n in t)if(!(n in e))return!1;return!0}var Ln=function(e,t){this.spec=t||$n,this.side=this.spec.side||0,this.toDOM=e};Ln.prototype.map=function(e,t,r,n){var o=e.mapResult(t.from+n,this.side<0?-1:1),i=o.pos;return o.deleted?null:new Bn(i-r,i-r,this)},Ln.prototype.valid=function(){return!0},Ln.prototype.eq=function(e){return this==e||e instanceof Ln&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&In(this.spec,e.spec))};var zn=function(e,t){this.spec=t||$n,this.attrs=e};zn.prototype.map=function(e,t,r,n){var o=e.map(t.from+n,this.spec.inclusiveStart?-1:1)-r,i=e.map(t.to+n,this.spec.inclusiveEnd?1:-1)-r;return o>=i?null:new Bn(o,i,this)},zn.prototype.valid=function(e,t){return t.from<t.to},zn.prototype.eq=function(e){return this==e||e instanceof zn&&In(this.attrs,e.attrs)&&In(this.spec,e.spec)},zn.is=function(e){return e.type instanceof zn};var Fn=function(e,t){this.spec=t||$n,this.attrs=e};Fn.prototype.map=function(e,t,r,n){var o=e.mapResult(t.from+n,1);if(o.deleted)return null;var i=e.mapResult(t.to+n,-1);return i.deleted||i.pos<=o.pos?null:new Bn(o.pos-r,i.pos-r,this)},Fn.prototype.valid=function(e,t){var r=e.content.findIndex(t.from),n=r.index,o=r.offset;return o==t.from&&o+e.child(n).nodeSize==t.to},Fn.prototype.eq=function(e){return this==e||e instanceof Fn&&In(this.attrs,e.attrs)&&In(this.spec,e.spec)};var Bn=function(e,t,r){this.from=e,this.to=t,this.type=r},Pn={spec:{configurable:!0},inline:{configurable:!0}};Bn.prototype.copy=function(e,t){return new Bn(e,t,this.type)},Bn.prototype.eq=function(e,t){return void 0===t&&(t=0),this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to},Bn.prototype.map=function(e,t,r){return this.type.map(e,this,t,r)},Bn.widget=function(e,t,r){return new Bn(e,e,new Ln(t,r))},Bn.inline=function(e,t,r,n){return new Bn(e,t,new zn(r,n))},Bn.node=function(e,t,r,n){return new Bn(e,t,new Fn(r,n))},Pn.spec.get=function(){return this.type.spec},Pn.inline.get=function(){return this.type instanceof zn},Object.defineProperties(Bn.prototype,Pn);var Vn=[],$n={},jn=function(e,t){this.local=e&&e.length?e:Vn,this.children=t&&t.length?t:Vn};jn.create=function(e,t){return t.length?Kn(t,e,0,$n):Hn},jn.prototype.find=function(e,t,r){var n=[];return this.findInner(null==e?0:e,null==t?1e9:t,n,0,r),n},jn.prototype.findInner=function(e,t,r,n,o){for(var i=0;i<this.local.length;i++){var s=this.local[i];s.from<=t&&s.to>=e&&(!o||o(s.spec))&&r.push(s.copy(s.from+n,s.to+n))}for(var a=0;a<this.children.length;a+=3)if(this.children[a]<t&&this.children[a+1]>e){var c=this.children[a]+1;this.children[a+2].findInner(e-c,t-c,r,n+c,o)}},jn.prototype.map=function(e,t,r){return this==Hn||0==e.maps.length?this:this.mapInner(e,t,0,0,r||$n)},jn.prototype.mapInner=function(e,t,r,n,o){for(var i,s=0;s<this.local.length;s++){var a=this.local[s].map(e,r,n);a&&a.type.valid(t,a)?(i||(i=[])).push(a):o.onRemove&&o.onRemove(this.local[s].spec)}return this.children.length?function(e,t,r,n,o,i,s){for(var a=e.slice(),c=function(e,t,r,n){for(var s=0;s<a.length;s+=3){var c=a[s+1],l=void 0;-1==c||e>c+i||(t>=a[s]+i?a[s+1]=-1:r>=o&&(l=n-r-(t-e))&&(a[s]+=l,a[s+1]+=l))}},l=0;l<r.maps.length;l++)r.maps[l].forEach(c);for(var u=!1,p=0;p<a.length;p+=3)if(-1==a[p+1]){var h=r.map(e[p]+i),d=h-o;if(d<0||d>=n.content.size){u=!0;continue}var f=r.map(e[p+1]+i,-1)-o,m=n.content.findIndex(d),g=m.index,v=m.offset,y=n.maybeChild(g);if(y&&v==d&&v+y.nodeSize==f){var b=a[p+2].mapInner(r,y,h+1,e[p]+i+1,s);b!=Hn?(a[p]=d,a[p+1]=f,a[p+2]=b):(a[p+1]=-2,u=!0)}else u=!0}if(u){var w=Kn(function(e,t,r,n,o,i,s){function a(e,t){for(var i=0;i<e.local.length;i++){var c=e.local[i].map(n,o,t);c?r.push(c):s.onRemove&&s.onRemove(e.local[i].spec)}for(var l=0;l<e.children.length;l+=3)a(e.children[l+2],e.children[l]+t+1)}for(var c=0;c<e.length;c+=3)-1==e[c+1]&&a(e[c+2],t[c]+i+1);return r}(a,e,t||[],r,o,i,s),n,0,s);t=w.local;for(var k=0;k<a.length;k+=3)a[k+1]<0&&(a.splice(k,3),k-=3);for(var x=0,C=0;x<w.children.length;x+=3){for(var S=w.children[x];C<a.length&&a[C]<S;)C+=3;a.splice(C,0,w.children[x],w.children[x+1],w.children[x+2])}}return new jn(t&&t.sort(Zn),a)}(this.children,i,e,t,r,n,o):i?new jn(i.sort(Zn)):Hn},jn.prototype.add=function(e,t){return t.length?this==Hn?jn.create(e,t):this.addInner(e,t,0):this},jn.prototype.addInner=function(e,t,r){var n,o=this,i=0;e.forEach((function(e,s){var a,c=s+r;if(a=Gn(t,e,c)){for(n||(n=o.children.slice());i<n.length&&n[i]<s;)i+=3;n[i]==s?n[i+2]=n[i+2].addInner(e,a,c+1):n.splice(i,0,s,s+e.nodeSize,Kn(a,e,c+1,$n)),i+=3}}));for(var s=Jn(i?Wn(t):t,-r),a=0;a<s.length;a++)s[a].type.valid(e,s[a])||s.splice(a--,1);return new jn(s.length?this.local.concat(s).sort(Zn):this.local,n||this.children)},jn.prototype.remove=function(e){return 0==e.length||this==Hn?this:this.removeInner(e,0)},jn.prototype.removeInner=function(e,t){for(var r=this.children,n=this.local,o=0;o<r.length;o+=3){for(var i=void 0,s=r[o]+t,a=r[o+1]+t,c=0,l=void 0;c<e.length;c++)(l=e[c])&&l.from>s&&l.to<a&&(e[c]=null,(i||(i=[])).push(l));if(i){r==this.children&&(r=this.children.slice());var u=r[o+2].removeInner(i,s+1);u!=Hn?r[o+2]=u:(r.splice(o,3),o-=3)}}if(n.length)for(var p=0,h=void 0;p<e.length;p++)if(h=e[p])for(var d=0;d<n.length;d++)n[d].eq(h,t)&&(n==this.local&&(n=this.local.slice()),n.splice(d--,1));return r==this.children&&n==this.local?this:n.length||r.length?new jn(n,r):Hn},jn.prototype.forChild=function(e,t){if(this==Hn)return this;if(t.isLeaf)return jn.empty;for(var r,n,o=0;o<this.children.length;o+=3)if(this.children[o]>=e){this.children[o]==e&&(r=this.children[o+2]);break}for(var i=e+1,s=i+t.content.size,a=0;a<this.local.length;a++){var c=this.local[a];if(c.from<s&&c.to>i&&c.type instanceof zn){var l=Math.max(i,c.from)-i,u=Math.min(s,c.to)-i;l<u&&(n||(n=[])).push(c.copy(l,u))}}if(n){var p=new jn(n.sort(Zn));return r?new Un([p,r]):p}return r||Hn},jn.prototype.eq=function(e){if(this==e)return!0;if(!(e instanceof jn)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(var t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(var r=0;r<this.children.length;r+=3)if(this.children[r]!=e.children[r]||this.children[r+1]!=e.children[r+1]||!this.children[r+2].eq(e.children[r+2]))return!1;return!0},jn.prototype.locals=function(e){return Yn(this.localsInner(e))},jn.prototype.localsInner=function(e){if(this==Hn)return Vn;if(e.inlineContent||!this.local.some(zn.is))return this.local;for(var t=[],r=0;r<this.local.length;r++)this.local[r].type instanceof zn||t.push(this.local[r]);return t};var Hn=new jn;jn.empty=Hn,jn.removeOverlap=Yn;var Un=function(e){this.members=e};function Jn(e,t){if(!t||!e.length)return e;for(var r=[],n=0;n<e.length;n++){var o=e[n];r.push(new Bn(o.from+t,o.to+t,o.type))}return r}function Gn(e,t,r){if(t.isLeaf)return null;for(var n=r+t.nodeSize,o=null,i=0,s=void 0;i<e.length;i++)(s=e[i])&&s.from>r&&s.to<n&&((o||(o=[])).push(s),e[i]=null);return o}function Wn(e){for(var t=[],r=0;r<e.length;r++)null!=e[r]&&t.push(e[r]);return t}function Kn(e,t,r,n){var o=[],i=!1;t.forEach((function(t,s){var a=Gn(e,t,s+r);if(a){i=!0;var c=Kn(a,t,r+s+1,n);c!=Hn&&o.push(s,s+t.nodeSize,c)}}));for(var s=Jn(i?Wn(e):e,-r).sort(Zn),a=0;a<s.length;a++)s[a].type.valid(t,s[a])||(n.onRemove&&n.onRemove(s[a].spec),s.splice(a--,1));return s.length||o.length?new jn(s,o):Hn}function Zn(e,t){return e.from-t.from||e.to-t.to}function Yn(e){for(var t=e,r=0;r<t.length-1;r++){var n=t[r];if(n.from!=n.to)for(var o=r+1;o<t.length;o++){var i=t[o];if(i.from!=n.from){i.from<n.to&&(t==e&&(t=e.slice()),t[r]=n.copy(n.from,i.from),Qn(t,o,n.copy(i.from,n.to)));break}i.to!=n.to&&(t==e&&(t=e.slice()),t[o]=i.copy(i.from,n.to),Qn(t,o+1,i.copy(n.to,i.to)))}}return t}function Qn(e,t,r){for(;t<e.length&&Zn(r,e[t])>0;)t++;e.splice(t,0,r)}function Xn(e){var t=[];return e.someProp("decorations",(function(r){var n=r(e.state);n&&n!=Hn&&t.push(n)})),e.cursorWrapper&&t.push(jn.create(e.state.doc,[e.cursorWrapper.deco])),Un.from(t)}Un.prototype.forChild=function(e,t){if(t.isLeaf)return jn.empty;for(var r=[],n=0;n<this.members.length;n++){var o=this.members[n].forChild(e,t);o!=Hn&&(o instanceof Un?r=r.concat(o.members):r.push(o))}return Un.from(r)},Un.prototype.eq=function(e){if(!(e instanceof Un)||e.members.length!=this.members.length)return!1;for(var t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0},Un.prototype.locals=function(e){for(var t,r=!0,n=0;n<this.members.length;n++){var o=this.members[n].localsInner(e);if(o.length)if(t){r&&(t=t.slice(),r=!1);for(var i=0;i<o.length;i++)t.push(o[i])}else t=o}return t?Yn(r?t:t.sort(Zn)):Vn},Un.from=function(e){switch(e.length){case 0:return Hn;case 1:return e[0];default:return new Un(e)}};var eo=function(e,t){this._props=t,this.state=t.state,this.dispatch=this.dispatch.bind(this),this._root=null,this.focused=!1,this.trackWrites=null,this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):e.apply?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=oo(this),this.markCursor=null,this.cursorWrapper=null,no(this),this.nodeViews=io(this),this.docView=lr(this.state.doc,ro(this),Xn(this),this.dom,this),this.lastSelectedViewDesc=null,this.dragging=null,function(e){e.shiftKey=!1,e.mouseDown=null,e.lastKeyCode=null,e.lastKeyCodeTime=0,e.lastClick={time:0,x:0,y:0,type:""},e.lastSelectionOrigin=null,e.lastSelectionTime=0,e.lastIOSEnter=0,e.lastIOSEnterFallbackTimeout=null,e.lastAndroidDelete=0,e.composing=!1,e.composingTimeout=null,e.compositionNodes=[],e.compositionEndedAt=-2e8,e.domObserver=new ln(e,(function(t,r,n,o){return Kr(e,t,r,n,o)})),e.domObserver.start(),e.domChangeCount=0,e.eventHandlers=Object.create(null);var t=function(t){var r=pn[t];e.dom.addEventListener(t,e.eventHandlers[t]=function(t){!function(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(var r=t.target;r!=e.dom;r=r.parentNode)if(!r||11==r.nodeType||r.pmViewDesc&&r.pmViewDesc.stopEvent(t))return!1;return!0}(e,t)||mn(e,t)||!e.editable&&t.type in hn||r(e,t)})};for(var r in pn)t(r);yt.safari&&e.dom.addEventListener("input",(function(){return null})),fn(e)}(this),this.pluginViews=[],this.updatePluginViews()},to={props:{configurable:!0},root:{configurable:!0}};function ro(e){var t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",(function(r){if("function"==typeof r&&(r=r(e.state)),r)for(var n in r)"class"==n?t.class+=" "+r[n]:t[n]||"contenteditable"==n||"nodeName"==n||(t[n]=String(r[n]))})),[Bn.node(0,e.state.doc.content.size,t)]}function no(e){if(e.markCursor){var t=document.createElement("img");t.setAttribute("mark-placeholder","true"),e.cursorWrapper={dom:t,deco:Bn.widget(e.state.selection.head,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function oo(e){return!e.someProp("editable",(function(t){return!1===t(e.state)}))}function io(e){var t={};return e.someProp("nodeViews",(function(e){for(var r in e)Object.prototype.hasOwnProperty.call(t,r)||(t[r]=e[r])})),t}to.props.get=function(){if(this._props.state!=this.state){var e=this._props;for(var t in this._props={},e)this._props[t]=e[t];this._props.state=this.state}return this._props},eo.prototype.update=function(e){e.handleDOMEvents!=this._props.handleDOMEvents&&fn(this),this._props=e,this.updateStateInner(e.state,!0)},eo.prototype.setProps=function(e){var t={};for(var r in this._props)t[r]=this._props[r];for(var n in t.state=this.state,e)t[n]=e[n];this.update(t)},eo.prototype.updateState=function(e){this.updateStateInner(e,this.state.plugins!=e.plugins)},eo.prototype.updateStateInner=function(e,t){var r=this,n=this.state,o=!1,i=!1;if(e.storedMarks&&this.composing&&(En(this),i=!0),this.state=e,t){var s=io(this);(function(e,t){var r=0,n=0;for(var o in e){if(e[o]!=t[o])return!0;r++}for(var i in t)n++;return r!=n})(s,this.nodeViews)&&(this.nodeViews=s,o=!0),fn(this)}this.editable=oo(this),no(this);var a=Xn(this),c=ro(this),l=t?"reset":e.scrollToSelection>n.scrollToSelection?"to selection":"preserve",u=o||!this.docView.matchesNode(e.doc,c,a);!u&&e.selection.eq(n.selection)||(i=!0);var p,h,d,f,m,g,v,y,b="preserve"==l&&i&&null==this.dom.style.overflowAnchor&&function(e){for(var t,r,n=e.dom.getBoundingClientRect(),o=Math.max(0,n.top),i=(n.left+n.right)/2,s=o+1;s<Math.min(innerHeight,n.bottom);s+=5){var a=e.root.elementFromPoint(i,s);if(a!=e.dom&&e.dom.contains(a)){var c=a.getBoundingClientRect();if(c.top>=o-20){t=a,r=c.top;break}}}return{refDOM:t,refTop:r,stack:Bt(e.dom)}}(this);if(i){this.domObserver.stop();var w=u&&(yt.ie||yt.chrome)&&!this.composing&&!n.selection.empty&&!e.selection.empty&&(p=n.selection,h=e.selection,d=Math.min(p.$anchor.sharedDepth(p.head),h.$anchor.sharedDepth(h.head)),p.$anchor.start(d)!=h.$anchor.start(d));if(u){var k=yt.chrome?this.trackWrites=this.root.getSelection().focusNode:null;!o&&this.docView.update(e.doc,c,a,this)||(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=lr(e.doc,c,a,this.dom,this)),k&&!this.trackWrites&&(w=!0)}w||!(this.mouseDown&&this.domObserver.currentSelection.eq(this.root.getSelection())&&function(e){var t=e.docView.domFromPos(e.state.selection.anchor,0),r=e.root.getSelection();return Et(t.node,t.offset,r.anchorNode,r.anchorOffset)}(this))?Dr(this,w):(Or(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}if(this.updatePluginViews(n),"reset"==l)this.dom.scrollTop=0;else if("to selection"==l){var x=this.root.getSelection().focusNode;this.someProp("handleScrollToSelection",(function(e){return e(r)}))||(e.selection instanceof et?Ft(this,this.docView.domAfterPos(e.selection.from).getBoundingClientRect(),x):Ft(this,this.coordsAtPos(e.selection.head,1),x))}else b&&(m=(f=b).refDOM,g=f.refTop,v=f.stack,y=m?m.getBoundingClientRect().top:0,Pt(v,0==y?0:y-g))},eo.prototype.destroyPluginViews=function(){for(var e;e=this.pluginViews.pop();)e.destroy&&e.destroy()},eo.prototype.updatePluginViews=function(e){if(e&&e.plugins==this.state.plugins)for(var t=0;t<this.pluginViews.length;t++){var r=this.pluginViews[t];r.update&&r.update(this,e)}else{this.destroyPluginViews();for(var n=0;n<this.state.plugins.length;n++){var o=this.state.plugins[n];o.spec.view&&this.pluginViews.push(o.spec.view(this))}}},eo.prototype.someProp=function(e,t){var r,n=this._props&&this._props[e];if(null!=n&&(r=t?t(n):n))return r;var o=this.state.plugins;if(o)for(var i=0;i<o.length;i++){var s=o[i].props[e];if(null!=s&&(r=t?t(s):s))return r}},eo.prototype.hasFocus=function(){return this.root.activeElement==this.dom},eo.prototype.focus=function(){this.domObserver.stop(),this.editable&&function(e){if(e.setActive)return e.setActive();if(Vt)return e.focus(Vt);var t=Bt(e);e.focus(null==Vt?{get preventScroll(){return Vt={preventScroll:!0},!0}}:void 0),Vt||(Vt=!1,Pt(t,0))}(this.dom),Dr(this),this.domObserver.start()},to.root.get=function(){var e=this._root;if(null==e)for(var t=this.dom.parentNode;t;t=t.parentNode)if(9==t.nodeType||11==t.nodeType&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=function(){return document.getSelection()}),this._root=t;return e||document},eo.prototype.posAtCoords=function(e){return Ht(this,e)},eo.prototype.coordsAtPos=function(e,t){return void 0===t&&(t=1),Gt(this,e,t)},eo.prototype.domAtPos=function(e,t){return void 0===t&&(t=0),this.docView.domFromPos(e,t)},eo.prototype.nodeDOM=function(e){var t=this.docView.descAt(e);return t?t.nodeDOM:null},eo.prototype.posAtDOM=function(e,t,r){void 0===r&&(r=-1);var n=this.docView.posFromDOM(e,t,r);if(null==n)throw new RangeError("DOM position not inside the editor");return n},eo.prototype.endOfTextblock=function(e,t){return tr(this,t||this.state,e)},eo.prototype.destroy=function(){this.docView&&(!function(e){for(var t in e.domObserver.stop(),e.eventHandlers)e.dom.removeEventListener(t,e.eventHandlers[t]);clearTimeout(e.composingTimeout),clearTimeout(e.lastIOSEnterFallbackTimeout)}(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Xn(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)},eo.prototype.dispatchEvent=function(e){return function(e,t){mn(e,t)||!pn[t.type]||!e.editable&&t.type in hn||pn[t.type](e,t)}(this,e)},eo.prototype.dispatch=function(e){var t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))},Object.defineProperties(eo.prototype,to);var so,ao={Aacute:"Á",aacute:"á",Abreve:"Ă",abreve:"ă",ac:"∾",acd:"∿",acE:"∾̳",Acirc:"Â",acirc:"â",acute:"´",Acy:"А",acy:"а",AElig:"Æ",aelig:"æ",af:"⁡",Afr:"𝔄",afr:"𝔞",Agrave:"À",agrave:"à",alefsym:"ℵ",aleph:"ℵ",Alpha:"Α",alpha:"α",Amacr:"Ā",amacr:"ā",amalg:"⨿",amp:"&",AMP:"&",andand:"⩕",And:"⩓",and:"∧",andd:"⩜",andslope:"⩘",andv:"⩚",ang:"∠",ange:"⦤",angle:"∠",angmsdaa:"⦨",angmsdab:"⦩",angmsdac:"⦪",angmsdad:"⦫",angmsdae:"⦬",angmsdaf:"⦭",angmsdag:"⦮",angmsdah:"⦯",angmsd:"∡",angrt:"∟",angrtvb:"⊾",angrtvbd:"⦝",angsph:"∢",angst:"Å",angzarr:"⍼",Aogon:"Ą",aogon:"ą",Aopf:"𝔸",aopf:"𝕒",apacir:"⩯",ap:"≈",apE:"⩰",ape:"≊",apid:"≋",apos:"'",ApplyFunction:"⁡",approx:"≈",approxeq:"≊",Aring:"Å",aring:"å",Ascr:"𝒜",ascr:"𝒶",Assign:"≔",ast:"*",asymp:"≈",asympeq:"≍",Atilde:"Ã",atilde:"ã",Auml:"Ä",auml:"ä",awconint:"∳",awint:"⨑",backcong:"≌",backepsilon:"϶",backprime:"‵",backsim:"∽",backsimeq:"⋍",Backslash:"∖",Barv:"⫧",barvee:"⊽",barwed:"⌅",Barwed:"⌆",barwedge:"⌅",bbrk:"⎵",bbrktbrk:"⎶",bcong:"≌",Bcy:"Б",bcy:"б",bdquo:"„",becaus:"∵",because:"∵",Because:"∵",bemptyv:"⦰",bepsi:"϶",bernou:"ℬ",Bernoullis:"ℬ",Beta:"Β",beta:"β",beth:"ℶ",between:"≬",Bfr:"𝔅",bfr:"𝔟",bigcap:"⋂",bigcirc:"◯",bigcup:"⋃",bigodot:"⨀",bigoplus:"⨁",bigotimes:"⨂",bigsqcup:"⨆",bigstar:"★",bigtriangledown:"▽",bigtriangleup:"△",biguplus:"⨄",bigvee:"⋁",bigwedge:"⋀",bkarow:"⤍",blacklozenge:"⧫",blacksquare:"▪",blacktriangle:"▴",blacktriangledown:"▾",blacktriangleleft:"◂",blacktriangleright:"▸",blank:"␣",blk12:"▒",blk14:"░",blk34:"▓",block:"█",bne:"=⃥",bnequiv:"≡⃥",bNot:"⫭",bnot:"⌐",Bopf:"𝔹",bopf:"𝕓",bot:"⊥",bottom:"⊥",bowtie:"⋈",boxbox:"⧉",boxdl:"┐",boxdL:"╕",boxDl:"╖",boxDL:"╗",boxdr:"┌",boxdR:"╒",boxDr:"╓",boxDR:"╔",boxh:"─",boxH:"═",boxhd:"┬",boxHd:"╤",boxhD:"╥",boxHD:"╦",boxhu:"┴",boxHu:"╧",boxhU:"╨",boxHU:"╩",boxminus:"⊟",boxplus:"⊞",boxtimes:"⊠",boxul:"┘",boxuL:"╛",boxUl:"╜",boxUL:"╝",boxur:"└",boxuR:"╘",boxUr:"╙",boxUR:"╚",boxv:"│",boxV:"║",boxvh:"┼",boxvH:"╪",boxVh:"╫",boxVH:"╬",boxvl:"┤",boxvL:"╡",boxVl:"╢",boxVL:"╣",boxvr:"├",boxvR:"╞",boxVr:"╟",boxVR:"╠",bprime:"‵",breve:"˘",Breve:"˘",brvbar:"¦",bscr:"𝒷",Bscr:"ℬ",bsemi:"⁏",bsim:"∽",bsime:"⋍",bsolb:"⧅",bsol:"\\",bsolhsub:"⟈",bull:"•",bullet:"•",bump:"≎",bumpE:"⪮",bumpe:"≏",Bumpeq:"≎",bumpeq:"≏",Cacute:"Ć",cacute:"ć",capand:"⩄",capbrcup:"⩉",capcap:"⩋",cap:"∩",Cap:"⋒",capcup:"⩇",capdot:"⩀",CapitalDifferentialD:"ⅅ",caps:"∩︀",caret:"⁁",caron:"ˇ",Cayleys:"ℭ",ccaps:"⩍",Ccaron:"Č",ccaron:"č",Ccedil:"Ç",ccedil:"ç",Ccirc:"Ĉ",ccirc:"ĉ",Cconint:"∰",ccups:"⩌",ccupssm:"⩐",Cdot:"Ċ",cdot:"ċ",cedil:"¸",Cedilla:"¸",cemptyv:"⦲",cent:"¢",centerdot:"·",CenterDot:"·",cfr:"𝔠",Cfr:"ℭ",CHcy:"Ч",chcy:"ч",check:"✓",checkmark:"✓",Chi:"Χ",chi:"χ",circ:"ˆ",circeq:"≗",circlearrowleft:"↺",circlearrowright:"↻",circledast:"⊛",circledcirc:"⊚",circleddash:"⊝",CircleDot:"⊙",circledR:"®",circledS:"Ⓢ",CircleMinus:"⊖",CirclePlus:"⊕",CircleTimes:"⊗",cir:"○",cirE:"⧃",cire:"≗",cirfnint:"⨐",cirmid:"⫯",cirscir:"⧂",ClockwiseContourIntegral:"∲",CloseCurlyDoubleQuote:"”",CloseCurlyQuote:"’",clubs:"♣",clubsuit:"♣",colon:":",Colon:"∷",Colone:"⩴",colone:"≔",coloneq:"≔",comma:",",commat:"@",comp:"∁",compfn:"∘",complement:"∁",complexes:"ℂ",cong:"≅",congdot:"⩭",Congruent:"≡",conint:"∮",Conint:"∯",ContourIntegral:"∮",copf:"𝕔",Copf:"ℂ",coprod:"∐",Coproduct:"∐",copy:"©",COPY:"©",copysr:"℗",CounterClockwiseContourIntegral:"∳",crarr:"↵",cross:"✗",Cross:"⨯",Cscr:"𝒞",cscr:"𝒸",csub:"⫏",csube:"⫑",csup:"⫐",csupe:"⫒",ctdot:"⋯",cudarrl:"⤸",cudarrr:"⤵",cuepr:"⋞",cuesc:"⋟",cularr:"↶",cularrp:"⤽",cupbrcap:"⩈",cupcap:"⩆",CupCap:"≍",cup:"∪",Cup:"⋓",cupcup:"⩊",cupdot:"⊍",cupor:"⩅",cups:"∪︀",curarr:"↷",curarrm:"⤼",curlyeqprec:"⋞",curlyeqsucc:"⋟",curlyvee:"⋎",curlywedge:"⋏",curren:"¤",curvearrowleft:"↶",curvearrowright:"↷",cuvee:"⋎",cuwed:"⋏",cwconint:"∲",cwint:"∱",cylcty:"⌭",dagger:"†",Dagger:"‡",daleth:"ℸ",darr:"↓",Darr:"↡",dArr:"⇓",dash:"‐",Dashv:"⫤",dashv:"⊣",dbkarow:"⤏",dblac:"˝",Dcaron:"Ď",dcaron:"ď",Dcy:"Д",dcy:"д",ddagger:"‡",ddarr:"⇊",DD:"ⅅ",dd:"ⅆ",DDotrahd:"⤑",ddotseq:"⩷",deg:"°",Del:"∇",Delta:"Δ",delta:"δ",demptyv:"⦱",dfisht:"⥿",Dfr:"𝔇",dfr:"𝔡",dHar:"⥥",dharl:"⇃",dharr:"⇂",DiacriticalAcute:"´",DiacriticalDot:"˙",DiacriticalDoubleAcute:"˝",DiacriticalGrave:"`",DiacriticalTilde:"˜",diam:"⋄",diamond:"⋄",Diamond:"⋄",diamondsuit:"♦",diams:"♦",die:"¨",DifferentialD:"ⅆ",digamma:"ϝ",disin:"⋲",div:"÷",divide:"÷",divideontimes:"⋇",divonx:"⋇",DJcy:"Ђ",djcy:"ђ",dlcorn:"⌞",dlcrop:"⌍",dollar:"$",Dopf:"𝔻",dopf:"𝕕",Dot:"¨",dot:"˙",DotDot:"⃜",doteq:"≐",doteqdot:"≑",DotEqual:"≐",dotminus:"∸",dotplus:"∔",dotsquare:"⊡",doublebarwedge:"⌆",DoubleContourIntegral:"∯",DoubleDot:"¨",DoubleDownArrow:"⇓",DoubleLeftArrow:"⇐",DoubleLeftRightArrow:"⇔",DoubleLeftTee:"⫤",DoubleLongLeftArrow:"⟸",DoubleLongLeftRightArrow:"⟺",DoubleLongRightArrow:"⟹",DoubleRightArrow:"⇒",DoubleRightTee:"⊨",DoubleUpArrow:"⇑",DoubleUpDownArrow:"⇕",DoubleVerticalBar:"∥",DownArrowBar:"⤓",downarrow:"↓",DownArrow:"↓",Downarrow:"⇓",DownArrowUpArrow:"⇵",DownBreve:"̑",downdownarrows:"⇊",downharpoonleft:"⇃",downharpoonright:"⇂",DownLeftRightVector:"⥐",DownLeftTeeVector:"⥞",DownLeftVectorBar:"⥖",DownLeftVector:"↽",DownRightTeeVector:"⥟",DownRightVectorBar:"⥗",DownRightVector:"⇁",DownTeeArrow:"↧",DownTee:"⊤",drbkarow:"⤐",drcorn:"⌟",drcrop:"⌌",Dscr:"𝒟",dscr:"𝒹",DScy:"Ѕ",dscy:"ѕ",dsol:"⧶",Dstrok:"Đ",dstrok:"đ",dtdot:"⋱",dtri:"▿",dtrif:"▾",duarr:"⇵",duhar:"⥯",dwangle:"⦦",DZcy:"Џ",dzcy:"џ",dzigrarr:"⟿",Eacute:"É",eacute:"é",easter:"⩮",Ecaron:"Ě",ecaron:"ě",Ecirc:"Ê",ecirc:"ê",ecir:"≖",ecolon:"≕",Ecy:"Э",ecy:"э",eDDot:"⩷",Edot:"Ė",edot:"ė",eDot:"≑",ee:"ⅇ",efDot:"≒",Efr:"𝔈",efr:"𝔢",eg:"⪚",Egrave:"È",egrave:"è",egs:"⪖",egsdot:"⪘",el:"⪙",Element:"∈",elinters:"⏧",ell:"ℓ",els:"⪕",elsdot:"⪗",Emacr:"Ē",emacr:"ē",empty:"∅",emptyset:"∅",EmptySmallSquare:"◻",emptyv:"∅",EmptyVerySmallSquare:"▫",emsp13:" ",emsp14:" ",emsp:" ",ENG:"Ŋ",eng:"ŋ",ensp:" ",Eogon:"Ę",eogon:"ę",Eopf:"𝔼",eopf:"𝕖",epar:"⋕",eparsl:"⧣",eplus:"⩱",epsi:"ε",Epsilon:"Ε",epsilon:"ε",epsiv:"ϵ",eqcirc:"≖",eqcolon:"≕",eqsim:"≂",eqslantgtr:"⪖",eqslantless:"⪕",Equal:"⩵",equals:"=",EqualTilde:"≂",equest:"≟",Equilibrium:"⇌",equiv:"≡",equivDD:"⩸",eqvparsl:"⧥",erarr:"⥱",erDot:"≓",escr:"ℯ",Escr:"ℰ",esdot:"≐",Esim:"⩳",esim:"≂",Eta:"Η",eta:"η",ETH:"Ð",eth:"ð",Euml:"Ë",euml:"ë",euro:"€",excl:"!",exist:"∃",Exists:"∃",expectation:"ℰ",exponentiale:"ⅇ",ExponentialE:"ⅇ",fallingdotseq:"≒",Fcy:"Ф",fcy:"ф",female:"♀",ffilig:"ﬃ",fflig:"ﬀ",ffllig:"ﬄ",Ffr:"𝔉",ffr:"𝔣",filig:"ﬁ",FilledSmallSquare:"◼",FilledVerySmallSquare:"▪",fjlig:"fj",flat:"♭",fllig:"ﬂ",fltns:"▱",fnof:"ƒ",Fopf:"𝔽",fopf:"𝕗",forall:"∀",ForAll:"∀",fork:"⋔",forkv:"⫙",Fouriertrf:"ℱ",fpartint:"⨍",frac12:"½",frac13:"⅓",frac14:"¼",frac15:"⅕",frac16:"⅙",frac18:"⅛",frac23:"⅔",frac25:"⅖",frac34:"¾",frac35:"⅗",frac38:"⅜",frac45:"⅘",frac56:"⅚",frac58:"⅝",frac78:"⅞",frasl:"⁄",frown:"⌢",fscr:"𝒻",Fscr:"ℱ",gacute:"ǵ",Gamma:"Γ",gamma:"γ",Gammad:"Ϝ",gammad:"ϝ",gap:"⪆",Gbreve:"Ğ",gbreve:"ğ",Gcedil:"Ģ",Gcirc:"Ĝ",gcirc:"ĝ",Gcy:"Г",gcy:"г",Gdot:"Ġ",gdot:"ġ",ge:"≥",gE:"≧",gEl:"⪌",gel:"⋛",geq:"≥",geqq:"≧",geqslant:"⩾",gescc:"⪩",ges:"⩾",gesdot:"⪀",gesdoto:"⪂",gesdotol:"⪄",gesl:"⋛︀",gesles:"⪔",Gfr:"𝔊",gfr:"𝔤",gg:"≫",Gg:"⋙",ggg:"⋙",gimel:"ℷ",GJcy:"Ѓ",gjcy:"ѓ",gla:"⪥",gl:"≷",glE:"⪒",glj:"⪤",gnap:"⪊",gnapprox:"⪊",gne:"⪈",gnE:"≩",gneq:"⪈",gneqq:"≩",gnsim:"⋧",Gopf:"𝔾",gopf:"𝕘",grave:"`",GreaterEqual:"≥",GreaterEqualLess:"⋛",GreaterFullEqual:"≧",GreaterGreater:"⪢",GreaterLess:"≷",GreaterSlantEqual:"⩾",GreaterTilde:"≳",Gscr:"𝒢",gscr:"ℊ",gsim:"≳",gsime:"⪎",gsiml:"⪐",gtcc:"⪧",gtcir:"⩺",gt:">",GT:">",Gt:"≫",gtdot:"⋗",gtlPar:"⦕",gtquest:"⩼",gtrapprox:"⪆",gtrarr:"⥸",gtrdot:"⋗",gtreqless:"⋛",gtreqqless:"⪌",gtrless:"≷",gtrsim:"≳",gvertneqq:"≩︀",gvnE:"≩︀",Hacek:"ˇ",hairsp:" ",half:"½",hamilt:"ℋ",HARDcy:"Ъ",hardcy:"ъ",harrcir:"⥈",harr:"↔",hArr:"⇔",harrw:"↭",Hat:"^",hbar:"ℏ",Hcirc:"Ĥ",hcirc:"ĥ",hearts:"♥",heartsuit:"♥",hellip:"…",hercon:"⊹",hfr:"𝔥",Hfr:"ℌ",HilbertSpace:"ℋ",hksearow:"⤥",hkswarow:"⤦",hoarr:"⇿",homtht:"∻",hookleftarrow:"↩",hookrightarrow:"↪",hopf:"𝕙",Hopf:"ℍ",horbar:"―",HorizontalLine:"─",hscr:"𝒽",Hscr:"ℋ",hslash:"ℏ",Hstrok:"Ħ",hstrok:"ħ",HumpDownHump:"≎",HumpEqual:"≏",hybull:"⁃",hyphen:"‐",Iacute:"Í",iacute:"í",ic:"⁣",Icirc:"Î",icirc:"î",Icy:"И",icy:"и",Idot:"İ",IEcy:"Е",iecy:"е",iexcl:"¡",iff:"⇔",ifr:"𝔦",Ifr:"ℑ",Igrave:"Ì",igrave:"ì",ii:"ⅈ",iiiint:"⨌",iiint:"∭",iinfin:"⧜",iiota:"℩",IJlig:"Ĳ",ijlig:"ĳ",Imacr:"Ī",imacr:"ī",image:"ℑ",ImaginaryI:"ⅈ",imagline:"ℐ",imagpart:"ℑ",imath:"ı",Im:"ℑ",imof:"⊷",imped:"Ƶ",Implies:"⇒",incare:"℅",in:"∈",infin:"∞",infintie:"⧝",inodot:"ı",intcal:"⊺",int:"∫",Int:"∬",integers:"ℤ",Integral:"∫",intercal:"⊺",Intersection:"⋂",intlarhk:"⨗",intprod:"⨼",InvisibleComma:"⁣",InvisibleTimes:"⁢",IOcy:"Ё",iocy:"ё",Iogon:"Į",iogon:"į",Iopf:"𝕀",iopf:"𝕚",Iota:"Ι",iota:"ι",iprod:"⨼",iquest:"¿",iscr:"𝒾",Iscr:"ℐ",isin:"∈",isindot:"⋵",isinE:"⋹",isins:"⋴",isinsv:"⋳",isinv:"∈",it:"⁢",Itilde:"Ĩ",itilde:"ĩ",Iukcy:"І",iukcy:"і",Iuml:"Ï",iuml:"ï",Jcirc:"Ĵ",jcirc:"ĵ",Jcy:"Й",jcy:"й",Jfr:"𝔍",jfr:"𝔧",jmath:"ȷ",Jopf:"𝕁",jopf:"𝕛",Jscr:"𝒥",jscr:"𝒿",Jsercy:"Ј",jsercy:"ј",Jukcy:"Є",jukcy:"є",Kappa:"Κ",kappa:"κ",kappav:"ϰ",Kcedil:"Ķ",kcedil:"ķ",Kcy:"К",kcy:"к",Kfr:"𝔎",kfr:"𝔨",kgreen:"ĸ",KHcy:"Х",khcy:"х",KJcy:"Ќ",kjcy:"ќ",Kopf:"𝕂",kopf:"𝕜",Kscr:"𝒦",kscr:"𝓀",lAarr:"⇚",Lacute:"Ĺ",lacute:"ĺ",laemptyv:"⦴",lagran:"ℒ",Lambda:"Λ",lambda:"λ",lang:"⟨",Lang:"⟪",langd:"⦑",langle:"⟨",lap:"⪅",Laplacetrf:"ℒ",laquo:"«",larrb:"⇤",larrbfs:"⤟",larr:"←",Larr:"↞",lArr:"⇐",larrfs:"⤝",larrhk:"↩",larrlp:"↫",larrpl:"⤹",larrsim:"⥳",larrtl:"↢",latail:"⤙",lAtail:"⤛",lat:"⪫",late:"⪭",lates:"⪭︀",lbarr:"⤌",lBarr:"⤎",lbbrk:"❲",lbrace:"{",lbrack:"[",lbrke:"⦋",lbrksld:"⦏",lbrkslu:"⦍",Lcaron:"Ľ",lcaron:"ľ",Lcedil:"Ļ",lcedil:"ļ",lceil:"⌈",lcub:"{",Lcy:"Л",lcy:"л",ldca:"⤶",ldquo:"“",ldquor:"„",ldrdhar:"⥧",ldrushar:"⥋",ldsh:"↲",le:"≤",lE:"≦",LeftAngleBracket:"⟨",LeftArrowBar:"⇤",leftarrow:"←",LeftArrow:"←",Leftarrow:"⇐",LeftArrowRightArrow:"⇆",leftarrowtail:"↢",LeftCeiling:"⌈",LeftDoubleBracket:"⟦",LeftDownTeeVector:"⥡",LeftDownVectorBar:"⥙",LeftDownVector:"⇃",LeftFloor:"⌊",leftharpoondown:"↽",leftharpoonup:"↼",leftleftarrows:"⇇",leftrightarrow:"↔",LeftRightArrow:"↔",Leftrightarrow:"⇔",leftrightarrows:"⇆",leftrightharpoons:"⇋",leftrightsquigarrow:"↭",LeftRightVector:"⥎",LeftTeeArrow:"↤",LeftTee:"⊣",LeftTeeVector:"⥚",leftthreetimes:"⋋",LeftTriangleBar:"⧏",LeftTriangle:"⊲",LeftTriangleEqual:"⊴",LeftUpDownVector:"⥑",LeftUpTeeVector:"⥠",LeftUpVectorBar:"⥘",LeftUpVector:"↿",LeftVectorBar:"⥒",LeftVector:"↼",lEg:"⪋",leg:"⋚",leq:"≤",leqq:"≦",leqslant:"⩽",lescc:"⪨",les:"⩽",lesdot:"⩿",lesdoto:"⪁",lesdotor:"⪃",lesg:"⋚︀",lesges:"⪓",lessapprox:"⪅",lessdot:"⋖",lesseqgtr:"⋚",lesseqqgtr:"⪋",LessEqualGreater:"⋚",LessFullEqual:"≦",LessGreater:"≶",lessgtr:"≶",LessLess:"⪡",lesssim:"≲",LessSlantEqual:"⩽",LessTilde:"≲",lfisht:"⥼",lfloor:"⌊",Lfr:"𝔏",lfr:"𝔩",lg:"≶",lgE:"⪑",lHar:"⥢",lhard:"↽",lharu:"↼",lharul:"⥪",lhblk:"▄",LJcy:"Љ",ljcy:"љ",llarr:"⇇",ll:"≪",Ll:"⋘",llcorner:"⌞",Lleftarrow:"⇚",llhard:"⥫",lltri:"◺",Lmidot:"Ŀ",lmidot:"ŀ",lmoustache:"⎰",lmoust:"⎰",lnap:"⪉",lnapprox:"⪉",lne:"⪇",lnE:"≨",lneq:"⪇",lneqq:"≨",lnsim:"⋦",loang:"⟬",loarr:"⇽",lobrk:"⟦",longleftarrow:"⟵",LongLeftArrow:"⟵",Longleftarrow:"⟸",longleftrightarrow:"⟷",LongLeftRightArrow:"⟷",Longleftrightarrow:"⟺",longmapsto:"⟼",longrightarrow:"⟶",LongRightArrow:"⟶",Longrightarrow:"⟹",looparrowleft:"↫",looparrowright:"↬",lopar:"⦅",Lopf:"𝕃",lopf:"𝕝",loplus:"⨭",lotimes:"⨴",lowast:"∗",lowbar:"_",LowerLeftArrow:"↙",LowerRightArrow:"↘",loz:"◊",lozenge:"◊",lozf:"⧫",lpar:"(",lparlt:"⦓",lrarr:"⇆",lrcorner:"⌟",lrhar:"⇋",lrhard:"⥭",lrm:"‎",lrtri:"⊿",lsaquo:"‹",lscr:"𝓁",Lscr:"ℒ",lsh:"↰",Lsh:"↰",lsim:"≲",lsime:"⪍",lsimg:"⪏",lsqb:"[",lsquo:"‘",lsquor:"‚",Lstrok:"Ł",lstrok:"ł",ltcc:"⪦",ltcir:"⩹",lt:"<",LT:"<",Lt:"≪",ltdot:"⋖",lthree:"⋋",ltimes:"⋉",ltlarr:"⥶",ltquest:"⩻",ltri:"◃",ltrie:"⊴",ltrif:"◂",ltrPar:"⦖",lurdshar:"⥊",luruhar:"⥦",lvertneqq:"≨︀",lvnE:"≨︀",macr:"¯",male:"♂",malt:"✠",maltese:"✠",Map:"⤅",map:"↦",mapsto:"↦",mapstodown:"↧",mapstoleft:"↤",mapstoup:"↥",marker:"▮",mcomma:"⨩",Mcy:"М",mcy:"м",mdash:"—",mDDot:"∺",measuredangle:"∡",MediumSpace:" ",Mellintrf:"ℳ",Mfr:"𝔐",mfr:"𝔪",mho:"℧",micro:"µ",midast:"*",midcir:"⫰",mid:"∣",middot:"·",minusb:"⊟",minus:"−",minusd:"∸",minusdu:"⨪",MinusPlus:"∓",mlcp:"⫛",mldr:"…",mnplus:"∓",models:"⊧",Mopf:"𝕄",mopf:"𝕞",mp:"∓",mscr:"𝓂",Mscr:"ℳ",mstpos:"∾",Mu:"Μ",mu:"μ",multimap:"⊸",mumap:"⊸",nabla:"∇",Nacute:"Ń",nacute:"ń",nang:"∠⃒",nap:"≉",napE:"⩰̸",napid:"≋̸",napos:"ŉ",napprox:"≉",natural:"♮",naturals:"ℕ",natur:"♮",nbsp:" ",nbump:"≎̸",nbumpe:"≏̸",ncap:"⩃",Ncaron:"Ň",ncaron:"ň",Ncedil:"Ņ",ncedil:"ņ",ncong:"≇",ncongdot:"⩭̸",ncup:"⩂",Ncy:"Н",ncy:"н",ndash:"–",nearhk:"⤤",nearr:"↗",neArr:"⇗",nearrow:"↗",ne:"≠",nedot:"≐̸",NegativeMediumSpace:"​",NegativeThickSpace:"​",NegativeThinSpace:"​",NegativeVeryThinSpace:"​",nequiv:"≢",nesear:"⤨",nesim:"≂̸",NestedGreaterGreater:"≫",NestedLessLess:"≪",NewLine:"\n",nexist:"∄",nexists:"∄",Nfr:"𝔑",nfr:"𝔫",ngE:"≧̸",nge:"≱",ngeq:"≱",ngeqq:"≧̸",ngeqslant:"⩾̸",nges:"⩾̸",nGg:"⋙̸",ngsim:"≵",nGt:"≫⃒",ngt:"≯",ngtr:"≯",nGtv:"≫̸",nharr:"↮",nhArr:"⇎",nhpar:"⫲",ni:"∋",nis:"⋼",nisd:"⋺",niv:"∋",NJcy:"Њ",njcy:"њ",nlarr:"↚",nlArr:"⇍",nldr:"‥",nlE:"≦̸",nle:"≰",nleftarrow:"↚",nLeftarrow:"⇍",nleftrightarrow:"↮",nLeftrightarrow:"⇎",nleq:"≰",nleqq:"≦̸",nleqslant:"⩽̸",nles:"⩽̸",nless:"≮",nLl:"⋘̸",nlsim:"≴",nLt:"≪⃒",nlt:"≮",nltri:"⋪",nltrie:"⋬",nLtv:"≪̸",nmid:"∤",NoBreak:"⁠",NonBreakingSpace:" ",nopf:"𝕟",Nopf:"ℕ",Not:"⫬",not:"¬",NotCongruent:"≢",NotCupCap:"≭",NotDoubleVerticalBar:"∦",NotElement:"∉",NotEqual:"≠",NotEqualTilde:"≂̸",NotExists:"∄",NotGreater:"≯",NotGreaterEqual:"≱",NotGreaterFullEqual:"≧̸",NotGreaterGreater:"≫̸",NotGreaterLess:"≹",NotGreaterSlantEqual:"⩾̸",NotGreaterTilde:"≵",NotHumpDownHump:"≎̸",NotHumpEqual:"≏̸",notin:"∉",notindot:"⋵̸",notinE:"⋹̸",notinva:"∉",notinvb:"⋷",notinvc:"⋶",NotLeftTriangleBar:"⧏̸",NotLeftTriangle:"⋪",NotLeftTriangleEqual:"⋬",NotLess:"≮",NotLessEqual:"≰",NotLessGreater:"≸",NotLessLess:"≪̸",NotLessSlantEqual:"⩽̸",NotLessTilde:"≴",NotNestedGreaterGreater:"⪢̸",NotNestedLessLess:"⪡̸",notni:"∌",notniva:"∌",notnivb:"⋾",notnivc:"⋽",NotPrecedes:"⊀",NotPrecedesEqual:"⪯̸",NotPrecedesSlantEqual:"⋠",NotReverseElement:"∌",NotRightTriangleBar:"⧐̸",NotRightTriangle:"⋫",NotRightTriangleEqual:"⋭",NotSquareSubset:"⊏̸",NotSquareSubsetEqual:"⋢",NotSquareSuperset:"⊐̸",NotSquareSupersetEqual:"⋣",NotSubset:"⊂⃒",NotSubsetEqual:"⊈",NotSucceeds:"⊁",NotSucceedsEqual:"⪰̸",NotSucceedsSlantEqual:"⋡",NotSucceedsTilde:"≿̸",NotSuperset:"⊃⃒",NotSupersetEqual:"⊉",NotTilde:"≁",NotTildeEqual:"≄",NotTildeFullEqual:"≇",NotTildeTilde:"≉",NotVerticalBar:"∤",nparallel:"∦",npar:"∦",nparsl:"⫽⃥",npart:"∂̸",npolint:"⨔",npr:"⊀",nprcue:"⋠",nprec:"⊀",npreceq:"⪯̸",npre:"⪯̸",nrarrc:"⤳̸",nrarr:"↛",nrArr:"⇏",nrarrw:"↝̸",nrightarrow:"↛",nRightarrow:"⇏",nrtri:"⋫",nrtrie:"⋭",nsc:"⊁",nsccue:"⋡",nsce:"⪰̸",Nscr:"𝒩",nscr:"𝓃",nshortmid:"∤",nshortparallel:"∦",nsim:"≁",nsime:"≄",nsimeq:"≄",nsmid:"∤",nspar:"∦",nsqsube:"⋢",nsqsupe:"⋣",nsub:"⊄",nsubE:"⫅̸",nsube:"⊈",nsubset:"⊂⃒",nsubseteq:"⊈",nsubseteqq:"⫅̸",nsucc:"⊁",nsucceq:"⪰̸",nsup:"⊅",nsupE:"⫆̸",nsupe:"⊉",nsupset:"⊃⃒",nsupseteq:"⊉",nsupseteqq:"⫆̸",ntgl:"≹",Ntilde:"Ñ",ntilde:"ñ",ntlg:"≸",ntriangleleft:"⋪",ntrianglelefteq:"⋬",ntriangleright:"⋫",ntrianglerighteq:"⋭",Nu:"Ν",nu:"ν",num:"#",numero:"№",numsp:" ",nvap:"≍⃒",nvdash:"⊬",nvDash:"⊭",nVdash:"⊮",nVDash:"⊯",nvge:"≥⃒",nvgt:">⃒",nvHarr:"⤄",nvinfin:"⧞",nvlArr:"⤂",nvle:"≤⃒",nvlt:"<⃒",nvltrie:"⊴⃒",nvrArr:"⤃",nvrtrie:"⊵⃒",nvsim:"∼⃒",nwarhk:"⤣",nwarr:"↖",nwArr:"⇖",nwarrow:"↖",nwnear:"⤧",Oacute:"Ó",oacute:"ó",oast:"⊛",Ocirc:"Ô",ocirc:"ô",ocir:"⊚",Ocy:"О",ocy:"о",odash:"⊝",Odblac:"Ő",odblac:"ő",odiv:"⨸",odot:"⊙",odsold:"⦼",OElig:"Œ",oelig:"œ",ofcir:"⦿",Ofr:"𝔒",ofr:"𝔬",ogon:"˛",Ograve:"Ò",ograve:"ò",ogt:"⧁",ohbar:"⦵",ohm:"Ω",oint:"∮",olarr:"↺",olcir:"⦾",olcross:"⦻",oline:"‾",olt:"⧀",Omacr:"Ō",omacr:"ō",Omega:"Ω",omega:"ω",Omicron:"Ο",omicron:"ο",omid:"⦶",ominus:"⊖",Oopf:"𝕆",oopf:"𝕠",opar:"⦷",OpenCurlyDoubleQuote:"“",OpenCurlyQuote:"‘",operp:"⦹",oplus:"⊕",orarr:"↻",Or:"⩔",or:"∨",ord:"⩝",order:"ℴ",orderof:"ℴ",ordf:"ª",ordm:"º",origof:"⊶",oror:"⩖",orslope:"⩗",orv:"⩛",oS:"Ⓢ",Oscr:"𝒪",oscr:"ℴ",Oslash:"Ø",oslash:"ø",osol:"⊘",Otilde:"Õ",otilde:"õ",otimesas:"⨶",Otimes:"⨷",otimes:"⊗",Ouml:"Ö",ouml:"ö",ovbar:"⌽",OverBar:"‾",OverBrace:"⏞",OverBracket:"⎴",OverParenthesis:"⏜",para:"¶",parallel:"∥",par:"∥",parsim:"⫳",parsl:"⫽",part:"∂",PartialD:"∂",Pcy:"П",pcy:"п",percnt:"%",period:".",permil:"‰",perp:"⊥",pertenk:"‱",Pfr:"𝔓",pfr:"𝔭",Phi:"Φ",phi:"φ",phiv:"ϕ",phmmat:"ℳ",phone:"☎",Pi:"Π",pi:"π",pitchfork:"⋔",piv:"ϖ",planck:"ℏ",planckh:"ℎ",plankv:"ℏ",plusacir:"⨣",plusb:"⊞",pluscir:"⨢",plus:"+",plusdo:"∔",plusdu:"⨥",pluse:"⩲",PlusMinus:"±",plusmn:"±",plussim:"⨦",plustwo:"⨧",pm:"±",Poincareplane:"ℌ",pointint:"⨕",popf:"𝕡",Popf:"ℙ",pound:"£",prap:"⪷",Pr:"⪻",pr:"≺",prcue:"≼",precapprox:"⪷",prec:"≺",preccurlyeq:"≼",Precedes:"≺",PrecedesEqual:"⪯",PrecedesSlantEqual:"≼",PrecedesTilde:"≾",preceq:"⪯",precnapprox:"⪹",precneqq:"⪵",precnsim:"⋨",pre:"⪯",prE:"⪳",precsim:"≾",prime:"′",Prime:"″",primes:"ℙ",prnap:"⪹",prnE:"⪵",prnsim:"⋨",prod:"∏",Product:"∏",profalar:"⌮",profline:"⌒",profsurf:"⌓",prop:"∝",Proportional:"∝",Proportion:"∷",propto:"∝",prsim:"≾",prurel:"⊰",Pscr:"𝒫",pscr:"𝓅",Psi:"Ψ",psi:"ψ",puncsp:" ",Qfr:"𝔔",qfr:"𝔮",qint:"⨌",qopf:"𝕢",Qopf:"ℚ",qprime:"⁗",Qscr:"𝒬",qscr:"𝓆",quaternions:"ℍ",quatint:"⨖",quest:"?",questeq:"≟",quot:'"',QUOT:'"',rAarr:"⇛",race:"∽̱",Racute:"Ŕ",racute:"ŕ",radic:"√",raemptyv:"⦳",rang:"⟩",Rang:"⟫",rangd:"⦒",range:"⦥",rangle:"⟩",raquo:"»",rarrap:"⥵",rarrb:"⇥",rarrbfs:"⤠",rarrc:"⤳",rarr:"→",Rarr:"↠",rArr:"⇒",rarrfs:"⤞",rarrhk:"↪",rarrlp:"↬",rarrpl:"⥅",rarrsim:"⥴",Rarrtl:"⤖",rarrtl:"↣",rarrw:"↝",ratail:"⤚",rAtail:"⤜",ratio:"∶",rationals:"ℚ",rbarr:"⤍",rBarr:"⤏",RBarr:"⤐",rbbrk:"❳",rbrace:"}",rbrack:"]",rbrke:"⦌",rbrksld:"⦎",rbrkslu:"⦐",Rcaron:"Ř",rcaron:"ř",Rcedil:"Ŗ",rcedil:"ŗ",rceil:"⌉",rcub:"}",Rcy:"Р",rcy:"р",rdca:"⤷",rdldhar:"⥩",rdquo:"”",rdquor:"”",rdsh:"↳",real:"ℜ",realine:"ℛ",realpart:"ℜ",reals:"ℝ",Re:"ℜ",rect:"▭",reg:"®",REG:"®",ReverseElement:"∋",ReverseEquilibrium:"⇋",ReverseUpEquilibrium:"⥯",rfisht:"⥽",rfloor:"⌋",rfr:"𝔯",Rfr:"ℜ",rHar:"⥤",rhard:"⇁",rharu:"⇀",rharul:"⥬",Rho:"Ρ",rho:"ρ",rhov:"ϱ",RightAngleBracket:"⟩",RightArrowBar:"⇥",rightarrow:"→",RightArrow:"→",Rightarrow:"⇒",RightArrowLeftArrow:"⇄",rightarrowtail:"↣",RightCeiling:"⌉",RightDoubleBracket:"⟧",RightDownTeeVector:"⥝",RightDownVectorBar:"⥕",RightDownVector:"⇂",RightFloor:"⌋",rightharpoondown:"⇁",rightharpoonup:"⇀",rightleftarrows:"⇄",rightleftharpoons:"⇌",rightrightarrows:"⇉",rightsquigarrow:"↝",RightTeeArrow:"↦",RightTee:"⊢",RightTeeVector:"⥛",rightthreetimes:"⋌",RightTriangleBar:"⧐",RightTriangle:"⊳",RightTriangleEqual:"⊵",RightUpDownVector:"⥏",RightUpTeeVector:"⥜",RightUpVectorBar:"⥔",RightUpVector:"↾",RightVectorBar:"⥓",RightVector:"⇀",ring:"˚",risingdotseq:"≓",rlarr:"⇄",rlhar:"⇌",rlm:"‏",rmoustache:"⎱",rmoust:"⎱",rnmid:"⫮",roang:"⟭",roarr:"⇾",robrk:"⟧",ropar:"⦆",ropf:"𝕣",Ropf:"ℝ",roplus:"⨮",rotimes:"⨵",RoundImplies:"⥰",rpar:")",rpargt:"⦔",rppolint:"⨒",rrarr:"⇉",Rrightarrow:"⇛",rsaquo:"›",rscr:"𝓇",Rscr:"ℛ",rsh:"↱",Rsh:"↱",rsqb:"]",rsquo:"’",rsquor:"’",rthree:"⋌",rtimes:"⋊",rtri:"▹",rtrie:"⊵",rtrif:"▸",rtriltri:"⧎",RuleDelayed:"⧴",ruluhar:"⥨",rx:"℞",Sacute:"Ś",sacute:"ś",sbquo:"‚",scap:"⪸",Scaron:"Š",scaron:"š",Sc:"⪼",sc:"≻",sccue:"≽",sce:"⪰",scE:"⪴",Scedil:"Ş",scedil:"ş",Scirc:"Ŝ",scirc:"ŝ",scnap:"⪺",scnE:"⪶",scnsim:"⋩",scpolint:"⨓",scsim:"≿",Scy:"С",scy:"с",sdotb:"⊡",sdot:"⋅",sdote:"⩦",searhk:"⤥",searr:"↘",seArr:"⇘",searrow:"↘",sect:"§",semi:";",seswar:"⤩",setminus:"∖",setmn:"∖",sext:"✶",Sfr:"𝔖",sfr:"𝔰",sfrown:"⌢",sharp:"♯",SHCHcy:"Щ",shchcy:"щ",SHcy:"Ш",shcy:"ш",ShortDownArrow:"↓",ShortLeftArrow:"←",shortmid:"∣",shortparallel:"∥",ShortRightArrow:"→",ShortUpArrow:"↑",shy:"­",Sigma:"Σ",sigma:"σ",sigmaf:"ς",sigmav:"ς",sim:"∼",simdot:"⩪",sime:"≃",simeq:"≃",simg:"⪞",simgE:"⪠",siml:"⪝",simlE:"⪟",simne:"≆",simplus:"⨤",simrarr:"⥲",slarr:"←",SmallCircle:"∘",smallsetminus:"∖",smashp:"⨳",smeparsl:"⧤",smid:"∣",smile:"⌣",smt:"⪪",smte:"⪬",smtes:"⪬︀",SOFTcy:"Ь",softcy:"ь",solbar:"⌿",solb:"⧄",sol:"/",Sopf:"𝕊",sopf:"𝕤",spades:"♠",spadesuit:"♠",spar:"∥",sqcap:"⊓",sqcaps:"⊓︀",sqcup:"⊔",sqcups:"⊔︀",Sqrt:"√",sqsub:"⊏",sqsube:"⊑",sqsubset:"⊏",sqsubseteq:"⊑",sqsup:"⊐",sqsupe:"⊒",sqsupset:"⊐",sqsupseteq:"⊒",square:"□",Square:"□",SquareIntersection:"⊓",SquareSubset:"⊏",SquareSubsetEqual:"⊑",SquareSuperset:"⊐",SquareSupersetEqual:"⊒",SquareUnion:"⊔",squarf:"▪",squ:"□",squf:"▪",srarr:"→",Sscr:"𝒮",sscr:"𝓈",ssetmn:"∖",ssmile:"⌣",sstarf:"⋆",Star:"⋆",star:"☆",starf:"★",straightepsilon:"ϵ",straightphi:"ϕ",strns:"¯",sub:"⊂",Sub:"⋐",subdot:"⪽",subE:"⫅",sube:"⊆",subedot:"⫃",submult:"⫁",subnE:"⫋",subne:"⊊",subplus:"⪿",subrarr:"⥹",subset:"⊂",Subset:"⋐",subseteq:"⊆",subseteqq:"⫅",SubsetEqual:"⊆",subsetneq:"⊊",subsetneqq:"⫋",subsim:"⫇",subsub:"⫕",subsup:"⫓",succapprox:"⪸",succ:"≻",succcurlyeq:"≽",Succeeds:"≻",SucceedsEqual:"⪰",SucceedsSlantEqual:"≽",SucceedsTilde:"≿",succeq:"⪰",succnapprox:"⪺",succneqq:"⪶",succnsim:"⋩",succsim:"≿",SuchThat:"∋",sum:"∑",Sum:"∑",sung:"♪",sup1:"¹",sup2:"²",sup3:"³",sup:"⊃",Sup:"⋑",supdot:"⪾",supdsub:"⫘",supE:"⫆",supe:"⊇",supedot:"⫄",Superset:"⊃",SupersetEqual:"⊇",suphsol:"⟉",suphsub:"⫗",suplarr:"⥻",supmult:"⫂",supnE:"⫌",supne:"⊋",supplus:"⫀",supset:"⊃",Supset:"⋑",supseteq:"⊇",supseteqq:"⫆",supsetneq:"⊋",supsetneqq:"⫌",supsim:"⫈",supsub:"⫔",supsup:"⫖",swarhk:"⤦",swarr:"↙",swArr:"⇙",swarrow:"↙",swnwar:"⤪",szlig:"ß",Tab:"\t",target:"⌖",Tau:"Τ",tau:"τ",tbrk:"⎴",Tcaron:"Ť",tcaron:"ť",Tcedil:"Ţ",tcedil:"ţ",Tcy:"Т",tcy:"т",tdot:"⃛",telrec:"⌕",Tfr:"𝔗",tfr:"𝔱",there4:"∴",therefore:"∴",Therefore:"∴",Theta:"Θ",theta:"θ",thetasym:"ϑ",thetav:"ϑ",thickapprox:"≈",thicksim:"∼",ThickSpace:"  ",ThinSpace:" ",thinsp:" ",thkap:"≈",thksim:"∼",THORN:"Þ",thorn:"þ",tilde:"˜",Tilde:"∼",TildeEqual:"≃",TildeFullEqual:"≅",TildeTilde:"≈",timesbar:"⨱",timesb:"⊠",times:"×",timesd:"⨰",tint:"∭",toea:"⤨",topbot:"⌶",topcir:"⫱",top:"⊤",Topf:"𝕋",topf:"𝕥",topfork:"⫚",tosa:"⤩",tprime:"‴",trade:"™",TRADE:"™",triangle:"▵",triangledown:"▿",triangleleft:"◃",trianglelefteq:"⊴",triangleq:"≜",triangleright:"▹",trianglerighteq:"⊵",tridot:"◬",trie:"≜",triminus:"⨺",TripleDot:"⃛",triplus:"⨹",trisb:"⧍",tritime:"⨻",trpezium:"⏢",Tscr:"𝒯",tscr:"𝓉",TScy:"Ц",tscy:"ц",TSHcy:"Ћ",tshcy:"ћ",Tstrok:"Ŧ",tstrok:"ŧ",twixt:"≬",twoheadleftarrow:"↞",twoheadrightarrow:"↠",Uacute:"Ú",uacute:"ú",uarr:"↑",Uarr:"↟",uArr:"⇑",Uarrocir:"⥉",Ubrcy:"Ў",ubrcy:"ў",Ubreve:"Ŭ",ubreve:"ŭ",Ucirc:"Û",ucirc:"û",Ucy:"У",ucy:"у",udarr:"⇅",Udblac:"Ű",udblac:"ű",udhar:"⥮",ufisht:"⥾",Ufr:"𝔘",ufr:"𝔲",Ugrave:"Ù",ugrave:"ù",uHar:"⥣",uharl:"↿",uharr:"↾",uhblk:"▀",ulcorn:"⌜",ulcorner:"⌜",ulcrop:"⌏",ultri:"◸",Umacr:"Ū",umacr:"ū",uml:"¨",UnderBar:"_",UnderBrace:"⏟",UnderBracket:"⎵",UnderParenthesis:"⏝",Union:"⋃",UnionPlus:"⊎",Uogon:"Ų",uogon:"ų",Uopf:"𝕌",uopf:"𝕦",UpArrowBar:"⤒",uparrow:"↑",UpArrow:"↑",Uparrow:"⇑",UpArrowDownArrow:"⇅",updownarrow:"↕",UpDownArrow:"↕",Updownarrow:"⇕",UpEquilibrium:"⥮",upharpoonleft:"↿",upharpoonright:"↾",uplus:"⊎",UpperLeftArrow:"↖",UpperRightArrow:"↗",upsi:"υ",Upsi:"ϒ",upsih:"ϒ",Upsilon:"Υ",upsilon:"υ",UpTeeArrow:"↥",UpTee:"⊥",upuparrows:"⇈",urcorn:"⌝",urcorner:"⌝",urcrop:"⌎",Uring:"Ů",uring:"ů",urtri:"◹",Uscr:"𝒰",uscr:"𝓊",utdot:"⋰",Utilde:"Ũ",utilde:"ũ",utri:"▵",utrif:"▴",uuarr:"⇈",Uuml:"Ü",uuml:"ü",uwangle:"⦧",vangrt:"⦜",varepsilon:"ϵ",varkappa:"ϰ",varnothing:"∅",varphi:"ϕ",varpi:"ϖ",varpropto:"∝",varr:"↕",vArr:"⇕",varrho:"ϱ",varsigma:"ς",varsubsetneq:"⊊︀",varsubsetneqq:"⫋︀",varsupsetneq:"⊋︀",varsupsetneqq:"⫌︀",vartheta:"ϑ",vartriangleleft:"⊲",vartriangleright:"⊳",vBar:"⫨",Vbar:"⫫",vBarv:"⫩",Vcy:"В",vcy:"в",vdash:"⊢",vDash:"⊨",Vdash:"⊩",VDash:"⊫",Vdashl:"⫦",veebar:"⊻",vee:"∨",Vee:"⋁",veeeq:"≚",vellip:"⋮",verbar:"|",Verbar:"‖",vert:"|",Vert:"‖",VerticalBar:"∣",VerticalLine:"|",VerticalSeparator:"❘",VerticalTilde:"≀",VeryThinSpace:" ",Vfr:"𝔙",vfr:"𝔳",vltri:"⊲",vnsub:"⊂⃒",vnsup:"⊃⃒",Vopf:"𝕍",vopf:"𝕧",vprop:"∝",vrtri:"⊳",Vscr:"𝒱",vscr:"𝓋",vsubnE:"⫋︀",vsubne:"⊊︀",vsupnE:"⫌︀",vsupne:"⊋︀",Vvdash:"⊪",vzigzag:"⦚",Wcirc:"Ŵ",wcirc:"ŵ",wedbar:"⩟",wedge:"∧",Wedge:"⋀",wedgeq:"≙",weierp:"℘",Wfr:"𝔚",wfr:"𝔴",Wopf:"𝕎",wopf:"𝕨",wp:"℘",wr:"≀",wreath:"≀",Wscr:"𝒲",wscr:"𝓌",xcap:"⋂",xcirc:"◯",xcup:"⋃",xdtri:"▽",Xfr:"𝔛",xfr:"𝔵",xharr:"⟷",xhArr:"⟺",Xi:"Ξ",xi:"ξ",xlarr:"⟵",xlArr:"⟸",xmap:"⟼",xnis:"⋻",xodot:"⨀",Xopf:"𝕏",xopf:"𝕩",xoplus:"⨁",xotime:"⨂",xrarr:"⟶",xrArr:"⟹",Xscr:"𝒳",xscr:"𝓍",xsqcup:"⨆",xuplus:"⨄",xutri:"△",xvee:"⋁",xwedge:"⋀",Yacute:"Ý",yacute:"ý",YAcy:"Я",yacy:"я",Ycirc:"Ŷ",ycirc:"ŷ",Ycy:"Ы",ycy:"ы",yen:"¥",Yfr:"𝔜",yfr:"𝔶",YIcy:"Ї",yicy:"ї",Yopf:"𝕐",yopf:"𝕪",Yscr:"𝒴",yscr:"𝓎",YUcy:"Ю",yucy:"ю",yuml:"ÿ",Yuml:"Ÿ",Zacute:"Ź",zacute:"ź",Zcaron:"Ž",zcaron:"ž",Zcy:"З",zcy:"з",Zdot:"Ż",zdot:"ż",zeetrf:"ℨ",ZeroWidthSpace:"​",Zeta:"Ζ",zeta:"ζ",zfr:"𝔷",Zfr:"ℨ",ZHcy:"Ж",zhcy:"ж",zigrarr:"⇝",zopf:"𝕫",Zopf:"ℤ",Zscr:"𝒵",zscr:"𝓏",zwj:"‍",zwnj:"‌"},co=(so=Object.freeze({__proto__:null,Aacute:"Á",aacute:"á",Abreve:"Ă",abreve:"ă",ac:"∾",acd:"∿",acE:"∾̳",Acirc:"Â",acirc:"â",acute:"´",Acy:"А",acy:"а",AElig:"Æ",aelig:"æ",af:"⁡",Afr:"𝔄",afr:"𝔞",Agrave:"À",agrave:"à",alefsym:"ℵ",aleph:"ℵ",Alpha:"Α",alpha:"α",Amacr:"Ā",amacr:"ā",amalg:"⨿",amp:"&",AMP:"&",andand:"⩕",And:"⩓",and:"∧",andd:"⩜",andslope:"⩘",andv:"⩚",ang:"∠",ange:"⦤",angle:"∠",angmsdaa:"⦨",angmsdab:"⦩",angmsdac:"⦪",angmsdad:"⦫",angmsdae:"⦬",angmsdaf:"⦭",angmsdag:"⦮",angmsdah:"⦯",angmsd:"∡",angrt:"∟",angrtvb:"⊾",angrtvbd:"⦝",angsph:"∢",angst:"Å",angzarr:"⍼",Aogon:"Ą",aogon:"ą",Aopf:"𝔸",aopf:"𝕒",apacir:"⩯",ap:"≈",apE:"⩰",ape:"≊",apid:"≋",apos:"'",ApplyFunction:"⁡",approx:"≈",approxeq:"≊",Aring:"Å",aring:"å",Ascr:"𝒜",ascr:"𝒶",Assign:"≔",ast:"*",asymp:"≈",asympeq:"≍",Atilde:"Ã",atilde:"ã",Auml:"Ä",auml:"ä",awconint:"∳",awint:"⨑",backcong:"≌",backepsilon:"϶",backprime:"‵",backsim:"∽",backsimeq:"⋍",Backslash:"∖",Barv:"⫧",barvee:"⊽",barwed:"⌅",Barwed:"⌆",barwedge:"⌅",bbrk:"⎵",bbrktbrk:"⎶",bcong:"≌",Bcy:"Б",bcy:"б",bdquo:"„",becaus:"∵",because:"∵",Because:"∵",bemptyv:"⦰",bepsi:"϶",bernou:"ℬ",Bernoullis:"ℬ",Beta:"Β",beta:"β",beth:"ℶ",between:"≬",Bfr:"𝔅",bfr:"𝔟",bigcap:"⋂",bigcirc:"◯",bigcup:"⋃",bigodot:"⨀",bigoplus:"⨁",bigotimes:"⨂",bigsqcup:"⨆",bigstar:"★",bigtriangledown:"▽",bigtriangleup:"△",biguplus:"⨄",bigvee:"⋁",bigwedge:"⋀",bkarow:"⤍",blacklozenge:"⧫",blacksquare:"▪",blacktriangle:"▴",blacktriangledown:"▾",blacktriangleleft:"◂",blacktriangleright:"▸",blank:"␣",blk12:"▒",blk14:"░",blk34:"▓",block:"█",bne:"=⃥",bnequiv:"≡⃥",bNot:"⫭",bnot:"⌐",Bopf:"𝔹",bopf:"𝕓",bot:"⊥",bottom:"⊥",bowtie:"⋈",boxbox:"⧉",boxdl:"┐",boxdL:"╕",boxDl:"╖",boxDL:"╗",boxdr:"┌",boxdR:"╒",boxDr:"╓",boxDR:"╔",boxh:"─",boxH:"═",boxhd:"┬",boxHd:"╤",boxhD:"╥",boxHD:"╦",boxhu:"┴",boxHu:"╧",boxhU:"╨",boxHU:"╩",boxminus:"⊟",boxplus:"⊞",boxtimes:"⊠",boxul:"┘",boxuL:"╛",boxUl:"╜",boxUL:"╝",boxur:"└",boxuR:"╘",boxUr:"╙",boxUR:"╚",boxv:"│",boxV:"║",boxvh:"┼",boxvH:"╪",boxVh:"╫",boxVH:"╬",boxvl:"┤",boxvL:"╡",boxVl:"╢",boxVL:"╣",boxvr:"├",boxvR:"╞",boxVr:"╟",boxVR:"╠",bprime:"‵",breve:"˘",Breve:"˘",brvbar:"¦",bscr:"𝒷",Bscr:"ℬ",bsemi:"⁏",bsim:"∽",bsime:"⋍",bsolb:"⧅",bsol:"\\",bsolhsub:"⟈",bull:"•",bullet:"•",bump:"≎",bumpE:"⪮",bumpe:"≏",Bumpeq:"≎",bumpeq:"≏",Cacute:"Ć",cacute:"ć",capand:"⩄",capbrcup:"⩉",capcap:"⩋",cap:"∩",Cap:"⋒",capcup:"⩇",capdot:"⩀",CapitalDifferentialD:"ⅅ",caps:"∩︀",caret:"⁁",caron:"ˇ",Cayleys:"ℭ",ccaps:"⩍",Ccaron:"Č",ccaron:"č",Ccedil:"Ç",ccedil:"ç",Ccirc:"Ĉ",ccirc:"ĉ",Cconint:"∰",ccups:"⩌",ccupssm:"⩐",Cdot:"Ċ",cdot:"ċ",cedil:"¸",Cedilla:"¸",cemptyv:"⦲",cent:"¢",centerdot:"·",CenterDot:"·",cfr:"𝔠",Cfr:"ℭ",CHcy:"Ч",chcy:"ч",check:"✓",checkmark:"✓",Chi:"Χ",chi:"χ",circ:"ˆ",circeq:"≗",circlearrowleft:"↺",circlearrowright:"↻",circledast:"⊛",circledcirc:"⊚",circleddash:"⊝",CircleDot:"⊙",circledR:"®",circledS:"Ⓢ",CircleMinus:"⊖",CirclePlus:"⊕",CircleTimes:"⊗",cir:"○",cirE:"⧃",cire:"≗",cirfnint:"⨐",cirmid:"⫯",cirscir:"⧂",ClockwiseContourIntegral:"∲",CloseCurlyDoubleQuote:"”",CloseCurlyQuote:"’",clubs:"♣",clubsuit:"♣",colon:":",Colon:"∷",Colone:"⩴",colone:"≔",coloneq:"≔",comma:",",commat:"@",comp:"∁",compfn:"∘",complement:"∁",complexes:"ℂ",cong:"≅",congdot:"⩭",Congruent:"≡",conint:"∮",Conint:"∯",ContourIntegral:"∮",copf:"𝕔",Copf:"ℂ",coprod:"∐",Coproduct:"∐",copy:"©",COPY:"©",copysr:"℗",CounterClockwiseContourIntegral:"∳",crarr:"↵",cross:"✗",Cross:"⨯",Cscr:"𝒞",cscr:"𝒸",csub:"⫏",csube:"⫑",csup:"⫐",csupe:"⫒",ctdot:"⋯",cudarrl:"⤸",cudarrr:"⤵",cuepr:"⋞",cuesc:"⋟",cularr:"↶",cularrp:"⤽",cupbrcap:"⩈",cupcap:"⩆",CupCap:"≍",cup:"∪",Cup:"⋓",cupcup:"⩊",cupdot:"⊍",cupor:"⩅",cups:"∪︀",curarr:"↷",curarrm:"⤼",curlyeqprec:"⋞",curlyeqsucc:"⋟",curlyvee:"⋎",curlywedge:"⋏",curren:"¤",curvearrowleft:"↶",curvearrowright:"↷",cuvee:"⋎",cuwed:"⋏",cwconint:"∲",cwint:"∱",cylcty:"⌭",dagger:"†",Dagger:"‡",daleth:"ℸ",darr:"↓",Darr:"↡",dArr:"⇓",dash:"‐",Dashv:"⫤",dashv:"⊣",dbkarow:"⤏",dblac:"˝",Dcaron:"Ď",dcaron:"ď",Dcy:"Д",dcy:"д",ddagger:"‡",ddarr:"⇊",DD:"ⅅ",dd:"ⅆ",DDotrahd:"⤑",ddotseq:"⩷",deg:"°",Del:"∇",Delta:"Δ",delta:"δ",demptyv:"⦱",dfisht:"⥿",Dfr:"𝔇",dfr:"𝔡",dHar:"⥥",dharl:"⇃",dharr:"⇂",DiacriticalAcute:"´",DiacriticalDot:"˙",DiacriticalDoubleAcute:"˝",DiacriticalGrave:"`",DiacriticalTilde:"˜",diam:"⋄",diamond:"⋄",Diamond:"⋄",diamondsuit:"♦",diams:"♦",die:"¨",DifferentialD:"ⅆ",digamma:"ϝ",disin:"⋲",div:"÷",divide:"÷",divideontimes:"⋇",divonx:"⋇",DJcy:"Ђ",djcy:"ђ",dlcorn:"⌞",dlcrop:"⌍",dollar:"$",Dopf:"𝔻",dopf:"𝕕",Dot:"¨",dot:"˙",DotDot:"⃜",doteq:"≐",doteqdot:"≑",DotEqual:"≐",dotminus:"∸",dotplus:"∔",dotsquare:"⊡",doublebarwedge:"⌆",DoubleContourIntegral:"∯",DoubleDot:"¨",DoubleDownArrow:"⇓",DoubleLeftArrow:"⇐",DoubleLeftRightArrow:"⇔",DoubleLeftTee:"⫤",DoubleLongLeftArrow:"⟸",DoubleLongLeftRightArrow:"⟺",DoubleLongRightArrow:"⟹",DoubleRightArrow:"⇒",DoubleRightTee:"⊨",DoubleUpArrow:"⇑",DoubleUpDownArrow:"⇕",DoubleVerticalBar:"∥",DownArrowBar:"⤓",downarrow:"↓",DownArrow:"↓",Downarrow:"⇓",DownArrowUpArrow:"⇵",DownBreve:"̑",downdownarrows:"⇊",downharpoonleft:"⇃",downharpoonright:"⇂",DownLeftRightVector:"⥐",DownLeftTeeVector:"⥞",DownLeftVectorBar:"⥖",DownLeftVector:"↽",DownRightTeeVector:"⥟",DownRightVectorBar:"⥗",DownRightVector:"⇁",DownTeeArrow:"↧",DownTee:"⊤",drbkarow:"⤐",drcorn:"⌟",drcrop:"⌌",Dscr:"𝒟",dscr:"𝒹",DScy:"Ѕ",dscy:"ѕ",dsol:"⧶",Dstrok:"Đ",dstrok:"đ",dtdot:"⋱",dtri:"▿",dtrif:"▾",duarr:"⇵",duhar:"⥯",dwangle:"⦦",DZcy:"Џ",dzcy:"џ",dzigrarr:"⟿",Eacute:"É",eacute:"é",easter:"⩮",Ecaron:"Ě",ecaron:"ě",Ecirc:"Ê",ecirc:"ê",ecir:"≖",ecolon:"≕",Ecy:"Э",ecy:"э",eDDot:"⩷",Edot:"Ė",edot:"ė",eDot:"≑",ee:"ⅇ",efDot:"≒",Efr:"𝔈",efr:"𝔢",eg:"⪚",Egrave:"È",egrave:"è",egs:"⪖",egsdot:"⪘",el:"⪙",Element:"∈",elinters:"⏧",ell:"ℓ",els:"⪕",elsdot:"⪗",Emacr:"Ē",emacr:"ē",empty:"∅",emptyset:"∅",EmptySmallSquare:"◻",emptyv:"∅",EmptyVerySmallSquare:"▫",emsp13:" ",emsp14:" ",emsp:" ",ENG:"Ŋ",eng:"ŋ",ensp:" ",Eogon:"Ę",eogon:"ę",Eopf:"𝔼",eopf:"𝕖",epar:"⋕",eparsl:"⧣",eplus:"⩱",epsi:"ε",Epsilon:"Ε",epsilon:"ε",epsiv:"ϵ",eqcirc:"≖",eqcolon:"≕",eqsim:"≂",eqslantgtr:"⪖",eqslantless:"⪕",Equal:"⩵",equals:"=",EqualTilde:"≂",equest:"≟",Equilibrium:"⇌",equiv:"≡",equivDD:"⩸",eqvparsl:"⧥",erarr:"⥱",erDot:"≓",escr:"ℯ",Escr:"ℰ",esdot:"≐",Esim:"⩳",esim:"≂",Eta:"Η",eta:"η",ETH:"Ð",eth:"ð",Euml:"Ë",euml:"ë",euro:"€",excl:"!",exist:"∃",Exists:"∃",expectation:"ℰ",exponentiale:"ⅇ",ExponentialE:"ⅇ",fallingdotseq:"≒",Fcy:"Ф",fcy:"ф",female:"♀",ffilig:"ﬃ",fflig:"ﬀ",ffllig:"ﬄ",Ffr:"𝔉",ffr:"𝔣",filig:"ﬁ",FilledSmallSquare:"◼",FilledVerySmallSquare:"▪",fjlig:"fj",flat:"♭",fllig:"ﬂ",fltns:"▱",fnof:"ƒ",Fopf:"𝔽",fopf:"𝕗",forall:"∀",ForAll:"∀",fork:"⋔",forkv:"⫙",Fouriertrf:"ℱ",fpartint:"⨍",frac12:"½",frac13:"⅓",frac14:"¼",frac15:"⅕",frac16:"⅙",frac18:"⅛",frac23:"⅔",frac25:"⅖",frac34:"¾",frac35:"⅗",frac38:"⅜",frac45:"⅘",frac56:"⅚",frac58:"⅝",frac78:"⅞",frasl:"⁄",frown:"⌢",fscr:"𝒻",Fscr:"ℱ",gacute:"ǵ",Gamma:"Γ",gamma:"γ",Gammad:"Ϝ",gammad:"ϝ",gap:"⪆",Gbreve:"Ğ",gbreve:"ğ",Gcedil:"Ģ",Gcirc:"Ĝ",gcirc:"ĝ",Gcy:"Г",gcy:"г",Gdot:"Ġ",gdot:"ġ",ge:"≥",gE:"≧",gEl:"⪌",gel:"⋛",geq:"≥",geqq:"≧",geqslant:"⩾",gescc:"⪩",ges:"⩾",gesdot:"⪀",gesdoto:"⪂",gesdotol:"⪄",gesl:"⋛︀",gesles:"⪔",Gfr:"𝔊",gfr:"𝔤",gg:"≫",Gg:"⋙",ggg:"⋙",gimel:"ℷ",GJcy:"Ѓ",gjcy:"ѓ",gla:"⪥",gl:"≷",glE:"⪒",glj:"⪤",gnap:"⪊",gnapprox:"⪊",gne:"⪈",gnE:"≩",gneq:"⪈",gneqq:"≩",gnsim:"⋧",Gopf:"𝔾",gopf:"𝕘",grave:"`",GreaterEqual:"≥",GreaterEqualLess:"⋛",GreaterFullEqual:"≧",GreaterGreater:"⪢",GreaterLess:"≷",GreaterSlantEqual:"⩾",GreaterTilde:"≳",Gscr:"𝒢",gscr:"ℊ",gsim:"≳",gsime:"⪎",gsiml:"⪐",gtcc:"⪧",gtcir:"⩺",gt:">",GT:">",Gt:"≫",gtdot:"⋗",gtlPar:"⦕",gtquest:"⩼",gtrapprox:"⪆",gtrarr:"⥸",gtrdot:"⋗",gtreqless:"⋛",gtreqqless:"⪌",gtrless:"≷",gtrsim:"≳",gvertneqq:"≩︀",gvnE:"≩︀",Hacek:"ˇ",hairsp:" ",half:"½",hamilt:"ℋ",HARDcy:"Ъ",hardcy:"ъ",harrcir:"⥈",harr:"↔",hArr:"⇔",harrw:"↭",Hat:"^",hbar:"ℏ",Hcirc:"Ĥ",hcirc:"ĥ",hearts:"♥",heartsuit:"♥",hellip:"…",hercon:"⊹",hfr:"𝔥",Hfr:"ℌ",HilbertSpace:"ℋ",hksearow:"⤥",hkswarow:"⤦",hoarr:"⇿",homtht:"∻",hookleftarrow:"↩",hookrightarrow:"↪",hopf:"𝕙",Hopf:"ℍ",horbar:"―",HorizontalLine:"─",hscr:"𝒽",Hscr:"ℋ",hslash:"ℏ",Hstrok:"Ħ",hstrok:"ħ",HumpDownHump:"≎",HumpEqual:"≏",hybull:"⁃",hyphen:"‐",Iacute:"Í",iacute:"í",ic:"⁣",Icirc:"Î",icirc:"î",Icy:"И",icy:"и",Idot:"İ",IEcy:"Е",iecy:"е",iexcl:"¡",iff:"⇔",ifr:"𝔦",Ifr:"ℑ",Igrave:"Ì",igrave:"ì",ii:"ⅈ",iiiint:"⨌",iiint:"∭",iinfin:"⧜",iiota:"℩",IJlig:"Ĳ",ijlig:"ĳ",Imacr:"Ī",imacr:"ī",image:"ℑ",ImaginaryI:"ⅈ",imagline:"ℐ",imagpart:"ℑ",imath:"ı",Im:"ℑ",imof:"⊷",imped:"Ƶ",Implies:"⇒",incare:"℅",infin:"∞",infintie:"⧝",inodot:"ı",intcal:"⊺",int:"∫",Int:"∬",integers:"ℤ",Integral:"∫",intercal:"⊺",Intersection:"⋂",intlarhk:"⨗",intprod:"⨼",InvisibleComma:"⁣",InvisibleTimes:"⁢",IOcy:"Ё",iocy:"ё",Iogon:"Į",iogon:"į",Iopf:"𝕀",iopf:"𝕚",Iota:"Ι",iota:"ι",iprod:"⨼",iquest:"¿",iscr:"𝒾",Iscr:"ℐ",isin:"∈",isindot:"⋵",isinE:"⋹",isins:"⋴",isinsv:"⋳",isinv:"∈",it:"⁢",Itilde:"Ĩ",itilde:"ĩ",Iukcy:"І",iukcy:"і",Iuml:"Ï",iuml:"ï",Jcirc:"Ĵ",jcirc:"ĵ",Jcy:"Й",jcy:"й",Jfr:"𝔍",jfr:"𝔧",jmath:"ȷ",Jopf:"𝕁",jopf:"𝕛",Jscr:"𝒥",jscr:"𝒿",Jsercy:"Ј",jsercy:"ј",Jukcy:"Є",jukcy:"є",Kappa:"Κ",kappa:"κ",kappav:"ϰ",Kcedil:"Ķ",kcedil:"ķ",Kcy:"К",kcy:"к",Kfr:"𝔎",kfr:"𝔨",kgreen:"ĸ",KHcy:"Х",khcy:"х",KJcy:"Ќ",kjcy:"ќ",Kopf:"𝕂",kopf:"𝕜",Kscr:"𝒦",kscr:"𝓀",lAarr:"⇚",Lacute:"Ĺ",lacute:"ĺ",laemptyv:"⦴",lagran:"ℒ",Lambda:"Λ",lambda:"λ",lang:"⟨",Lang:"⟪",langd:"⦑",langle:"⟨",lap:"⪅",Laplacetrf:"ℒ",laquo:"«",larrb:"⇤",larrbfs:"⤟",larr:"←",Larr:"↞",lArr:"⇐",larrfs:"⤝",larrhk:"↩",larrlp:"↫",larrpl:"⤹",larrsim:"⥳",larrtl:"↢",latail:"⤙",lAtail:"⤛",lat:"⪫",late:"⪭",lates:"⪭︀",lbarr:"⤌",lBarr:"⤎",lbbrk:"❲",lbrace:"{",lbrack:"[",lbrke:"⦋",lbrksld:"⦏",lbrkslu:"⦍",Lcaron:"Ľ",lcaron:"ľ",Lcedil:"Ļ",lcedil:"ļ",lceil:"⌈",lcub:"{",Lcy:"Л",lcy:"л",ldca:"⤶",ldquo:"“",ldquor:"„",ldrdhar:"⥧",ldrushar:"⥋",ldsh:"↲",le:"≤",lE:"≦",LeftAngleBracket:"⟨",LeftArrowBar:"⇤",leftarrow:"←",LeftArrow:"←",Leftarrow:"⇐",LeftArrowRightArrow:"⇆",leftarrowtail:"↢",LeftCeiling:"⌈",LeftDoubleBracket:"⟦",LeftDownTeeVector:"⥡",LeftDownVectorBar:"⥙",LeftDownVector:"⇃",LeftFloor:"⌊",leftharpoondown:"↽",leftharpoonup:"↼",leftleftarrows:"⇇",leftrightarrow:"↔",LeftRightArrow:"↔",Leftrightarrow:"⇔",leftrightarrows:"⇆",leftrightharpoons:"⇋",leftrightsquigarrow:"↭",LeftRightVector:"⥎",LeftTeeArrow:"↤",LeftTee:"⊣",LeftTeeVector:"⥚",leftthreetimes:"⋋",LeftTriangleBar:"⧏",LeftTriangle:"⊲",LeftTriangleEqual:"⊴",LeftUpDownVector:"⥑",LeftUpTeeVector:"⥠",LeftUpVectorBar:"⥘",LeftUpVector:"↿",LeftVectorBar:"⥒",LeftVector:"↼",lEg:"⪋",leg:"⋚",leq:"≤",leqq:"≦",leqslant:"⩽",lescc:"⪨",les:"⩽",lesdot:"⩿",lesdoto:"⪁",lesdotor:"⪃",lesg:"⋚︀",lesges:"⪓",lessapprox:"⪅",lessdot:"⋖",lesseqgtr:"⋚",lesseqqgtr:"⪋",LessEqualGreater:"⋚",LessFullEqual:"≦",LessGreater:"≶",lessgtr:"≶",LessLess:"⪡",lesssim:"≲",LessSlantEqual:"⩽",LessTilde:"≲",lfisht:"⥼",lfloor:"⌊",Lfr:"𝔏",lfr:"𝔩",lg:"≶",lgE:"⪑",lHar:"⥢",lhard:"↽",lharu:"↼",lharul:"⥪",lhblk:"▄",LJcy:"Љ",ljcy:"љ",llarr:"⇇",ll:"≪",Ll:"⋘",llcorner:"⌞",Lleftarrow:"⇚",llhard:"⥫",lltri:"◺",Lmidot:"Ŀ",lmidot:"ŀ",lmoustache:"⎰",lmoust:"⎰",lnap:"⪉",lnapprox:"⪉",lne:"⪇",lnE:"≨",lneq:"⪇",lneqq:"≨",lnsim:"⋦",loang:"⟬",loarr:"⇽",lobrk:"⟦",longleftarrow:"⟵",LongLeftArrow:"⟵",Longleftarrow:"⟸",longleftrightarrow:"⟷",LongLeftRightArrow:"⟷",Longleftrightarrow:"⟺",longmapsto:"⟼",longrightarrow:"⟶",LongRightArrow:"⟶",Longrightarrow:"⟹",looparrowleft:"↫",looparrowright:"↬",lopar:"⦅",Lopf:"𝕃",lopf:"𝕝",loplus:"⨭",lotimes:"⨴",lowast:"∗",lowbar:"_",LowerLeftArrow:"↙",LowerRightArrow:"↘",loz:"◊",lozenge:"◊",lozf:"⧫",lpar:"(",lparlt:"⦓",lrarr:"⇆",lrcorner:"⌟",lrhar:"⇋",lrhard:"⥭",lrm:"‎",lrtri:"⊿",lsaquo:"‹",lscr:"𝓁",Lscr:"ℒ",lsh:"↰",Lsh:"↰",lsim:"≲",lsime:"⪍",lsimg:"⪏",lsqb:"[",lsquo:"‘",lsquor:"‚",Lstrok:"Ł",lstrok:"ł",ltcc:"⪦",ltcir:"⩹",lt:"<",LT:"<",Lt:"≪",ltdot:"⋖",lthree:"⋋",ltimes:"⋉",ltlarr:"⥶",ltquest:"⩻",ltri:"◃",ltrie:"⊴",ltrif:"◂",ltrPar:"⦖",lurdshar:"⥊",luruhar:"⥦",lvertneqq:"≨︀",lvnE:"≨︀",macr:"¯",male:"♂",malt:"✠",maltese:"✠",map:"↦",mapsto:"↦",mapstodown:"↧",mapstoleft:"↤",mapstoup:"↥",marker:"▮",mcomma:"⨩",Mcy:"М",mcy:"м",mdash:"—",mDDot:"∺",measuredangle:"∡",MediumSpace:" ",Mellintrf:"ℳ",Mfr:"𝔐",mfr:"𝔪",mho:"℧",micro:"µ",midast:"*",midcir:"⫰",mid:"∣",middot:"·",minusb:"⊟",minus:"−",minusd:"∸",minusdu:"⨪",MinusPlus:"∓",mlcp:"⫛",mldr:"…",mnplus:"∓",models:"⊧",Mopf:"𝕄",mopf:"𝕞",mp:"∓",mscr:"𝓂",Mscr:"ℳ",mstpos:"∾",Mu:"Μ",mu:"μ",multimap:"⊸",mumap:"⊸",nabla:"∇",Nacute:"Ń",nacute:"ń",nang:"∠⃒",nap:"≉",napE:"⩰̸",napid:"≋̸",napos:"ŉ",napprox:"≉",natural:"♮",naturals:"ℕ",natur:"♮",nbsp:" ",nbump:"≎̸",nbumpe:"≏̸",ncap:"⩃",Ncaron:"Ň",ncaron:"ň",Ncedil:"Ņ",ncedil:"ņ",ncong:"≇",ncongdot:"⩭̸",ncup:"⩂",Ncy:"Н",ncy:"н",ndash:"–",nearhk:"⤤",nearr:"↗",neArr:"⇗",nearrow:"↗",ne:"≠",nedot:"≐̸",NegativeMediumSpace:"​",NegativeThickSpace:"​",NegativeThinSpace:"​",NegativeVeryThinSpace:"​",nequiv:"≢",nesear:"⤨",nesim:"≂̸",NestedGreaterGreater:"≫",NestedLessLess:"≪",NewLine:"\n",nexist:"∄",nexists:"∄",Nfr:"𝔑",nfr:"𝔫",ngE:"≧̸",nge:"≱",ngeq:"≱",ngeqq:"≧̸",ngeqslant:"⩾̸",nges:"⩾̸",nGg:"⋙̸",ngsim:"≵",nGt:"≫⃒",ngt:"≯",ngtr:"≯",nGtv:"≫̸",nharr:"↮",nhArr:"⇎",nhpar:"⫲",ni:"∋",nis:"⋼",nisd:"⋺",niv:"∋",NJcy:"Њ",njcy:"њ",nlarr:"↚",nlArr:"⇍",nldr:"‥",nlE:"≦̸",nle:"≰",nleftarrow:"↚",nLeftarrow:"⇍",nleftrightarrow:"↮",nLeftrightarrow:"⇎",nleq:"≰",nleqq:"≦̸",nleqslant:"⩽̸",nles:"⩽̸",nless:"≮",nLl:"⋘̸",nlsim:"≴",nLt:"≪⃒",nlt:"≮",nltri:"⋪",nltrie:"⋬",nLtv:"≪̸",nmid:"∤",NoBreak:"⁠",NonBreakingSpace:" ",nopf:"𝕟",Nopf:"ℕ",Not:"⫬",not:"¬",NotCongruent:"≢",NotCupCap:"≭",NotDoubleVerticalBar:"∦",NotElement:"∉",NotEqual:"≠",NotEqualTilde:"≂̸",NotExists:"∄",NotGreater:"≯",NotGreaterEqual:"≱",NotGreaterFullEqual:"≧̸",NotGreaterGreater:"≫̸",NotGreaterLess:"≹",NotGreaterSlantEqual:"⩾̸",NotGreaterTilde:"≵",NotHumpDownHump:"≎̸",NotHumpEqual:"≏̸",notin:"∉",notindot:"⋵̸",notinE:"⋹̸",notinva:"∉",notinvb:"⋷",notinvc:"⋶",NotLeftTriangleBar:"⧏̸",NotLeftTriangle:"⋪",NotLeftTriangleEqual:"⋬",NotLess:"≮",NotLessEqual:"≰",NotLessGreater:"≸",NotLessLess:"≪̸",NotLessSlantEqual:"⩽̸",NotLessTilde:"≴",NotNestedGreaterGreater:"⪢̸",NotNestedLessLess:"⪡̸",notni:"∌",notniva:"∌",notnivb:"⋾",notnivc:"⋽",NotPrecedes:"⊀",NotPrecedesEqual:"⪯̸",NotPrecedesSlantEqual:"⋠",NotReverseElement:"∌",NotRightTriangleBar:"⧐̸",NotRightTriangle:"⋫",NotRightTriangleEqual:"⋭",NotSquareSubset:"⊏̸",NotSquareSubsetEqual:"⋢",NotSquareSuperset:"⊐̸",NotSquareSupersetEqual:"⋣",NotSubset:"⊂⃒",NotSubsetEqual:"⊈",NotSucceeds:"⊁",NotSucceedsEqual:"⪰̸",NotSucceedsSlantEqual:"⋡",NotSucceedsTilde:"≿̸",NotSuperset:"⊃⃒",NotSupersetEqual:"⊉",NotTilde:"≁",NotTildeEqual:"≄",NotTildeFullEqual:"≇",NotTildeTilde:"≉",NotVerticalBar:"∤",nparallel:"∦",npar:"∦",nparsl:"⫽⃥",npart:"∂̸",npolint:"⨔",npr:"⊀",nprcue:"⋠",nprec:"⊀",npreceq:"⪯̸",npre:"⪯̸",nrarrc:"⤳̸",nrarr:"↛",nrArr:"⇏",nrarrw:"↝̸",nrightarrow:"↛",nRightarrow:"⇏",nrtri:"⋫",nrtrie:"⋭",nsc:"⊁",nsccue:"⋡",nsce:"⪰̸",Nscr:"𝒩",nscr:"𝓃",nshortmid:"∤",nshortparallel:"∦",nsim:"≁",nsime:"≄",nsimeq:"≄",nsmid:"∤",nspar:"∦",nsqsube:"⋢",nsqsupe:"⋣",nsub:"⊄",nsubE:"⫅̸",nsube:"⊈",nsubset:"⊂⃒",nsubseteq:"⊈",nsubseteqq:"⫅̸",nsucc:"⊁",nsucceq:"⪰̸",nsup:"⊅",nsupE:"⫆̸",nsupe:"⊉",nsupset:"⊃⃒",nsupseteq:"⊉",nsupseteqq:"⫆̸",ntgl:"≹",Ntilde:"Ñ",ntilde:"ñ",ntlg:"≸",ntriangleleft:"⋪",ntrianglelefteq:"⋬",ntriangleright:"⋫",ntrianglerighteq:"⋭",Nu:"Ν",nu:"ν",num:"#",numero:"№",numsp:" ",nvap:"≍⃒",nvdash:"⊬",nvDash:"⊭",nVdash:"⊮",nVDash:"⊯",nvge:"≥⃒",nvgt:">⃒",nvHarr:"⤄",nvinfin:"⧞",nvlArr:"⤂",nvle:"≤⃒",nvlt:"<⃒",nvltrie:"⊴⃒",nvrArr:"⤃",nvrtrie:"⊵⃒",nvsim:"∼⃒",nwarhk:"⤣",nwarr:"↖",nwArr:"⇖",nwarrow:"↖",nwnear:"⤧",Oacute:"Ó",oacute:"ó",oast:"⊛",Ocirc:"Ô",ocirc:"ô",ocir:"⊚",Ocy:"О",ocy:"о",odash:"⊝",Odblac:"Ő",odblac:"ő",odiv:"⨸",odot:"⊙",odsold:"⦼",OElig:"Œ",oelig:"œ",ofcir:"⦿",Ofr:"𝔒",ofr:"𝔬",ogon:"˛",Ograve:"Ò",ograve:"ò",ogt:"⧁",ohbar:"⦵",ohm:"Ω",oint:"∮",olarr:"↺",olcir:"⦾",olcross:"⦻",oline:"‾",olt:"⧀",Omacr:"Ō",omacr:"ō",Omega:"Ω",omega:"ω",Omicron:"Ο",omicron:"ο",omid:"⦶",ominus:"⊖",Oopf:"𝕆",oopf:"𝕠",opar:"⦷",OpenCurlyDoubleQuote:"“",OpenCurlyQuote:"‘",operp:"⦹",oplus:"⊕",orarr:"↻",Or:"⩔",or:"∨",ord:"⩝",order:"ℴ",orderof:"ℴ",ordf:"ª",ordm:"º",origof:"⊶",oror:"⩖",orslope:"⩗",orv:"⩛",oS:"Ⓢ",Oscr:"𝒪",oscr:"ℴ",Oslash:"Ø",oslash:"ø",osol:"⊘",Otilde:"Õ",otilde:"õ",otimesas:"⨶",Otimes:"⨷",otimes:"⊗",Ouml:"Ö",ouml:"ö",ovbar:"⌽",OverBar:"‾",OverBrace:"⏞",OverBracket:"⎴",OverParenthesis:"⏜",para:"¶",parallel:"∥",par:"∥",parsim:"⫳",parsl:"⫽",part:"∂",PartialD:"∂",Pcy:"П",pcy:"п",percnt:"%",period:".",permil:"‰",perp:"⊥",pertenk:"‱",Pfr:"𝔓",pfr:"𝔭",Phi:"Φ",phi:"φ",phiv:"ϕ",phmmat:"ℳ",phone:"☎",Pi:"Π",pi:"π",pitchfork:"⋔",piv:"ϖ",planck:"ℏ",planckh:"ℎ",plankv:"ℏ",plusacir:"⨣",plusb:"⊞",pluscir:"⨢",plus:"+",plusdo:"∔",plusdu:"⨥",pluse:"⩲",PlusMinus:"±",plusmn:"±",plussim:"⨦",plustwo:"⨧",pm:"±",Poincareplane:"ℌ",pointint:"⨕",popf:"𝕡",Popf:"ℙ",pound:"£",prap:"⪷",Pr:"⪻",pr:"≺",prcue:"≼",precapprox:"⪷",prec:"≺",preccurlyeq:"≼",Precedes:"≺",PrecedesEqual:"⪯",PrecedesSlantEqual:"≼",PrecedesTilde:"≾",preceq:"⪯",precnapprox:"⪹",precneqq:"⪵",precnsim:"⋨",pre:"⪯",prE:"⪳",precsim:"≾",prime:"′",Prime:"″",primes:"ℙ",prnap:"⪹",prnE:"⪵",prnsim:"⋨",prod:"∏",Product:"∏",profalar:"⌮",profline:"⌒",profsurf:"⌓",prop:"∝",Proportional:"∝",Proportion:"∷",propto:"∝",prsim:"≾",prurel:"⊰",Pscr:"𝒫",pscr:"𝓅",Psi:"Ψ",psi:"ψ",puncsp:" ",Qfr:"𝔔",qfr:"𝔮",qint:"⨌",qopf:"𝕢",Qopf:"ℚ",qprime:"⁗",Qscr:"𝒬",qscr:"𝓆",quaternions:"ℍ",quatint:"⨖",quest:"?",questeq:"≟",quot:'"',QUOT:'"',rAarr:"⇛",race:"∽̱",Racute:"Ŕ",racute:"ŕ",radic:"√",raemptyv:"⦳",rang:"⟩",Rang:"⟫",rangd:"⦒",range:"⦥",rangle:"⟩",raquo:"»",rarrap:"⥵",rarrb:"⇥",rarrbfs:"⤠",rarrc:"⤳",rarr:"→",Rarr:"↠",rArr:"⇒",rarrfs:"⤞",rarrhk:"↪",rarrlp:"↬",rarrpl:"⥅",rarrsim:"⥴",Rarrtl:"⤖",rarrtl:"↣",rarrw:"↝",ratail:"⤚",rAtail:"⤜",ratio:"∶",rationals:"ℚ",rbarr:"⤍",rBarr:"⤏",RBarr:"⤐",rbbrk:"❳",rbrace:"}",rbrack:"]",rbrke:"⦌",rbrksld:"⦎",rbrkslu:"⦐",Rcaron:"Ř",rcaron:"ř",Rcedil:"Ŗ",rcedil:"ŗ",rceil:"⌉",rcub:"}",Rcy:"Р",rcy:"р",rdca:"⤷",rdldhar:"⥩",rdquo:"”",rdquor:"”",rdsh:"↳",real:"ℜ",realine:"ℛ",realpart:"ℜ",reals:"ℝ",Re:"ℜ",rect:"▭",reg:"®",REG:"®",ReverseElement:"∋",ReverseEquilibrium:"⇋",ReverseUpEquilibrium:"⥯",rfisht:"⥽",rfloor:"⌋",rfr:"𝔯",Rfr:"ℜ",rHar:"⥤",rhard:"⇁",rharu:"⇀",rharul:"⥬",Rho:"Ρ",rho:"ρ",rhov:"ϱ",RightAngleBracket:"⟩",RightArrowBar:"⇥",rightarrow:"→",RightArrow:"→",Rightarrow:"⇒",RightArrowLeftArrow:"⇄",rightarrowtail:"↣",RightCeiling:"⌉",RightDoubleBracket:"⟧",RightDownTeeVector:"⥝",RightDownVectorBar:"⥕",RightDownVector:"⇂",RightFloor:"⌋",rightharpoondown:"⇁",rightharpoonup:"⇀",rightleftarrows:"⇄",rightleftharpoons:"⇌",rightrightarrows:"⇉",rightsquigarrow:"↝",RightTeeArrow:"↦",RightTee:"⊢",RightTeeVector:"⥛",rightthreetimes:"⋌",RightTriangleBar:"⧐",RightTriangle:"⊳",RightTriangleEqual:"⊵",RightUpDownVector:"⥏",RightUpTeeVector:"⥜",RightUpVectorBar:"⥔",RightUpVector:"↾",RightVectorBar:"⥓",RightVector:"⇀",ring:"˚",risingdotseq:"≓",rlarr:"⇄",rlhar:"⇌",rlm:"‏",rmoustache:"⎱",rmoust:"⎱",rnmid:"⫮",roang:"⟭",roarr:"⇾",robrk:"⟧",ropar:"⦆",ropf:"𝕣",Ropf:"ℝ",roplus:"⨮",rotimes:"⨵",RoundImplies:"⥰",rpar:")",rpargt:"⦔",rppolint:"⨒",rrarr:"⇉",Rrightarrow:"⇛",rsaquo:"›",rscr:"𝓇",Rscr:"ℛ",rsh:"↱",Rsh:"↱",rsqb:"]",rsquo:"’",rsquor:"’",rthree:"⋌",rtimes:"⋊",rtri:"▹",rtrie:"⊵",rtrif:"▸",rtriltri:"⧎",RuleDelayed:"⧴",ruluhar:"⥨",rx:"℞",Sacute:"Ś",sacute:"ś",sbquo:"‚",scap:"⪸",Scaron:"Š",scaron:"š",Sc:"⪼",sc:"≻",sccue:"≽",sce:"⪰",scE:"⪴",Scedil:"Ş",scedil:"ş",Scirc:"Ŝ",scirc:"ŝ",scnap:"⪺",scnE:"⪶",scnsim:"⋩",scpolint:"⨓",scsim:"≿",Scy:"С",scy:"с",sdotb:"⊡",sdot:"⋅",sdote:"⩦",searhk:"⤥",searr:"↘",seArr:"⇘",searrow:"↘",sect:"§",semi:";",seswar:"⤩",setminus:"∖",setmn:"∖",sext:"✶",Sfr:"𝔖",sfr:"𝔰",sfrown:"⌢",sharp:"♯",SHCHcy:"Щ",shchcy:"щ",SHcy:"Ш",shcy:"ш",ShortDownArrow:"↓",ShortLeftArrow:"←",shortmid:"∣",shortparallel:"∥",ShortRightArrow:"→",ShortUpArrow:"↑",shy:"­",Sigma:"Σ",sigma:"σ",sigmaf:"ς",sigmav:"ς",sim:"∼",simdot:"⩪",sime:"≃",simeq:"≃",simg:"⪞",simgE:"⪠",siml:"⪝",simlE:"⪟",simne:"≆",simplus:"⨤",simrarr:"⥲",slarr:"←",SmallCircle:"∘",smallsetminus:"∖",smashp:"⨳",smeparsl:"⧤",smid:"∣",smile:"⌣",smt:"⪪",smte:"⪬",smtes:"⪬︀",SOFTcy:"Ь",softcy:"ь",solbar:"⌿",solb:"⧄",sol:"/",Sopf:"𝕊",sopf:"𝕤",spades:"♠",spadesuit:"♠",spar:"∥",sqcap:"⊓",sqcaps:"⊓︀",sqcup:"⊔",sqcups:"⊔︀",Sqrt:"√",sqsub:"⊏",sqsube:"⊑",sqsubset:"⊏",sqsubseteq:"⊑",sqsup:"⊐",sqsupe:"⊒",sqsupset:"⊐",sqsupseteq:"⊒",square:"□",Square:"□",SquareIntersection:"⊓",SquareSubset:"⊏",SquareSubsetEqual:"⊑",SquareSuperset:"⊐",SquareSupersetEqual:"⊒",SquareUnion:"⊔",squarf:"▪",squ:"□",squf:"▪",srarr:"→",Sscr:"𝒮",sscr:"𝓈",ssetmn:"∖",ssmile:"⌣",sstarf:"⋆",Star:"⋆",star:"☆",starf:"★",straightepsilon:"ϵ",straightphi:"ϕ",strns:"¯",sub:"⊂",Sub:"⋐",subdot:"⪽",subE:"⫅",sube:"⊆",subedot:"⫃",submult:"⫁",subnE:"⫋",subne:"⊊",subplus:"⪿",subrarr:"⥹",subset:"⊂",Subset:"⋐",subseteq:"⊆",subseteqq:"⫅",SubsetEqual:"⊆",subsetneq:"⊊",subsetneqq:"⫋",subsim:"⫇",subsub:"⫕",subsup:"⫓",succapprox:"⪸",succ:"≻",succcurlyeq:"≽",Succeeds:"≻",SucceedsEqual:"⪰",SucceedsSlantEqual:"≽",SucceedsTilde:"≿",succeq:"⪰",succnapprox:"⪺",succneqq:"⪶",succnsim:"⋩",succsim:"≿",SuchThat:"∋",sum:"∑",Sum:"∑",sung:"♪",sup1:"¹",sup2:"²",sup3:"³",sup:"⊃",Sup:"⋑",supdot:"⪾",supdsub:"⫘",supE:"⫆",supe:"⊇",supedot:"⫄",Superset:"⊃",SupersetEqual:"⊇",suphsol:"⟉",suphsub:"⫗",suplarr:"⥻",supmult:"⫂",supnE:"⫌",supne:"⊋",supplus:"⫀",supset:"⊃",Supset:"⋑",supseteq:"⊇",supseteqq:"⫆",supsetneq:"⊋",supsetneqq:"⫌",supsim:"⫈",supsub:"⫔",supsup:"⫖",swarhk:"⤦",swarr:"↙",swArr:"⇙",swarrow:"↙",swnwar:"⤪",szlig:"ß",Tab:"\t",target:"⌖",Tau:"Τ",tau:"τ",tbrk:"⎴",Tcaron:"Ť",tcaron:"ť",Tcedil:"Ţ",tcedil:"ţ",Tcy:"Т",tcy:"т",tdot:"⃛",telrec:"⌕",Tfr:"𝔗",tfr:"𝔱",there4:"∴",therefore:"∴",Therefore:"∴",Theta:"Θ",theta:"θ",thetasym:"ϑ",thetav:"ϑ",thickapprox:"≈",thicksim:"∼",ThickSpace:"  ",ThinSpace:" ",thinsp:" ",thkap:"≈",thksim:"∼",THORN:"Þ",thorn:"þ",tilde:"˜",Tilde:"∼",TildeEqual:"≃",TildeFullEqual:"≅",TildeTilde:"≈",timesbar:"⨱",timesb:"⊠",times:"×",timesd:"⨰",tint:"∭",toea:"⤨",topbot:"⌶",topcir:"⫱",top:"⊤",Topf:"𝕋",topf:"𝕥",topfork:"⫚",tosa:"⤩",tprime:"‴",trade:"™",TRADE:"™",triangle:"▵",triangledown:"▿",triangleleft:"◃",trianglelefteq:"⊴",triangleq:"≜",triangleright:"▹",trianglerighteq:"⊵",tridot:"◬",trie:"≜",triminus:"⨺",TripleDot:"⃛",triplus:"⨹",trisb:"⧍",tritime:"⨻",trpezium:"⏢",Tscr:"𝒯",tscr:"𝓉",TScy:"Ц",tscy:"ц",TSHcy:"Ћ",tshcy:"ћ",Tstrok:"Ŧ",tstrok:"ŧ",twixt:"≬",twoheadleftarrow:"↞",twoheadrightarrow:"↠",Uacute:"Ú",uacute:"ú",uarr:"↑",Uarr:"↟",uArr:"⇑",Uarrocir:"⥉",Ubrcy:"Ў",ubrcy:"ў",Ubreve:"Ŭ",ubreve:"ŭ",Ucirc:"Û",ucirc:"û",Ucy:"У",ucy:"у",udarr:"⇅",Udblac:"Ű",udblac:"ű",udhar:"⥮",ufisht:"⥾",Ufr:"𝔘",ufr:"𝔲",Ugrave:"Ù",ugrave:"ù",uHar:"⥣",uharl:"↿",uharr:"↾",uhblk:"▀",ulcorn:"⌜",ulcorner:"⌜",ulcrop:"⌏",ultri:"◸",Umacr:"Ū",umacr:"ū",uml:"¨",UnderBar:"_",UnderBrace:"⏟",UnderBracket:"⎵",UnderParenthesis:"⏝",Union:"⋃",UnionPlus:"⊎",Uogon:"Ų",uogon:"ų",Uopf:"𝕌",uopf:"𝕦",UpArrowBar:"⤒",uparrow:"↑",UpArrow:"↑",Uparrow:"⇑",UpArrowDownArrow:"⇅",updownarrow:"↕",UpDownArrow:"↕",Updownarrow:"⇕",UpEquilibrium:"⥮",upharpoonleft:"↿",upharpoonright:"↾",uplus:"⊎",UpperLeftArrow:"↖",UpperRightArrow:"↗",upsi:"υ",Upsi:"ϒ",upsih:"ϒ",Upsilon:"Υ",upsilon:"υ",UpTeeArrow:"↥",UpTee:"⊥",upuparrows:"⇈",urcorn:"⌝",urcorner:"⌝",urcrop:"⌎",Uring:"Ů",uring:"ů",urtri:"◹",Uscr:"𝒰",uscr:"𝓊",utdot:"⋰",Utilde:"Ũ",utilde:"ũ",utri:"▵",utrif:"▴",uuarr:"⇈",Uuml:"Ü",uuml:"ü",uwangle:"⦧",vangrt:"⦜",varepsilon:"ϵ",varkappa:"ϰ",varnothing:"∅",varphi:"ϕ",varpi:"ϖ",varpropto:"∝",varr:"↕",vArr:"⇕",varrho:"ϱ",varsigma:"ς",varsubsetneq:"⊊︀",varsubsetneqq:"⫋︀",varsupsetneq:"⊋︀",varsupsetneqq:"⫌︀",vartheta:"ϑ",vartriangleleft:"⊲",vartriangleright:"⊳",vBar:"⫨",Vbar:"⫫",vBarv:"⫩",Vcy:"В",vcy:"в",vdash:"⊢",vDash:"⊨",Vdash:"⊩",VDash:"⊫",Vdashl:"⫦",veebar:"⊻",vee:"∨",Vee:"⋁",veeeq:"≚",vellip:"⋮",verbar:"|",Verbar:"‖",vert:"|",Vert:"‖",VerticalBar:"∣",VerticalLine:"|",VerticalSeparator:"❘",VerticalTilde:"≀",VeryThinSpace:" ",Vfr:"𝔙",vfr:"𝔳",vltri:"⊲",vnsub:"⊂⃒",vnsup:"⊃⃒",Vopf:"𝕍",vopf:"𝕧",vprop:"∝",vrtri:"⊳",Vscr:"𝒱",vscr:"𝓋",vsubnE:"⫋︀",vsubne:"⊊︀",vsupnE:"⫌︀",vsupne:"⊋︀",Vvdash:"⊪",vzigzag:"⦚",Wcirc:"Ŵ",wcirc:"ŵ",wedbar:"⩟",wedge:"∧",Wedge:"⋀",wedgeq:"≙",weierp:"℘",Wfr:"𝔚",wfr:"𝔴",Wopf:"𝕎",wopf:"𝕨",wp:"℘",wr:"≀",wreath:"≀",Wscr:"𝒲",wscr:"𝓌",xcap:"⋂",xcirc:"◯",xcup:"⋃",xdtri:"▽",Xfr:"𝔛",xfr:"𝔵",xharr:"⟷",xhArr:"⟺",Xi:"Ξ",xi:"ξ",xlarr:"⟵",xlArr:"⟸",xmap:"⟼",xnis:"⋻",xodot:"⨀",Xopf:"𝕏",xopf:"𝕩",xoplus:"⨁",xotime:"⨂",xrarr:"⟶",xrArr:"⟹",Xscr:"𝒳",xscr:"𝓍",xsqcup:"⨆",xuplus:"⨄",xutri:"△",xvee:"⋁",xwedge:"⋀",Yacute:"Ý",yacute:"ý",YAcy:"Я",yacy:"я",Ycirc:"Ŷ",ycirc:"ŷ",Ycy:"Ы",ycy:"ы",yen:"¥",Yfr:"𝔜",yfr:"𝔶",YIcy:"Ї",yicy:"ї",Yopf:"𝕐",yopf:"𝕪",Yscr:"𝒴",yscr:"𝓎",YUcy:"Ю",yucy:"ю",yuml:"ÿ",Yuml:"Ÿ",Zacute:"Ź",zacute:"ź",Zcaron:"Ž",zcaron:"ž",Zcy:"З",zcy:"з",Zdot:"Ż",zdot:"ż",zeetrf:"ℨ",ZeroWidthSpace:"​",Zeta:"Ζ",zeta:"ζ",zfr:"𝔷",Zfr:"ℨ",ZHcy:"Ж",zhcy:"ж",zigrarr:"⇝",zopf:"𝕫",Zopf:"ℤ",Zscr:"𝒵",zscr:"𝓏",zwj:"‍",zwnj:"‌",default:ao}))&&so.default||so,lo=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4E\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDF55-\uDF59]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDF3C-\uDF3E]|\uD806[\uDC3B\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,uo={};function po(e,t,r){var n,o,i,s,a,c="";for("string"!=typeof t&&(r=t,t=po.defaultChars),void 0===r&&(r=!0),a=function(e){var t,r,n=uo[e];if(n)return n;for(n=uo[e]=[],t=0;t<128;t++)r=String.fromCharCode(t),/^[0-9a-z]$/i.test(r)?n.push(r):n.push("%"+("0"+t.toString(16).toUpperCase()).slice(-2));for(t=0;t<e.length;t++)n[e.charCodeAt(t)]=e[t];return n}(t),n=0,o=e.length;n<o;n++)if(i=e.charCodeAt(n),r&&37===i&&n+2<o&&/^[0-9a-f]{2}$/i.test(e.slice(n+1,n+3)))c+=e.slice(n,n+3),n+=2;else if(i<128)c+=a[i];else if(i>=55296&&i<=57343){if(i>=55296&&i<=56319&&n+1<o&&(s=e.charCodeAt(n+1))>=56320&&s<=57343){c+=encodeURIComponent(e[n]+e[n+1]),n++;continue}c+="%EF%BF%BD"}else c+=encodeURIComponent(e[n]);return c}po.defaultChars=";/?:@&=+$,-_.!~*'()#",po.componentChars="-_.!~*'()";var ho=po,fo={};function mo(e,t){var r;return"string"!=typeof t&&(t=mo.defaultChars),r=function(e){var t,r,n=fo[e];if(n)return n;for(n=fo[e]=[],t=0;t<128;t++)r=String.fromCharCode(t),n.push(r);for(t=0;t<e.length;t++)n[r=e.charCodeAt(t)]="%"+("0"+r.toString(16).toUpperCase()).slice(-2);return n}(t),e.replace(/(%[a-f0-9]{2})+/gi,(function(e){var t,n,o,i,s,a,c,l="";for(t=0,n=e.length;t<n;t+=3)(o=parseInt(e.slice(t+1,t+3),16))<128?l+=r[o]:192==(224&o)&&t+3<n&&128==(192&(i=parseInt(e.slice(t+4,t+6),16)))?(l+=(c=o<<6&1984|63&i)<128?"��":String.fromCharCode(c),t+=3):224==(240&o)&&t+6<n&&(i=parseInt(e.slice(t+4,t+6),16),s=parseInt(e.slice(t+7,t+9),16),128==(192&i)&&128==(192&s))?(l+=(c=o<<12&61440|i<<6&4032|63&s)<2048||c>=55296&&c<=57343?"���":String.fromCharCode(c),t+=6):240==(248&o)&&t+9<n&&(i=parseInt(e.slice(t+4,t+6),16),s=parseInt(e.slice(t+7,t+9),16),a=parseInt(e.slice(t+10,t+12),16),128==(192&i)&&128==(192&s)&&128==(192&a))?((c=o<<18&1835008|i<<12&258048|s<<6&4032|63&a)<65536||c>1114111?l+="����":(c-=65536,l+=String.fromCharCode(55296+(c>>10),56320+(1023&c))),t+=9):l+="�";return l}))}mo.defaultChars=";/?:@&=+$,#",mo.componentChars="";var go=mo;function vo(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}var yo=/^([a-z0-9.+-]+:)/i,bo=/:[0-9]*$/,wo=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,ko=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),xo=["'"].concat(ko),Co=["%","/","?",";","#"].concat(xo),So=["/","?","#"],_o=/^[+a-z0-9A-Z_-]{0,63}$/,Do=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,Ao={javascript:!0,"javascript:":!0},Eo={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};vo.prototype.parse=function(e,t){var r,n,o,i,s,a=e;if(a=a.trim(),!t&&1===e.split("#").length){var c=wo.exec(a);if(c)return this.pathname=c[1],c[2]&&(this.search=c[2]),this}var l=yo.exec(a);if(l&&(o=(l=l[0]).toLowerCase(),this.protocol=l,a=a.substr(l.length)),(t||l||a.match(/^\/\/[^@\/]+@[^@\/]+/))&&(!(s="//"===a.substr(0,2))||l&&Ao[l]||(a=a.substr(2),this.slashes=!0)),!Ao[l]&&(s||l&&!Eo[l])){var u,p,h=-1;for(r=0;r<So.length;r++)-1!==(i=a.indexOf(So[r]))&&(-1===h||i<h)&&(h=i);for(-1!==(p=-1===h?a.lastIndexOf("@"):a.lastIndexOf("@",h))&&(u=a.slice(0,p),a=a.slice(p+1),this.auth=u),h=-1,r=0;r<Co.length;r++)-1!==(i=a.indexOf(Co[r]))&&(-1===h||i<h)&&(h=i);-1===h&&(h=a.length),":"===a[h-1]&&h--;var d=a.slice(0,h);a=a.slice(h),this.parseHost(d),this.hostname=this.hostname||"";var f="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!f){var m=this.hostname.split(/\./);for(r=0,n=m.length;r<n;r++){var g=m[r];if(g&&!g.match(_o)){for(var v="",y=0,b=g.length;y<b;y++)g.charCodeAt(y)>127?v+="x":v+=g[y];if(!v.match(_o)){var w=m.slice(0,r),k=m.slice(r+1),x=g.match(Do);x&&(w.push(x[1]),k.unshift(x[2])),k.length&&(a=k.join(".")+a),this.hostname=w.join(".");break}}}}this.hostname.length>255&&(this.hostname=""),f&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}var C=a.indexOf("#");-1!==C&&(this.hash=a.substr(C),a=a.slice(0,C));var S=a.indexOf("?");return-1!==S&&(this.search=a.substr(S),a=a.slice(0,S)),a&&(this.pathname=a),Eo[o]&&this.hostname&&!this.pathname&&(this.pathname=""),this},vo.prototype.parseHost=function(e){var t=bo.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)};var Mo,To={encode:ho,decode:go,format:function(e){var t="";return t+=e.protocol||"",t+=e.slashes?"//":"",t+=e.auth?e.auth+"@":"",e.hostname&&-1!==e.hostname.indexOf(":")?t+="["+e.hostname+"]":t+=e.hostname||"",t+=e.port?":"+e.port:"",t+=e.pathname||"",t+=e.search||"",t+=e.hash||""},parse:function(e,t){if(e&&e instanceof vo)return e;var r=new vo;return r.parse(e,t),r}},Oo=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,No=/[\0-\x1F\x7F-\x9F]/,qo=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,Ro={Any:Oo,Cc:No,Cf:/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/,P:lo,Z:qo},Io=(function(e,t){var r=Object.prototype.hasOwnProperty;function n(e,t){return r.call(e,t)}function o(e){return!(e>=55296&&e<=57343||e>=64976&&e<=65007||65535==(65535&e)||65534==(65535&e)||e>=0&&e<=8||11===e||e>=14&&e<=31||e>=127&&e<=159||e>1114111)}function i(e){if(e>65535){var t=55296+((e-=65536)>>10),r=56320+(1023&e);return String.fromCharCode(t,r)}return String.fromCharCode(e)}var s=/\\([!"#$%&'()*+,\-.\/:;<=>?@[\\\]^_`{|}~])/g,a=new RegExp(s.source+"|"+/&([a-z#][a-z0-9]{1,31});/gi.source,"gi"),c=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))/i,l=/[&<>"]/,u=/[&<>"]/g,p={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function h(e){return p[e]}var d=/[.?*+^$[\]\\(){}|-]/g;t.lib={},t.lib.mdurl=To,t.lib.ucmicro=Ro,t.assign=function(e){var t=Array.prototype.slice.call(arguments,1);return t.forEach((function(t){if(t){if("object"!=typeof t)throw new TypeError(t+"must be object");Object.keys(t).forEach((function(r){e[r]=t[r]}))}})),e},t.isString=function(e){return"[object String]"===function(e){return Object.prototype.toString.call(e)}(e)},t.has=n,t.unescapeMd=function(e){return e.indexOf("\\")<0?e:e.replace(s,"$1")},t.unescapeAll=function(e){return e.indexOf("\\")<0&&e.indexOf("&")<0?e:e.replace(a,(function(e,t,r){return t||function(e,t){var r=0;return n(co,t)?co[t]:35===t.charCodeAt(0)&&c.test(t)&&o(r="x"===t[1].toLowerCase()?parseInt(t.slice(2),16):parseInt(t.slice(1),10))?i(r):e}(e,r)}))},t.isValidEntityCode=o,t.fromCodePoint=i,t.escapeHtml=function(e){return l.test(e)?e.replace(u,h):e},t.arrayReplaceAt=function(e,t,r){return[].concat(e.slice(0,t),r,e.slice(t+1))},t.isSpace=function(e){switch(e){case 9:case 32:return!0}return!1},t.isWhiteSpace=function(e){if(e>=8192&&e<=8202)return!0;switch(e){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1},t.isMdAsciiPunct=function(e){switch(e){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}},t.isPunctChar=function(e){return lo.test(e)},t.escapeRE=function(e){return e.replace(d,"\\$&")},t.normalizeReference=function(e){return e=e.trim().replace(/\s+/g," "),"Ṿ"==="ẞ".toLowerCase()&&(e=e.replace(/ẞ/g,"ß")),e.toLowerCase().toUpperCase()}}(Mo={exports:{}},Mo.exports),Mo.exports),Lo=(Io.lib,Io.assign,Io.isString,Io.has,Io.unescapeMd,Io.unescapeAll,Io.isValidEntityCode,Io.fromCodePoint,Io.escapeHtml,Io.arrayReplaceAt,Io.isSpace,Io.isWhiteSpace,Io.isMdAsciiPunct,Io.isPunctChar,Io.escapeRE,Io.normalizeReference,Io.unescapeAll),zo=Io.unescapeAll,Fo={parseLinkLabel:function(e,t,r){var n,o,i,s,a=-1,c=e.posMax,l=e.pos;for(e.pos=t+1,n=1;e.pos<c;){if(93===(i=e.src.charCodeAt(e.pos))&&0===--n){o=!0;break}if(s=e.pos,e.md.inline.skipToken(e),91===i)if(s===e.pos-1)n++;else if(r)return e.pos=l,-1}return o&&(a=e.pos),e.pos=l,a},parseLinkDestination:function(e,t,r){var n,o,i=t,s={ok:!1,pos:0,lines:0,str:""};if(60===e.charCodeAt(t)){for(t++;t<r;){if(10===(n=e.charCodeAt(t)))return s;if(62===n)return s.pos=t+1,s.str=Lo(e.slice(i+1,t)),s.ok=!0,s;92===n&&t+1<r?t+=2:t++}return s}for(o=0;t<r&&32!==(n=e.charCodeAt(t))&&!(n<32||127===n);)if(92===n&&t+1<r)t+=2;else{if(40===n&&o++,41===n){if(0===o)break;o--}t++}return i===t||0!==o||(s.str=Lo(e.slice(i,t)),s.lines=0,s.pos=t,s.ok=!0),s},parseLinkTitle:function(e,t,r){var n,o,i=0,s=t,a={ok:!1,pos:0,lines:0,str:""};if(t>=r)return a;if(34!==(o=e.charCodeAt(t))&&39!==o&&40!==o)return a;for(t++,40===o&&(o=41);t<r;){if((n=e.charCodeAt(t))===o)return a.pos=t+1,a.lines=i,a.str=zo(e.slice(s+1,t)),a.ok=!0,a;10===n?i++:92===n&&t+1<r&&(t++,10===e.charCodeAt(t)&&i++),t++}return a}},Bo=Io.assign,Po=Io.unescapeAll,Vo=Io.escapeHtml,$o={};function jo(){this.rules=Bo({},$o)}$o.code_inline=function(e,t,r,n,o){var i=e[t];return"<code"+o.renderAttrs(i)+">"+Vo(e[t].content)+"</code>"},$o.code_block=function(e,t,r,n,o){var i=e[t];return"<pre"+o.renderAttrs(i)+"><code>"+Vo(e[t].content)+"</code></pre>\n"},$o.fence=function(e,t,r,n,o){var i,s,a,c,l=e[t],u=l.info?Po(l.info).trim():"",p="";return u&&(p=u.split(/\s+/g)[0]),0===(i=r.highlight&&r.highlight(l.content,p)||Vo(l.content)).indexOf("<pre")?i+"\n":u?(s=l.attrIndex("class"),a=l.attrs?l.attrs.slice():[],s<0?a.push(["class",r.langPrefix+p]):a[s][1]+=" "+r.langPrefix+p,c={attrs:a},"<pre><code"+o.renderAttrs(c)+">"+i+"</code></pre>\n"):"<pre><code"+o.renderAttrs(l)+">"+i+"</code></pre>\n"},$o.image=function(e,t,r,n,o){var i=e[t];return i.attrs[i.attrIndex("alt")][1]=o.renderInlineAsText(i.children,r,n),o.renderToken(e,t,r)},$o.hardbreak=function(e,t,r){return r.xhtmlOut?"<br />\n":"<br>\n"},$o.softbreak=function(e,t,r){return r.breaks?r.xhtmlOut?"<br />\n":"<br>\n":"\n"},$o.text=function(e,t){return Vo(e[t].content)},$o.html_block=function(e,t){return e[t].content},$o.html_inline=function(e,t){return e[t].content},jo.prototype.renderAttrs=function(e){var t,r,n;if(!e.attrs)return"";for(n="",t=0,r=e.attrs.length;t<r;t++)n+=" "+Vo(e.attrs[t][0])+'="'+Vo(e.attrs[t][1])+'"';return n},jo.prototype.renderToken=function(e,t,r){var n,o="",i=!1,s=e[t];return s.hidden?"":(s.block&&-1!==s.nesting&&t&&e[t-1].hidden&&(o+="\n"),o+=(-1===s.nesting?"</":"<")+s.tag,o+=this.renderAttrs(s),0===s.nesting&&r.xhtmlOut&&(o+=" /"),s.block&&(i=!0,1===s.nesting&&t+1<e.length&&("inline"===(n=e[t+1]).type||n.hidden||-1===n.nesting&&n.tag===s.tag)&&(i=!1)),o+=i?">\n":">")},jo.prototype.renderInline=function(e,t,r){for(var n,o="",i=this.rules,s=0,a=e.length;s<a;s++)void 0!==i[n=e[s].type]?o+=i[n](e,s,t,r,this):o+=this.renderToken(e,s,t);return o},jo.prototype.renderInlineAsText=function(e,t,r){for(var n="",o=0,i=e.length;o<i;o++)"text"===e[o].type?n+=e[o].content:"image"===e[o].type&&(n+=this.renderInlineAsText(e[o].children,t,r));return n},jo.prototype.render=function(e,t,r){var n,o,i,s="",a=this.rules;for(n=0,o=e.length;n<o;n++)"inline"===(i=e[n].type)?s+=this.renderInline(e[n].children,t,r):void 0!==a[i]?s+=a[e[n].type](e,n,t,r,this):s+=this.renderToken(e,n,t,r);return s};var Ho=jo;function Uo(){this.__rules__=[],this.__cache__=null}Uo.prototype.__find__=function(e){for(var t=0;t<this.__rules__.length;t++)if(this.__rules__[t].name===e)return t;return-1},Uo.prototype.__compile__=function(){var e=this,t=[""];e.__rules__.forEach((function(e){e.enabled&&e.alt.forEach((function(e){t.indexOf(e)<0&&t.push(e)}))})),e.__cache__={},t.forEach((function(t){e.__cache__[t]=[],e.__rules__.forEach((function(r){r.enabled&&(t&&r.alt.indexOf(t)<0||e.__cache__[t].push(r.fn))}))}))},Uo.prototype.at=function(e,t,r){var n=this.__find__(e),o=r||{};if(-1===n)throw new Error("Parser rule not found: "+e);this.__rules__[n].fn=t,this.__rules__[n].alt=o.alt||[],this.__cache__=null},Uo.prototype.before=function(e,t,r,n){var o=this.__find__(e),i=n||{};if(-1===o)throw new Error("Parser rule not found: "+e);this.__rules__.splice(o,0,{name:t,enabled:!0,fn:r,alt:i.alt||[]}),this.__cache__=null},Uo.prototype.after=function(e,t,r,n){var o=this.__find__(e),i=n||{};if(-1===o)throw new Error("Parser rule not found: "+e);this.__rules__.splice(o+1,0,{name:t,enabled:!0,fn:r,alt:i.alt||[]}),this.__cache__=null},Uo.prototype.push=function(e,t,r){var n=r||{};this.__rules__.push({name:e,enabled:!0,fn:t,alt:n.alt||[]}),this.__cache__=null},Uo.prototype.enable=function(e,t){Array.isArray(e)||(e=[e]);var r=[];return e.forEach((function(e){var n=this.__find__(e);if(n<0){if(t)return;throw new Error("Rules manager: invalid rule name "+e)}this.__rules__[n].enabled=!0,r.push(e)}),this),this.__cache__=null,r},Uo.prototype.enableOnly=function(e,t){Array.isArray(e)||(e=[e]),this.__rules__.forEach((function(e){e.enabled=!1})),this.enable(e,t)},Uo.prototype.disable=function(e,t){Array.isArray(e)||(e=[e]);var r=[];return e.forEach((function(e){var n=this.__find__(e);if(n<0){if(t)return;throw new Error("Rules manager: invalid rule name "+e)}this.__rules__[n].enabled=!1,r.push(e)}),this),this.__cache__=null,r},Uo.prototype.getRules=function(e){return null===this.__cache__&&this.__compile__(),this.__cache__[e]||[]};var Jo=Uo,Go=/\r\n?|\n/g,Wo=/\0/g,Ko=Io.arrayReplaceAt;function Zo(e){return/^<\/a\s*>/i.test(e)}var Yo=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,Qo=/\((c|tm|r|p)\)/i,Xo=/\((c|tm|r|p)\)/gi,ei={c:"©",r:"®",p:"§",tm:"™"};function ti(e,t){return ei[t.toLowerCase()]}function ri(e){var t,r,n=0;for(t=e.length-1;t>=0;t--)"text"!==(r=e[t]).type||n||(r.content=r.content.replace(Xo,ti)),"link_open"===r.type&&"auto"===r.info&&n--,"link_close"===r.type&&"auto"===r.info&&n++}function ni(e){var t,r,n=0;for(t=e.length-1;t>=0;t--)"text"!==(r=e[t]).type||n||Yo.test(r.content)&&(r.content=r.content.replace(/\+-/g,"±").replace(/\.{2,}/g,"…").replace(/([?!])…/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---([^-]|$)/gm,"$1—$2").replace(/(^|\s)--(\s|$)/gm,"$1–$2").replace(/(^|[^-\s])--([^-\s]|$)/gm,"$1–$2")),"link_open"===r.type&&"auto"===r.info&&n--,"link_close"===r.type&&"auto"===r.info&&n++}var oi=Io.isWhiteSpace,ii=Io.isPunctChar,si=Io.isMdAsciiPunct,ai=/['"]/,ci=/['"]/g;function li(e,t,r){return e.substr(0,t)+r+e.substr(t+1)}function ui(e,t){var r,n,o,i,s,a,c,l,u,p,h,d,f,m,g,v,y,b,w,k,x;for(w=[],r=0;r<e.length;r++){for(n=e[r],c=e[r].level,y=w.length-1;y>=0&&!(w[y].level<=c);y--);if(w.length=y+1,"text"===n.type){s=0,a=(o=n.content).length;e:for(;s<a&&(ci.lastIndex=s,i=ci.exec(o));){if(g=v=!0,s=i.index+1,b="'"===i[0],u=32,i.index-1>=0)u=o.charCodeAt(i.index-1);else for(y=r-1;y>=0&&("softbreak"!==e[y].type&&"hardbreak"!==e[y].type);y--)if("text"===e[y].type){u=e[y].content.charCodeAt(e[y].content.length-1);break}if(p=32,s<a)p=o.charCodeAt(s);else for(y=r+1;y<e.length&&("softbreak"!==e[y].type&&"hardbreak"!==e[y].type);y++)if("text"===e[y].type){p=e[y].content.charCodeAt(0);break}if(h=si(u)||ii(String.fromCharCode(u)),d=si(p)||ii(String.fromCharCode(p)),f=oi(u),(m=oi(p))?g=!1:d&&(f||h||(g=!1)),f?v=!1:h&&(m||d||(v=!1)),34===p&&'"'===i[0]&&u>=48&&u<=57&&(v=g=!1),g&&v&&(g=!1,v=d),g||v){if(v)for(y=w.length-1;y>=0&&(l=w[y],!(w[y].level<c));y--)if(l.single===b&&w[y].level===c){l=w[y],b?(k=t.md.options.quotes[2],x=t.md.options.quotes[3]):(k=t.md.options.quotes[0],x=t.md.options.quotes[1]),n.content=li(n.content,i.index,x),e[l.token].content=li(e[l.token].content,l.pos,k),s+=x.length-1,l.token===r&&(s+=k.length-1),a=(o=n.content).length,w.length=y;continue e}g?w.push({token:r,pos:i.index,single:b,level:c}):v&&b&&(n.content=li(n.content,i.index,"’"))}else b&&(n.content=li(n.content,i.index,"’"))}}}}function pi(e,t,r){this.type=e,this.tag=t,this.attrs=null,this.map=null,this.nesting=r,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}pi.prototype.attrIndex=function(e){var t,r,n;if(!this.attrs)return-1;for(r=0,n=(t=this.attrs).length;r<n;r++)if(t[r][0]===e)return r;return-1},pi.prototype.attrPush=function(e){this.attrs?this.attrs.push(e):this.attrs=[e]},pi.prototype.attrSet=function(e,t){var r=this.attrIndex(e),n=[e,t];r<0?this.attrPush(n):this.attrs[r]=n},pi.prototype.attrGet=function(e){var t=this.attrIndex(e),r=null;return t>=0&&(r=this.attrs[t][1]),r},pi.prototype.attrJoin=function(e,t){var r=this.attrIndex(e);r<0?this.attrPush([e,t]):this.attrs[r][1]=this.attrs[r][1]+" "+t};var hi=pi;function di(e,t,r){this.src=e,this.env=r,this.tokens=[],this.inlineMode=!1,this.md=t}di.prototype.Token=hi;var fi=di,mi=[["normalize",function(e){var t;t=(t=e.src.replace(Go,"\n")).replace(Wo,"�"),e.src=t}],["block",function(e){var t;e.inlineMode?((t=new e.Token("inline","",0)).content=e.src,t.map=[0,1],t.children=[],e.tokens.push(t)):e.md.block.parse(e.src,e.md,e.env,e.tokens)}],["inline",function(e){var t,r,n,o=e.tokens;for(r=0,n=o.length;r<n;r++)"inline"===(t=o[r]).type&&e.md.inline.parse(t.content,e.md,e.env,t.children)}],["linkify",function(e){var t,r,n,o,i,s,a,c,l,u,p,h,d,f,m,g,v,y,b=e.tokens;if(e.md.options.linkify)for(r=0,n=b.length;r<n;r++)if("inline"===b[r].type&&e.md.linkify.pretest(b[r].content))for(d=0,t=(o=b[r].children).length-1;t>=0;t--)if("link_close"!==(s=o[t]).type){if("html_inline"===s.type&&(y=s.content,/^<a[>\s]/i.test(y)&&d>0&&d--,Zo(s.content)&&d++),!(d>0)&&"text"===s.type&&e.md.linkify.test(s.content)){for(l=s.content,v=e.md.linkify.match(l),a=[],h=s.level,p=0,c=0;c<v.length;c++)f=v[c].url,m=e.md.normalizeLink(f),e.md.validateLink(m)&&(g=v[c].text,g=v[c].schema?"mailto:"!==v[c].schema||/^mailto:/i.test(g)?e.md.normalizeLinkText(g):e.md.normalizeLinkText("mailto:"+g).replace(/^mailto:/,""):e.md.normalizeLinkText("http://"+g).replace(/^http:\/\//,""),(u=v[c].index)>p&&((i=new e.Token("text","",0)).content=l.slice(p,u),i.level=h,a.push(i)),(i=new e.Token("link_open","a",1)).attrs=[["href",m]],i.level=h++,i.markup="linkify",i.info="auto",a.push(i),(i=new e.Token("text","",0)).content=g,i.level=h,a.push(i),(i=new e.Token("link_close","a",-1)).level=--h,i.markup="linkify",i.info="auto",a.push(i),p=v[c].lastIndex);p<l.length&&((i=new e.Token("text","",0)).content=l.slice(p),i.level=h,a.push(i)),b[r].children=o=Ko(o,t,a)}}else for(t--;o[t].level!==s.level&&"link_open"!==o[t].type;)t--}],["replacements",function(e){var t;if(e.md.options.typographer)for(t=e.tokens.length-1;t>=0;t--)"inline"===e.tokens[t].type&&(Qo.test(e.tokens[t].content)&&ri(e.tokens[t].children),Yo.test(e.tokens[t].content)&&ni(e.tokens[t].children))}],["smartquotes",function(e){var t;if(e.md.options.typographer)for(t=e.tokens.length-1;t>=0;t--)"inline"===e.tokens[t].type&&ai.test(e.tokens[t].content)&&ui(e.tokens[t].children,e)}]];function gi(){this.ruler=new Jo;for(var e=0;e<mi.length;e++)this.ruler.push(mi[e][0],mi[e][1])}gi.prototype.process=function(e){var t,r,n;for(t=0,r=(n=this.ruler.getRules("")).length;t<r;t++)n[t](e)},gi.prototype.State=fi;var vi=gi,yi=Io.isSpace;function bi(e,t){var r=e.bMarks[t]+e.blkIndent,n=e.eMarks[t];return e.src.substr(r,n-r)}function wi(e){var t,r=[],n=0,o=e.length,i=0,s=0,a=!1,c=0;for(t=e.charCodeAt(n);n<o;)96===t?a?(a=!1,c=n):i%2==0&&(a=!0,c=n):124!==t||i%2!=0||a||(r.push(e.substring(s,n)),s=n+1),92===t?i++:i=0,++n===o&&a&&(a=!1,n=c+1),t=e.charCodeAt(n);return r.push(e.substring(s)),r}var ki=Io.isSpace,xi=Io.isSpace,Ci=Io.isSpace;function Si(e,t){var r,n,o,i;return n=e.bMarks[t]+e.tShift[t],o=e.eMarks[t],42!==(r=e.src.charCodeAt(n++))&&45!==r&&43!==r||n<o&&(i=e.src.charCodeAt(n),!Ci(i))?-1:n}function _i(e,t){var r,n=e.bMarks[t]+e.tShift[t],o=n,i=e.eMarks[t];if(o+1>=i)return-1;if((r=e.src.charCodeAt(o++))<48||r>57)return-1;for(;;){if(o>=i)return-1;if(!((r=e.src.charCodeAt(o++))>=48&&r<=57)){if(41===r||46===r)break;return-1}if(o-n>=10)return-1}return o<i&&(r=e.src.charCodeAt(o),!Ci(r))?-1:o}var Di=Io.normalizeReference,Ai=Io.isSpace,Ei=Io.isSpace,Mi="<[A-Za-z][A-Za-z0-9\\-]*(?:\\s+[a-zA-Z_:][a-zA-Z0-9:._-]*(?:\\s*=\\s*(?:[^\"'=<>`\\x00-\\x20]+|'[^']*'|\"[^\"]*\"))?)*\\s*\\/?>",Ti="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",Oi={HTML_TAG_RE:new RegExp("^(?:"+Mi+"|"+Ti+"|\x3c!----\x3e|\x3c!--(?:-?[^>-])(?:-?[^-])*--\x3e|<[?].*?[?]>|<![A-Z]+\\s+[^>]*>|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>)"),HTML_OPEN_CLOSE_TAG_RE:new RegExp("^(?:"+Mi+"|"+Ti+")")},Ni=Oi.HTML_OPEN_CLOSE_TAG_RE,qi=[[/^<(script|pre|style)(?=(\s|>|$))/i,/<\/(script|pre|style)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","meta","nav","noframes","ol","optgroup","option","p","param","section","source","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"].join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(Ni.source+"\\s*$"),/^$/,!1]],Ri=Io.isSpace;function Ii(e,t,r,n){var o,i,s,a,c,l,u,p;for(this.src=e,this.md=t,this.env=r,this.tokens=n,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0,this.result="",p=!1,s=a=l=u=0,c=(i=this.src).length;a<c;a++){if(o=i.charCodeAt(a),!p){if(Ri(o)){l++,9===o?u+=4-u%4:u++;continue}p=!0}10!==o&&a!==c-1||(10!==o&&a++,this.bMarks.push(s),this.eMarks.push(a),this.tShift.push(l),this.sCount.push(u),this.bsCount.push(0),p=!1,l=0,u=0,s=a+1)}this.bMarks.push(i.length),this.eMarks.push(i.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}Ii.prototype.push=function(e,t,r){var n=new hi(e,t,r);return n.block=!0,r<0&&this.level--,n.level=this.level,r>0&&this.level++,this.tokens.push(n),n},Ii.prototype.isEmpty=function(e){return this.bMarks[e]+this.tShift[e]>=this.eMarks[e]},Ii.prototype.skipEmptyLines=function(e){for(var t=this.lineMax;e<t&&!(this.bMarks[e]+this.tShift[e]<this.eMarks[e]);e++);return e},Ii.prototype.skipSpaces=function(e){for(var t,r=this.src.length;e<r&&(t=this.src.charCodeAt(e),Ri(t));e++);return e},Ii.prototype.skipSpacesBack=function(e,t){if(e<=t)return e;for(;e>t;)if(!Ri(this.src.charCodeAt(--e)))return e+1;return e},Ii.prototype.skipChars=function(e,t){for(var r=this.src.length;e<r&&this.src.charCodeAt(e)===t;e++);return e},Ii.prototype.skipCharsBack=function(e,t,r){if(e<=r)return e;for(;e>r;)if(t!==this.src.charCodeAt(--e))return e+1;return e},Ii.prototype.getLines=function(e,t,r,n){var o,i,s,a,c,l,u,p=e;if(e>=t)return"";for(l=new Array(t-e),o=0;p<t;p++,o++){for(i=0,u=a=this.bMarks[p],c=p+1<t||n?this.eMarks[p]+1:this.eMarks[p];a<c&&i<r;){if(s=this.src.charCodeAt(a),Ri(s))9===s?i+=4-(i+this.bsCount[p])%4:i++;else{if(!(a-u<this.tShift[p]))break;i++}a++}l[o]=i>r?new Array(i-r+1).join(" ")+this.src.slice(a,c):this.src.slice(a,c)}return l.join("")},Ii.prototype.Token=hi;var Li=Ii,zi=[["table",function(e,t,r,n){var o,i,s,a,c,l,u,p,h,d,f,m;if(t+2>r)return!1;if(c=t+1,e.sCount[c]<e.blkIndent)return!1;if(e.sCount[c]-e.blkIndent>=4)return!1;if((s=e.bMarks[c]+e.tShift[c])>=e.eMarks[c])return!1;if(124!==(o=e.src.charCodeAt(s++))&&45!==o&&58!==o)return!1;for(;s<e.eMarks[c];){if(124!==(o=e.src.charCodeAt(s))&&45!==o&&58!==o&&!yi(o))return!1;s++}for(l=(i=bi(e,t+1)).split("|"),h=[],a=0;a<l.length;a++){if(!(d=l[a].trim())){if(0===a||a===l.length-1)continue;return!1}if(!/^:?-+:?$/.test(d))return!1;58===d.charCodeAt(d.length-1)?h.push(58===d.charCodeAt(0)?"center":"right"):58===d.charCodeAt(0)?h.push("left"):h.push("")}if(-1===(i=bi(e,t).trim()).indexOf("|"))return!1;if(e.sCount[t]-e.blkIndent>=4)return!1;if((u=(l=wi(i.replace(/^\||\|$/g,""))).length)>h.length)return!1;if(n)return!0;for((p=e.push("table_open","table",1)).map=f=[t,0],(p=e.push("thead_open","thead",1)).map=[t,t+1],(p=e.push("tr_open","tr",1)).map=[t,t+1],a=0;a<l.length;a++)(p=e.push("th_open","th",1)).map=[t,t+1],h[a]&&(p.attrs=[["style","text-align:"+h[a]]]),(p=e.push("inline","",0)).content=l[a].trim(),p.map=[t,t+1],p.children=[],p=e.push("th_close","th",-1);for(p=e.push("tr_close","tr",-1),p=e.push("thead_close","thead",-1),(p=e.push("tbody_open","tbody",1)).map=m=[t+2,0],c=t+2;c<r&&!(e.sCount[c]<e.blkIndent)&&-1!==(i=bi(e,c).trim()).indexOf("|")&&!(e.sCount[c]-e.blkIndent>=4);c++){for(l=wi(i.replace(/^\||\|$/g,"")),p=e.push("tr_open","tr",1),a=0;a<u;a++)p=e.push("td_open","td",1),h[a]&&(p.attrs=[["style","text-align:"+h[a]]]),(p=e.push("inline","",0)).content=l[a]?l[a].trim():"",p.children=[],p=e.push("td_close","td",-1);p=e.push("tr_close","tr",-1)}return p=e.push("tbody_close","tbody",-1),p=e.push("table_close","table",-1),f[1]=m[1]=c,e.line=c,!0},["paragraph","reference"]],["code",function(e,t,r){var n,o,i;if(e.sCount[t]-e.blkIndent<4)return!1;for(o=n=t+1;n<r;)if(e.isEmpty(n))n++;else{if(!(e.sCount[n]-e.blkIndent>=4))break;o=++n}return e.line=o,(i=e.push("code_block","code",0)).content=e.getLines(t,o,4+e.blkIndent,!0),i.map=[t,e.line],!0}],["fence",function(e,t,r,n){var o,i,s,a,c,l,u,p=!1,h=e.bMarks[t]+e.tShift[t],d=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;if(h+3>d)return!1;if(126!==(o=e.src.charCodeAt(h))&&96!==o)return!1;if(c=h,(i=(h=e.skipChars(h,o))-c)<3)return!1;if(u=e.src.slice(c,h),s=e.src.slice(h,d),96===o&&s.indexOf(String.fromCharCode(o))>=0)return!1;if(n)return!0;for(a=t;!(++a>=r)&&!((h=c=e.bMarks[a]+e.tShift[a])<(d=e.eMarks[a])&&e.sCount[a]<e.blkIndent);)if(e.src.charCodeAt(h)===o&&!(e.sCount[a]-e.blkIndent>=4||(h=e.skipChars(h,o))-c<i||(h=e.skipSpaces(h))<d)){p=!0;break}return i=e.sCount[t],e.line=a+(p?1:0),(l=e.push("fence","code",0)).info=s,l.content=e.getLines(t+1,a,i,!0),l.markup=u,l.map=[t,e.line],!0},["paragraph","reference","blockquote","list"]],["blockquote",function(e,t,r,n){var o,i,s,a,c,l,u,p,h,d,f,m,g,v,y,b,w,k,x,C,S=e.lineMax,_=e.bMarks[t]+e.tShift[t],D=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;if(62!==e.src.charCodeAt(_++))return!1;if(n)return!0;for(a=h=e.sCount[t]+_-(e.bMarks[t]+e.tShift[t]),32===e.src.charCodeAt(_)?(_++,a++,h++,o=!1,b=!0):9===e.src.charCodeAt(_)?(b=!0,(e.bsCount[t]+h)%4==3?(_++,a++,h++,o=!1):o=!0):b=!1,d=[e.bMarks[t]],e.bMarks[t]=_;_<D&&(i=e.src.charCodeAt(_),ki(i));)9===i?h+=4-(h+e.bsCount[t]+(o?1:0))%4:h++,_++;for(f=[e.bsCount[t]],e.bsCount[t]=e.sCount[t]+1+(b?1:0),l=_>=D,v=[e.sCount[t]],e.sCount[t]=h-a,y=[e.tShift[t]],e.tShift[t]=_-e.bMarks[t],k=e.md.block.ruler.getRules("blockquote"),g=e.parentType,e.parentType="blockquote",C=!1,p=t+1;p<r&&(e.sCount[p]<e.blkIndent&&(C=!0),!((_=e.bMarks[p]+e.tShift[p])>=(D=e.eMarks[p])));p++)if(62!==e.src.charCodeAt(_++)||C){if(l)break;for(w=!1,s=0,c=k.length;s<c;s++)if(k[s](e,p,r,!0)){w=!0;break}if(w){e.lineMax=p,0!==e.blkIndent&&(d.push(e.bMarks[p]),f.push(e.bsCount[p]),y.push(e.tShift[p]),v.push(e.sCount[p]),e.sCount[p]-=e.blkIndent);break}d.push(e.bMarks[p]),f.push(e.bsCount[p]),y.push(e.tShift[p]),v.push(e.sCount[p]),e.sCount[p]=-1}else{for(a=h=e.sCount[p]+_-(e.bMarks[p]+e.tShift[p]),32===e.src.charCodeAt(_)?(_++,a++,h++,o=!1,b=!0):9===e.src.charCodeAt(_)?(b=!0,(e.bsCount[p]+h)%4==3?(_++,a++,h++,o=!1):o=!0):b=!1,d.push(e.bMarks[p]),e.bMarks[p]=_;_<D&&(i=e.src.charCodeAt(_),ki(i));)9===i?h+=4-(h+e.bsCount[p]+(o?1:0))%4:h++,_++;l=_>=D,f.push(e.bsCount[p]),e.bsCount[p]=e.sCount[p]+1+(b?1:0),v.push(e.sCount[p]),e.sCount[p]=h-a,y.push(e.tShift[p]),e.tShift[p]=_-e.bMarks[p]}for(m=e.blkIndent,e.blkIndent=0,(x=e.push("blockquote_open","blockquote",1)).markup=">",x.map=u=[t,0],e.md.block.tokenize(e,t,p),(x=e.push("blockquote_close","blockquote",-1)).markup=">",e.lineMax=S,e.parentType=g,u[1]=e.line,s=0;s<y.length;s++)e.bMarks[s+t]=d[s],e.tShift[s+t]=y[s],e.sCount[s+t]=v[s],e.bsCount[s+t]=f[s];return e.blkIndent=m,!0},["paragraph","reference","blockquote","list"]],["hr",function(e,t,r,n){var o,i,s,a,c=e.bMarks[t]+e.tShift[t],l=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;if(42!==(o=e.src.charCodeAt(c++))&&45!==o&&95!==o)return!1;for(i=1;c<l;){if((s=e.src.charCodeAt(c++))!==o&&!xi(s))return!1;s===o&&i++}return!(i<3)&&(n||(e.line=t+1,(a=e.push("hr","hr",0)).map=[t,e.line],a.markup=Array(i+1).join(String.fromCharCode(o))),!0)},["paragraph","reference","blockquote","list"]],["list",function(e,t,r,n){var o,i,s,a,c,l,u,p,h,d,f,m,g,v,y,b,w,k,x,C,S,_,D,A,E,M,T,O,N=!1,q=!0;if(e.sCount[t]-e.blkIndent>=4)return!1;if(e.listIndent>=0&&e.sCount[t]-e.listIndent>=4&&e.sCount[t]<e.blkIndent)return!1;if(n&&"paragraph"===e.parentType&&e.tShift[t]>=e.blkIndent&&(N=!0),(D=_i(e,t))>=0){if(u=!0,E=e.bMarks[t]+e.tShift[t],g=Number(e.src.substr(E,D-E-1)),N&&1!==g)return!1}else{if(!((D=Si(e,t))>=0))return!1;u=!1}if(N&&e.skipSpaces(D)>=e.eMarks[t])return!1;if(m=e.src.charCodeAt(D-1),n)return!0;for(f=e.tokens.length,u?(O=e.push("ordered_list_open","ol",1),1!==g&&(O.attrs=[["start",g]])):O=e.push("bullet_list_open","ul",1),O.map=d=[t,0],O.markup=String.fromCharCode(m),y=t,A=!1,T=e.md.block.ruler.getRules("list"),k=e.parentType,e.parentType="list";y<r;){for(_=D,v=e.eMarks[y],l=b=e.sCount[y]+D-(e.bMarks[t]+e.tShift[t]);_<v;){if(9===(o=e.src.charCodeAt(_)))b+=4-(b+e.bsCount[y])%4;else{if(32!==o)break;b++}_++}if((c=(i=_)>=v?1:b-l)>4&&(c=1),a=l+c,(O=e.push("list_item_open","li",1)).markup=String.fromCharCode(m),O.map=p=[t,0],S=e.tight,C=e.tShift[t],x=e.sCount[t],w=e.listIndent,e.listIndent=e.blkIndent,e.blkIndent=a,e.tight=!0,e.tShift[t]=i-e.bMarks[t],e.sCount[t]=b,i>=v&&e.isEmpty(t+1)?e.line=Math.min(e.line+2,r):e.md.block.tokenize(e,t,r,!0),e.tight&&!A||(q=!1),A=e.line-t>1&&e.isEmpty(e.line-1),e.blkIndent=e.listIndent,e.listIndent=w,e.tShift[t]=C,e.sCount[t]=x,e.tight=S,(O=e.push("list_item_close","li",-1)).markup=String.fromCharCode(m),y=t=e.line,p[1]=y,i=e.bMarks[t],y>=r)break;if(e.sCount[y]<e.blkIndent)break;if(e.sCount[t]-e.blkIndent>=4)break;for(M=!1,s=0,h=T.length;s<h;s++)if(T[s](e,y,r,!0)){M=!0;break}if(M)break;if(u){if((D=_i(e,y))<0)break}else if((D=Si(e,y))<0)break;if(m!==e.src.charCodeAt(D-1))break}return(O=u?e.push("ordered_list_close","ol",-1):e.push("bullet_list_close","ul",-1)).markup=String.fromCharCode(m),d[1]=y,e.line=y,e.parentType=k,q&&function(e,t){var r,n,o=e.level+2;for(r=t+2,n=e.tokens.length-2;r<n;r++)e.tokens[r].level===o&&"paragraph_open"===e.tokens[r].type&&(e.tokens[r+2].hidden=!0,e.tokens[r].hidden=!0,r+=2)}(e,f),!0},["paragraph","reference","blockquote"]],["reference",function(e,t,r,n){var o,i,s,a,c,l,u,p,h,d,f,m,g,v,y,b,w=0,k=e.bMarks[t]+e.tShift[t],x=e.eMarks[t],C=t+1;if(e.sCount[t]-e.blkIndent>=4)return!1;if(91!==e.src.charCodeAt(k))return!1;for(;++k<x;)if(93===e.src.charCodeAt(k)&&92!==e.src.charCodeAt(k-1)){if(k+1===x)return!1;if(58!==e.src.charCodeAt(k+1))return!1;break}for(a=e.lineMax,y=e.md.block.ruler.getRules("reference"),d=e.parentType,e.parentType="reference";C<a&&!e.isEmpty(C);C++)if(!(e.sCount[C]-e.blkIndent>3||e.sCount[C]<0)){for(v=!1,l=0,u=y.length;l<u;l++)if(y[l](e,C,a,!0)){v=!0;break}if(v)break}for(x=(g=e.getLines(t,C,e.blkIndent,!1).trim()).length,k=1;k<x;k++){if(91===(o=g.charCodeAt(k)))return!1;if(93===o){h=k;break}(10===o||92===o&&++k<x&&10===g.charCodeAt(k))&&w++}if(h<0||58!==g.charCodeAt(h+1))return!1;for(k=h+2;k<x;k++)if(10===(o=g.charCodeAt(k)))w++;else if(!Ai(o))break;if(!(f=e.md.helpers.parseLinkDestination(g,k,x)).ok)return!1;if(c=e.md.normalizeLink(f.str),!e.md.validateLink(c))return!1;for(i=k=f.pos,s=w+=f.lines,m=k;k<x;k++)if(10===(o=g.charCodeAt(k)))w++;else if(!Ai(o))break;for(f=e.md.helpers.parseLinkTitle(g,k,x),k<x&&m!==k&&f.ok?(b=f.str,k=f.pos,w+=f.lines):(b="",k=i,w=s);k<x&&(o=g.charCodeAt(k),Ai(o));)k++;if(k<x&&10!==g.charCodeAt(k)&&b)for(b="",k=i,w=s;k<x&&(o=g.charCodeAt(k),Ai(o));)k++;return!(k<x&&10!==g.charCodeAt(k))&&(!!(p=Di(g.slice(1,h)))&&(n||(void 0===e.env.references&&(e.env.references={}),void 0===e.env.references[p]&&(e.env.references[p]={title:b,href:c}),e.parentType=d,e.line=t+w+1),!0))}],["heading",function(e,t,r,n){var o,i,s,a,c=e.bMarks[t]+e.tShift[t],l=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;if(35!==(o=e.src.charCodeAt(c))||c>=l)return!1;for(i=1,o=e.src.charCodeAt(++c);35===o&&c<l&&i<=6;)i++,o=e.src.charCodeAt(++c);return!(i>6||c<l&&!Ei(o))&&(n||(l=e.skipSpacesBack(l,c),(s=e.skipCharsBack(l,35,c))>c&&Ei(e.src.charCodeAt(s-1))&&(l=s),e.line=t+1,(a=e.push("heading_open","h"+String(i),1)).markup="########".slice(0,i),a.map=[t,e.line],(a=e.push("inline","",0)).content=e.src.slice(c,l).trim(),a.map=[t,e.line],a.children=[],(a=e.push("heading_close","h"+String(i),-1)).markup="########".slice(0,i)),!0)},["paragraph","reference","blockquote"]],["lheading",function(e,t,r){var n,o,i,s,a,c,l,u,p,h,d=t+1,f=e.md.block.ruler.getRules("paragraph");if(e.sCount[t]-e.blkIndent>=4)return!1;for(h=e.parentType,e.parentType="paragraph";d<r&&!e.isEmpty(d);d++)if(!(e.sCount[d]-e.blkIndent>3)){if(e.sCount[d]>=e.blkIndent&&(c=e.bMarks[d]+e.tShift[d])<(l=e.eMarks[d])&&(45===(p=e.src.charCodeAt(c))||61===p)&&(c=e.skipChars(c,p),(c=e.skipSpaces(c))>=l)){u=61===p?1:2;break}if(!(e.sCount[d]<0)){for(o=!1,i=0,s=f.length;i<s;i++)if(f[i](e,d,r,!0)){o=!0;break}if(o)break}}return!!u&&(n=e.getLines(t,d,e.blkIndent,!1).trim(),e.line=d+1,(a=e.push("heading_open","h"+String(u),1)).markup=String.fromCharCode(p),a.map=[t,e.line],(a=e.push("inline","",0)).content=n,a.map=[t,e.line-1],a.children=[],(a=e.push("heading_close","h"+String(u),-1)).markup=String.fromCharCode(p),e.parentType=h,!0)}],["html_block",function(e,t,r,n){var o,i,s,a,c=e.bMarks[t]+e.tShift[t],l=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;if(!e.md.options.html)return!1;if(60!==e.src.charCodeAt(c))return!1;for(a=e.src.slice(c,l),o=0;o<qi.length&&!qi[o][0].test(a);o++);if(o===qi.length)return!1;if(n)return qi[o][2];if(i=t+1,!qi[o][1].test(a))for(;i<r&&!(e.sCount[i]<e.blkIndent);i++)if(c=e.bMarks[i]+e.tShift[i],l=e.eMarks[i],a=e.src.slice(c,l),qi[o][1].test(a)){0!==a.length&&i++;break}return e.line=i,(s=e.push("html_block","",0)).map=[t,i],s.content=e.getLines(t,i,e.blkIndent,!0),!0},["paragraph","reference","blockquote"]],["paragraph",function(e,t){var r,n,o,i,s,a,c=t+1,l=e.md.block.ruler.getRules("paragraph"),u=e.lineMax;for(a=e.parentType,e.parentType="paragraph";c<u&&!e.isEmpty(c);c++)if(!(e.sCount[c]-e.blkIndent>3||e.sCount[c]<0)){for(n=!1,o=0,i=l.length;o<i;o++)if(l[o](e,c,u,!0)){n=!0;break}if(n)break}return r=e.getLines(t,c,e.blkIndent,!1).trim(),e.line=c,(s=e.push("paragraph_open","p",1)).map=[t,e.line],(s=e.push("inline","",0)).content=r,s.map=[t,e.line],s.children=[],s=e.push("paragraph_close","p",-1),e.parentType=a,!0}]];function Fi(){this.ruler=new Jo;for(var e=0;e<zi.length;e++)this.ruler.push(zi[e][0],zi[e][1],{alt:(zi[e][2]||[]).slice()})}Fi.prototype.tokenize=function(e,t,r){for(var n,o=this.ruler.getRules(""),i=o.length,s=t,a=!1,c=e.md.options.maxNesting;s<r&&(e.line=s=e.skipEmptyLines(s),!(s>=r))&&!(e.sCount[s]<e.blkIndent);){if(e.level>=c){e.line=r;break}for(n=0;n<i&&!o[n](e,s,r,!1);n++);e.tight=!a,e.isEmpty(e.line-1)&&(a=!0),(s=e.line)<r&&e.isEmpty(s)&&(a=!0,s++,e.line=s)}},Fi.prototype.parse=function(e,t,r,n){var o;e&&(o=new this.State(e,t,r,n),this.tokenize(o,o.line,o.lineMax))},Fi.prototype.State=Li;var Bi=Fi;function Pi(e){switch(e){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}for(var Vi=Io.isSpace,$i=Io.isSpace,ji=[],Hi=0;Hi<256;Hi++)ji.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach((function(e){ji[e.charCodeAt(0)]=1}));function Ui(e,t){var r,n,o,i,s,a=[],c=t.length;for(r=0;r<c;r++)126===(o=t[r]).marker&&-1!==o.end&&(i=t[o.end],(s=e.tokens[o.token]).type="s_open",s.tag="s",s.nesting=1,s.markup="~~",s.content="",(s=e.tokens[i.token]).type="s_close",s.tag="s",s.nesting=-1,s.markup="~~",s.content="","text"===e.tokens[i.token-1].type&&"~"===e.tokens[i.token-1].content&&a.push(i.token-1));for(;a.length;){for(n=(r=a.pop())+1;n<e.tokens.length&&"s_close"===e.tokens[n].type;)n++;r!==--n&&(s=e.tokens[n],e.tokens[n]=e.tokens[r],e.tokens[r]=s)}}var Ji={tokenize:function(e,t){var r,n,o,i,s=e.pos,a=e.src.charCodeAt(s);if(t)return!1;if(126!==a)return!1;if(o=(n=e.scanDelims(e.pos,!0)).length,i=String.fromCharCode(a),o<2)return!1;for(o%2&&(e.push("text","",0).content=i,o--),r=0;r<o;r+=2)e.push("text","",0).content=i+i,e.delimiters.push({marker:a,length:0,jump:r,token:e.tokens.length-1,end:-1,open:n.can_open,close:n.can_close});return e.pos+=n.length,!0},postProcess:function(e){var t,r=e.tokens_meta,n=e.tokens_meta.length;for(Ui(e,e.delimiters),t=0;t<n;t++)r[t]&&r[t].delimiters&&Ui(e,r[t].delimiters)}};function Gi(e,t){var r,n,o,i,s,a;for(r=t.length-1;r>=0;r--)95!==(n=t[r]).marker&&42!==n.marker||-1!==n.end&&(o=t[n.end],a=r>0&&t[r-1].end===n.end+1&&t[r-1].token===n.token-1&&t[n.end+1].token===o.token+1&&t[r-1].marker===n.marker,s=String.fromCharCode(n.marker),(i=e.tokens[n.token]).type=a?"strong_open":"em_open",i.tag=a?"strong":"em",i.nesting=1,i.markup=a?s+s:s,i.content="",(i=e.tokens[o.token]).type=a?"strong_close":"em_close",i.tag=a?"strong":"em",i.nesting=-1,i.markup=a?s+s:s,i.content="",a&&(e.tokens[t[r-1].token].content="",e.tokens[t[n.end+1].token].content="",r--))}var Wi={tokenize:function(e,t){var r,n,o=e.pos,i=e.src.charCodeAt(o);if(t)return!1;if(95!==i&&42!==i)return!1;for(n=e.scanDelims(e.pos,42===i),r=0;r<n.length;r++)e.push("text","",0).content=String.fromCharCode(i),e.delimiters.push({marker:i,length:n.length,jump:r,token:e.tokens.length-1,end:-1,open:n.can_open,close:n.can_close});return e.pos+=n.length,!0},postProcess:function(e){var t,r=e.tokens_meta,n=e.tokens_meta.length;for(Gi(e,e.delimiters),t=0;t<n;t++)r[t]&&r[t].delimiters&&Gi(e,r[t].delimiters)}},Ki=Io.normalizeReference,Zi=Io.isSpace,Yi=Io.normalizeReference,Qi=Io.isSpace,Xi=/^<([a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)>/,es=/^<([a-zA-Z][a-zA-Z0-9+.\-]{1,31}):([^<>\x00-\x20]*)>/,ts=Oi.HTML_TAG_RE;var rs=Io.has,ns=Io.isValidEntityCode,is=Io.fromCodePoint,ss=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,as=/^&([a-z][a-z0-9]{1,31});/i;function cs(e,t){var r,n,o,i,s,a,c,l,u={},p=t.length;for(r=0;r<p;r++)if((o=t[r]).length=o.length||0,o.close){for(u.hasOwnProperty(o.marker)||(u[o.marker]=[-1,-1,-1]),s=u[o.marker][o.length%3],a=-1,n=r-o.jump-1;n>s;n-=i.jump+1)if((i=t[n]).marker===o.marker&&(-1===a&&(a=n),i.open&&i.end<0&&i.level===o.level&&(c=!1,(i.close||o.open)&&(i.length+o.length)%3==0&&(i.length%3==0&&o.length%3==0||(c=!0)),!c))){l=n>0&&!t[n-1].open?t[n-1].jump+1:0,o.jump=r-n+l,o.open=!1,i.end=r,i.jump=l,i.close=!1,a=-1;break}-1!==a&&(u[o.marker][(o.length||0)%3]=a)}}var ls=Io.isWhiteSpace,us=Io.isPunctChar,ps=Io.isMdAsciiPunct;function hs(e,t,r,n){this.src=e,this.env=r,this.md=t,this.tokens=n,this.tokens_meta=Array(n.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[]}hs.prototype.pushPending=function(){var e=new hi("text","",0);return e.content=this.pending,e.level=this.pendingLevel,this.tokens.push(e),this.pending="",e},hs.prototype.push=function(e,t,r){this.pending&&this.pushPending();var n=new hi(e,t,r),o=null;return r<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),n.level=this.level,r>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],o={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(n),this.tokens_meta.push(o),n},hs.prototype.scanDelims=function(e,t){var r,n,o,i,s,a,c,l,u,p=e,h=!0,d=!0,f=this.posMax,m=this.src.charCodeAt(e);for(r=e>0?this.src.charCodeAt(e-1):32;p<f&&this.src.charCodeAt(p)===m;)p++;return o=p-e,n=p<f?this.src.charCodeAt(p):32,c=ps(r)||us(String.fromCharCode(r)),u=ps(n)||us(String.fromCharCode(n)),a=ls(r),(l=ls(n))?h=!1:u&&(a||c||(h=!1)),a?d=!1:c&&(l||u||(d=!1)),t?(i=h,s=d):(i=h&&(!d||c),s=d&&(!h||u)),{can_open:i,can_close:s,length:o}},hs.prototype.Token=hi;var ds=hs,fs=[["text",function(e,t){for(var r=e.pos;r<e.posMax&&!Pi(e.src.charCodeAt(r));)r++;return r!==e.pos&&(t||(e.pending+=e.src.slice(e.pos,r)),e.pos=r,!0)}],["newline",function(e,t){var r,n,o=e.pos;if(10!==e.src.charCodeAt(o))return!1;for(r=e.pending.length-1,n=e.posMax,t||(r>=0&&32===e.pending.charCodeAt(r)?r>=1&&32===e.pending.charCodeAt(r-1)?(e.pending=e.pending.replace(/ +$/,""),e.push("hardbreak","br",0)):(e.pending=e.pending.slice(0,-1),e.push("softbreak","br",0)):e.push("softbreak","br",0)),o++;o<n&&Vi(e.src.charCodeAt(o));)o++;return e.pos=o,!0}],["escape",function(e,t){var r,n=e.pos,o=e.posMax;if(92!==e.src.charCodeAt(n))return!1;if(++n<o){if((r=e.src.charCodeAt(n))<256&&0!==ji[r])return t||(e.pending+=e.src[n]),e.pos+=2,!0;if(10===r){for(t||e.push("hardbreak","br",0),n++;n<o&&(r=e.src.charCodeAt(n),$i(r));)n++;return e.pos=n,!0}}return t||(e.pending+="\\"),e.pos++,!0}],["backticks",function(e,t){var r,n,o,i,s,a,c=e.pos;if(96!==e.src.charCodeAt(c))return!1;for(r=c,c++,n=e.posMax;c<n&&96===e.src.charCodeAt(c);)c++;for(o=e.src.slice(r,c),i=s=c;-1!==(i=e.src.indexOf("`",s));){for(s=i+1;s<n&&96===e.src.charCodeAt(s);)s++;if(s-i===o.length)return t||((a=e.push("code_inline","code",0)).markup=o,a.content=e.src.slice(c,i).replace(/\n/g," ").replace(/^ (.+) $/,"$1")),e.pos=s,!0}return t||(e.pending+=o),e.pos+=o.length,!0}],["strikethrough",Ji.tokenize],["emphasis",Wi.tokenize],["link",function(e,t){var r,n,o,i,s,a,c,l,u,p="",h=e.pos,d=e.posMax,f=e.pos,m=!0;if(91!==e.src.charCodeAt(e.pos))return!1;if(s=e.pos+1,(i=e.md.helpers.parseLinkLabel(e,e.pos,!0))<0)return!1;if((a=i+1)<d&&40===e.src.charCodeAt(a)){for(m=!1,a++;a<d&&(n=e.src.charCodeAt(a),Zi(n)||10===n);a++);if(a>=d)return!1;for(f=a,(c=e.md.helpers.parseLinkDestination(e.src,a,e.posMax)).ok&&(p=e.md.normalizeLink(c.str),e.md.validateLink(p)?a=c.pos:p=""),f=a;a<d&&(n=e.src.charCodeAt(a),Zi(n)||10===n);a++);if(c=e.md.helpers.parseLinkTitle(e.src,a,e.posMax),a<d&&f!==a&&c.ok)for(u=c.str,a=c.pos;a<d&&(n=e.src.charCodeAt(a),Zi(n)||10===n);a++);else u="";(a>=d||41!==e.src.charCodeAt(a))&&(m=!0),a++}if(m){if(void 0===e.env.references)return!1;if(a<d&&91===e.src.charCodeAt(a)?(f=a+1,(a=e.md.helpers.parseLinkLabel(e,a))>=0?o=e.src.slice(f,a++):a=i+1):a=i+1,o||(o=e.src.slice(s,i)),!(l=e.env.references[Ki(o)]))return e.pos=h,!1;p=l.href,u=l.title}return t||(e.pos=s,e.posMax=i,e.push("link_open","a",1).attrs=r=[["href",p]],u&&r.push(["title",u]),e.md.inline.tokenize(e),e.push("link_close","a",-1)),e.pos=a,e.posMax=d,!0}],["image",function(e,t){var r,n,o,i,s,a,c,l,u,p,h,d,f,m="",g=e.pos,v=e.posMax;if(33!==e.src.charCodeAt(e.pos))return!1;if(91!==e.src.charCodeAt(e.pos+1))return!1;if(a=e.pos+2,(s=e.md.helpers.parseLinkLabel(e,e.pos+1,!1))<0)return!1;if((c=s+1)<v&&40===e.src.charCodeAt(c)){for(c++;c<v&&(n=e.src.charCodeAt(c),Qi(n)||10===n);c++);if(c>=v)return!1;for(f=c,(u=e.md.helpers.parseLinkDestination(e.src,c,e.posMax)).ok&&(m=e.md.normalizeLink(u.str),e.md.validateLink(m)?c=u.pos:m=""),f=c;c<v&&(n=e.src.charCodeAt(c),Qi(n)||10===n);c++);if(u=e.md.helpers.parseLinkTitle(e.src,c,e.posMax),c<v&&f!==c&&u.ok)for(p=u.str,c=u.pos;c<v&&(n=e.src.charCodeAt(c),Qi(n)||10===n);c++);else p="";if(c>=v||41!==e.src.charCodeAt(c))return e.pos=g,!1;c++}else{if(void 0===e.env.references)return!1;if(c<v&&91===e.src.charCodeAt(c)?(f=c+1,(c=e.md.helpers.parseLinkLabel(e,c))>=0?i=e.src.slice(f,c++):c=s+1):c=s+1,i||(i=e.src.slice(a,s)),!(l=e.env.references[Yi(i)]))return e.pos=g,!1;m=l.href,p=l.title}return t||(o=e.src.slice(a,s),e.md.inline.parse(o,e.md,e.env,d=[]),(h=e.push("image","img",0)).attrs=r=[["src",m],["alt",""]],h.children=d,h.content=o,p&&r.push(["title",p])),e.pos=c,e.posMax=v,!0}],["autolink",function(e,t){var r,n,o,i,s,a,c=e.pos;return 60===e.src.charCodeAt(c)&&(!((r=e.src.slice(c)).indexOf(">")<0)&&(es.test(r)?(i=(n=r.match(es))[0].slice(1,-1),s=e.md.normalizeLink(i),!!e.md.validateLink(s)&&(t||((a=e.push("link_open","a",1)).attrs=[["href",s]],a.markup="autolink",a.info="auto",(a=e.push("text","",0)).content=e.md.normalizeLinkText(i),(a=e.push("link_close","a",-1)).markup="autolink",a.info="auto"),e.pos+=n[0].length,!0)):!!Xi.test(r)&&(i=(o=r.match(Xi))[0].slice(1,-1),s=e.md.normalizeLink("mailto:"+i),!!e.md.validateLink(s)&&(t||((a=e.push("link_open","a",1)).attrs=[["href",s]],a.markup="autolink",a.info="auto",(a=e.push("text","",0)).content=e.md.normalizeLinkText(i),(a=e.push("link_close","a",-1)).markup="autolink",a.info="auto"),e.pos+=o[0].length,!0))))}],["html_inline",function(e,t){var r,n,o,i=e.pos;return!!e.md.options.html&&(o=e.posMax,!(60!==e.src.charCodeAt(i)||i+2>=o)&&(!(33!==(r=e.src.charCodeAt(i+1))&&63!==r&&47!==r&&!function(e){var t=32|e;return t>=97&&t<=122}(r))&&(!!(n=e.src.slice(i).match(ts))&&(t||(e.push("html_inline","",0).content=e.src.slice(i,i+n[0].length)),e.pos+=n[0].length,!0))))}],["entity",function(e,t){var r,n,o=e.pos,i=e.posMax;if(38!==e.src.charCodeAt(o))return!1;if(o+1<i)if(35===e.src.charCodeAt(o+1)){if(n=e.src.slice(o).match(ss))return t||(r="x"===n[1][0].toLowerCase()?parseInt(n[1].slice(1),16):parseInt(n[1],10),e.pending+=ns(r)?is(r):is(65533)),e.pos+=n[0].length,!0}else if((n=e.src.slice(o).match(as))&&rs(co,n[1]))return t||(e.pending+=co[n[1]]),e.pos+=n[0].length,!0;return t||(e.pending+="&"),e.pos++,!0}]],ms=[["balance_pairs",function(e){var t,r=e.tokens_meta,n=e.tokens_meta.length;for(cs(0,e.delimiters),t=0;t<n;t++)r[t]&&r[t].delimiters&&cs(0,r[t].delimiters)}],["strikethrough",Ji.postProcess],["emphasis",Wi.postProcess],["text_collapse",function(e){var t,r,n=0,o=e.tokens,i=e.tokens.length;for(t=r=0;t<i;t++)o[t].nesting<0&&n--,o[t].level=n,o[t].nesting>0&&n++,"text"===o[t].type&&t+1<i&&"text"===o[t+1].type?o[t+1].content=o[t].content+o[t+1].content:(t!==r&&(o[r]=o[t]),r++);t!==r&&(o.length=r)}]];function gs(){var e;for(this.ruler=new Jo,e=0;e<fs.length;e++)this.ruler.push(fs[e][0],fs[e][1]);for(this.ruler2=new Jo,e=0;e<ms.length;e++)this.ruler2.push(ms[e][0],ms[e][1])}gs.prototype.skipToken=function(e){var t,r,n=e.pos,o=this.ruler.getRules(""),i=o.length,s=e.md.options.maxNesting,a=e.cache;if(void 0===a[n]){if(e.level<s)for(r=0;r<i&&(e.level++,t=o[r](e,!0),e.level--,!t);r++);else e.pos=e.posMax;t||e.pos++,a[n]=e.pos}else e.pos=a[n]},gs.prototype.tokenize=function(e){for(var t,r,n=this.ruler.getRules(""),o=n.length,i=e.posMax,s=e.md.options.maxNesting;e.pos<i;){if(e.level<s)for(r=0;r<o&&!(t=n[r](e,!1));r++);if(t){if(e.pos>=i)break}else e.pending+=e.src[e.pos++]}e.pending&&e.pushPending()},gs.prototype.parse=function(e,t,r,n){var o,i,s,a=new this.State(e,t,r,n);for(this.tokenize(a),s=(i=this.ruler2.getRules("")).length,o=0;o<s;o++)i[o](a)},gs.prototype.State=ds;var vs=gs;function ys(e){var t=Array.prototype.slice.call(arguments,1);return t.forEach((function(t){t&&Object.keys(t).forEach((function(r){e[r]=t[r]}))})),e}function bs(e){return Object.prototype.toString.call(e)}function ws(e){return"[object Function]"===bs(e)}function ks(e){return e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}var xs={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};var Cs={"http:":{validate:function(e,t,r){var n=e.slice(t);return r.re.http||(r.re.http=new RegExp("^\\/\\/"+r.re.src_auth+r.re.src_host_port_strict+r.re.src_path,"i")),r.re.http.test(n)?n.match(r.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(e,t,r){var n=e.slice(t);return r.re.no_http||(r.re.no_http=new RegExp("^"+r.re.src_auth+"(?:localhost|(?:(?:"+r.re.src_domain+")\\.)+"+r.re.src_domain_root+")"+r.re.src_port+r.re.src_host_terminator+r.re.src_path,"i")),r.re.no_http.test(n)?t>=3&&":"===e[t-3]||t>=3&&"/"===e[t-3]?0:n.match(r.re.no_http)[0].length:0}},"mailto:":{validate:function(e,t,r){var n=e.slice(t);return r.re.mailto||(r.re.mailto=new RegExp("^"+r.re.src_email_name+"@"+r.re.src_host_strict,"i")),r.re.mailto.test(n)?n.match(r.re.mailto)[0].length:0}}},Ss="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|рф".split("|");function _s(e){var t=e.re=function(e){var t={};t.src_Any=Oo.source,t.src_Cc=No.source,t.src_Z=qo.source,t.src_P=lo.source,t.src_ZPCc=[t.src_Z,t.src_P,t.src_Cc].join("|"),t.src_ZCc=[t.src_Z,t.src_Cc].join("|");return t.src_pseudo_letter="(?:(?![><｜]|"+t.src_ZPCc+")"+t.src_Any+")",t.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",t.src_auth="(?:(?:(?!"+t.src_ZCc+"|[@/\\[\\]()]).)+@)?",t.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",t.src_host_terminator="(?=$|[><｜]|"+t.src_ZPCc+")(?!-|_|:\\d|\\.-|\\.(?!$|"+t.src_ZPCc+"))",t.src_path="(?:[/?#](?:(?!"+t.src_ZCc+"|[><｜]|[()[\\]{}.,\"'?!\\-]).|\\[(?:(?!"+t.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+t.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+t.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+t.src_ZCc+'|["]).)+\\"|\\\'(?:(?!'+t.src_ZCc+"|[']).)+\\'|\\'(?="+t.src_pseudo_letter+"|[-]).|\\.{2,4}[a-zA-Z0-9%/]|\\.(?!"+t.src_ZCc+"|[.]).|"+(e&&e["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+"\\,(?!"+t.src_ZCc+").|\\!(?!"+t.src_ZCc+"|[!]).|\\?(?!"+t.src_ZCc+"|[?]).)+|\\/)?",t.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',t.src_xn="xn--[a-z0-9\\-]{1,59}",t.src_domain_root="(?:"+t.src_xn+"|"+t.src_pseudo_letter+"{1,63})",t.src_domain="(?:"+t.src_xn+"|(?:"+t.src_pseudo_letter+")|(?:"+t.src_pseudo_letter+"(?:-|"+t.src_pseudo_letter+"){0,61}"+t.src_pseudo_letter+"))",t.src_host="(?:(?:(?:(?:"+t.src_domain+")\\.)*"+t.src_domain+"))",t.tpl_host_fuzzy="(?:"+t.src_ip4+"|(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%)))",t.tpl_host_no_ip_fuzzy="(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%))",t.src_host_strict=t.src_host+t.src_host_terminator,t.tpl_host_fuzzy_strict=t.tpl_host_fuzzy+t.src_host_terminator,t.src_host_port_strict=t.src_host+t.src_port+t.src_host_terminator,t.tpl_host_port_fuzzy_strict=t.tpl_host_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_port_no_ip_fuzzy_strict=t.tpl_host_no_ip_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+t.src_ZPCc+"|>|$))",t.tpl_email_fuzzy='(^|[><｜]|"|\\(|'+t.src_ZCc+")("+t.src_email_name+"@"+t.tpl_host_fuzzy_strict+")",t.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|｜]|"+t.src_ZPCc+"))((?![$+<=>^`|｜])"+t.tpl_host_port_fuzzy_strict+t.src_path+")",t.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|｜]|"+t.src_ZPCc+"))((?![$+<=>^`|｜])"+t.tpl_host_port_no_ip_fuzzy_strict+t.src_path+")",t}(e.__opts__),r=e.__tlds__.slice();function n(e){return e.replace("%TLDS%",t.src_tlds)}e.onCompile(),e.__tlds_replaced__||r.push("a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]"),r.push(t.src_xn),t.src_tlds=r.join("|"),t.email_fuzzy=RegExp(n(t.tpl_email_fuzzy),"i"),t.link_fuzzy=RegExp(n(t.tpl_link_fuzzy),"i"),t.link_no_ip_fuzzy=RegExp(n(t.tpl_link_no_ip_fuzzy),"i"),t.host_fuzzy_test=RegExp(n(t.tpl_host_fuzzy_test),"i");var o=[];function i(e,t){throw new Error('(LinkifyIt) Invalid schema "'+e+'": '+t)}e.__compiled__={},Object.keys(e.__schemas__).forEach((function(t){var r=e.__schemas__[t];if(null!==r){var n={validate:null,link:null};if(e.__compiled__[t]=n,"[object Object]"===bs(r))return!function(e){return"[object RegExp]"===bs(e)}(r.validate)?ws(r.validate)?n.validate=r.validate:i(t,r):n.validate=function(e){return function(t,r){var n=t.slice(r);return e.test(n)?n.match(e)[0].length:0}}(r.validate),void(ws(r.normalize)?n.normalize=r.normalize:r.normalize?i(t,r):n.normalize=function(e,t){t.normalize(e)});!function(e){return"[object String]"===bs(e)}(r)?i(t,r):o.push(t)}})),o.forEach((function(t){e.__compiled__[e.__schemas__[t]]&&(e.__compiled__[t].validate=e.__compiled__[e.__schemas__[t]].validate,e.__compiled__[t].normalize=e.__compiled__[e.__schemas__[t]].normalize)})),e.__compiled__[""]={validate:null,normalize:function(e,t){t.normalize(e)}};var s=Object.keys(e.__compiled__).filter((function(t){return t.length>0&&e.__compiled__[t]})).map(ks).join("|");e.re.schema_test=RegExp("(^|(?!_)(?:[><｜]|"+t.src_ZPCc+"))("+s+")","i"),e.re.schema_search=RegExp("(^|(?!_)(?:[><｜]|"+t.src_ZPCc+"))("+s+")","ig"),e.re.pretest=RegExp("("+e.re.schema_test.source+")|("+e.re.host_fuzzy_test.source+")|@","i"),function(e){e.__index__=-1,e.__text_cache__=""}(e)}function Ds(e,t){var r=e.__index__,n=e.__last_index__,o=e.__text_cache__.slice(r,n);this.schema=e.__schema__.toLowerCase(),this.index=r+t,this.lastIndex=n+t,this.raw=o,this.text=o,this.url=o}function As(e,t){var r=new Ds(e,t);return e.__compiled__[r.schema].normalize(r,e),r}function Es(e,t){if(!(this instanceof Es))return new Es(e,t);var r;t||(r=e,Object.keys(r||{}).reduce((function(e,t){return e||xs.hasOwnProperty(t)}),!1)&&(t=e,e={})),this.__opts__=ys({},xs,t),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=ys({},Cs,e),this.__compiled__={},this.__tlds__=Ss,this.__tlds_replaced__=!1,this.re={},_s(this)}Es.prototype.add=function(e,t){return this.__schemas__[e]=t,_s(this),this},Es.prototype.set=function(e){return this.__opts__=ys(this.__opts__,e),this},Es.prototype.test=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return!1;var t,r,n,o,i,s,a,c;if(this.re.schema_test.test(e))for((a=this.re.schema_search).lastIndex=0;null!==(t=a.exec(e));)if(o=this.testSchemaAt(e,t[2],a.lastIndex)){this.__schema__=t[2],this.__index__=t.index+t[1].length,this.__last_index__=t.index+t[0].length+o;break}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(c=e.search(this.re.host_fuzzy_test))>=0&&(this.__index__<0||c<this.__index__)&&null!==(r=e.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))&&(i=r.index+r[1].length,(this.__index__<0||i<this.__index__)&&(this.__schema__="",this.__index__=i,this.__last_index__=r.index+r[0].length)),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&e.indexOf("@")>=0&&null!==(n=e.match(this.re.email_fuzzy))&&(i=n.index+n[1].length,s=n.index+n[0].length,(this.__index__<0||i<this.__index__||i===this.__index__&&s>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=i,this.__last_index__=s)),this.__index__>=0},Es.prototype.pretest=function(e){return this.re.pretest.test(e)},Es.prototype.testSchemaAt=function(e,t,r){return this.__compiled__[t.toLowerCase()]?this.__compiled__[t.toLowerCase()].validate(e,r,this):0},Es.prototype.match=function(e){var t=0,r=[];this.__index__>=0&&this.__text_cache__===e&&(r.push(As(this,t)),t=this.__last_index__);for(var n=t?e.slice(t):e;this.test(n);)r.push(As(this,t)),n=n.slice(this.__last_index__),t+=this.__last_index__;return r.length?r:null},Es.prototype.tlds=function(e,t){return e=Array.isArray(e)?e:[e],t?(this.__tlds__=this.__tlds__.concat(e).sort().filter((function(e,t,r){return e!==r[t-1]})).reverse(),_s(this),this):(this.__tlds__=e.slice(),this.__tlds_replaced__=!0,_s(this),this)},Es.prototype.normalize=function(e){e.schema||(e.url="http://"+e.url),"mailto:"!==e.schema||/^mailto:/i.test(e.url)||(e.url="mailto:"+e.url)},Es.prototype.onCompile=function(){};var Ms=Es;const Ts=2147483647,Os=/^xn--/,Ns=/[^\0-\x7E]/,qs=/[\x2E\u3002\uFF0E\uFF61]/g,Rs={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Is=Math.floor,Ls=String.fromCharCode;function zs(e){throw new RangeError(Rs[e])}function Fs(e,t){const r=e.split("@");let n="";r.length>1&&(n=r[0]+"@",e=r[1]);const o=function(e,t){const r=[];let n=e.length;for(;n--;)r[n]=t(e[n]);return r}((e=e.replace(qs,".")).split("."),t).join(".");return n+o}function Bs(e){const t=[];let r=0;const n=e.length;for(;r<n;){const o=e.charCodeAt(r++);if(o>=55296&&o<=56319&&r<n){const n=e.charCodeAt(r++);56320==(64512&n)?t.push(((1023&o)<<10)+(1023&n)+65536):(t.push(o),r--)}else t.push(o)}return t}const Ps=function(e,t){return e+22+75*(e<26)-((0!=t)<<5)},Vs=function(e,t,r){let n=0;for(e=r?Is(e/700):e>>1,e+=Is(e/t);e>455;n+=36)e=Is(e/35);return Is(n+36*e/(e+38))},$s=function(e){const t=[],r=e.length;let n=0,o=128,i=72,s=e.lastIndexOf("-");s<0&&(s=0);for(let r=0;r<s;++r)e.charCodeAt(r)>=128&&zs("not-basic"),t.push(e.charCodeAt(r));for(let c=s>0?s+1:0;c<r;){let s=n;for(let t=1,o=36;;o+=36){c>=r&&zs("invalid-input");const s=(a=e.charCodeAt(c++))-48<10?a-22:a-65<26?a-65:a-97<26?a-97:36;(s>=36||s>Is((Ts-n)/t))&&zs("overflow"),n+=s*t;const l=o<=i?1:o>=i+26?26:o-i;if(s<l)break;const u=36-l;t>Is(Ts/u)&&zs("overflow"),t*=u}const l=t.length+1;i=Vs(n-s,l,0==s),Is(n/l)>Ts-o&&zs("overflow"),o+=Is(n/l),n%=l,t.splice(n++,0,o)}var a;return String.fromCodePoint(...t)},js=function(e){const t=[];let r=(e=Bs(e)).length,n=128,o=0,i=72;for(const r of e)r<128&&t.push(Ls(r));let s=t.length,a=s;for(s&&t.push("-");a<r;){let r=Ts;for(const t of e)t>=n&&t<r&&(r=t);const c=a+1;r-n>Is((Ts-o)/c)&&zs("overflow"),o+=(r-n)*c,n=r;for(const r of e)if(r<n&&++o>Ts&&zs("overflow"),r==n){let e=o;for(let r=36;;r+=36){const n=r<=i?1:r>=i+26?26:r-i;if(e<n)break;const o=e-n,s=36-n;t.push(Ls(Ps(n+o%s,0))),e=Is(o/s)}t.push(Ls(Ps(e,0))),i=Vs(o,c,a==s),o=0,++a}++o,++n}return t.join("")},Hs=function(e){return Fs(e,(function(e){return Ns.test(e)?"xn--"+js(e):e}))},Us=function(e){return Fs(e,(function(e){return Os.test(e)?$s(e.slice(4).toLowerCase()):e}))};var Js={default:{options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}},zero:{options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","text_collapse"]}}},commonmark:{options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","text_collapse"]}}}},Gs=/^(vbscript|javascript|file|data):/,Ws=/^data:image\/(gif|png|jpeg|webp);/;function Ks(e){var t=e.trim().toLowerCase();return!Gs.test(t)||!!Ws.test(t)}var Zs=["http:","https:","mailto:"];function Ys(e){var t=To.parse(e,!0);if(t.hostname&&(!t.protocol||Zs.indexOf(t.protocol)>=0))try{t.hostname=Hs(t.hostname)}catch(e){}return To.encode(To.format(t))}function Qs(e){var t=To.parse(e,!0);if(t.hostname&&(!t.protocol||Zs.indexOf(t.protocol)>=0))try{t.hostname=Us(t.hostname)}catch(e){}return To.decode(To.format(t))}function Xs(e,t){if(!(this instanceof Xs))return new Xs(e,t);t||Io.isString(e)||(t=e||{},e="default"),this.inline=new vs,this.block=new Bi,this.core=new vi,this.renderer=new Ho,this.linkify=new Ms,this.validateLink=Ks,this.normalizeLink=Ys,this.normalizeLinkText=Qs,this.utils=Io,this.helpers=Io.assign({},Fo),this.options={},this.configure(e),t&&this.set(t)}Xs.prototype.set=function(e){return Io.assign(this.options,e),this},Xs.prototype.configure=function(e){var t,r=this;if(Io.isString(e)&&!(e=Js[t=e]))throw new Error('Wrong `markdown-it` preset "'+t+'", check name');if(!e)throw new Error("Wrong `markdown-it` preset, can't be empty");return e.options&&r.set(e.options),e.components&&Object.keys(e.components).forEach((function(t){e.components[t].rules&&r[t].ruler.enableOnly(e.components[t].rules),e.components[t].rules2&&r[t].ruler2.enableOnly(e.components[t].rules2)})),this},Xs.prototype.enable=function(e,t){var r=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach((function(t){r=r.concat(this[t].ruler.enable(e,!0))}),this),r=r.concat(this.inline.ruler2.enable(e,!0));var n=e.filter((function(e){return r.indexOf(e)<0}));if(n.length&&!t)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+n);return this},Xs.prototype.disable=function(e,t){var r=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach((function(t){r=r.concat(this[t].ruler.disable(e,!0))}),this),r=r.concat(this.inline.ruler2.disable(e,!0));var n=e.filter((function(e){return r.indexOf(e)<0}));if(n.length&&!t)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+n);return this},Xs.prototype.use=function(e){var t=[this].concat(Array.prototype.slice.call(arguments,1));return e.apply(e,t),this},Xs.prototype.parse=function(e,t){if("string"!=typeof e)throw new Error("Input data should be a String");var r=new this.core.State(e,this,t);return this.core.process(r),r.tokens},Xs.prototype.render=function(e,t){return t=t||{},this.renderer.render(this.parse(e,t),this.options,t)},Xs.prototype.parseInline=function(e,t){var r=new this.core.State(e,this,t);return r.inlineMode=!0,this.core.process(r),r.tokens},Xs.prototype.renderInline=function(e,t){return t=t||{},this.renderer.render(this.parseInline(e,t),this.options,t)};var ea=Xs,ta=new K({nodes:{doc:{content:"block+"},paragraph:{content:"inline*",group:"block",parseDOM:[{tag:"p"}],toDOM:function(){return["p",0]}},blockquote:{content:"block+",group:"block",parseDOM:[{tag:"blockquote"}],toDOM:function(){return["blockquote",0]}},horizontal_rule:{group:"block",parseDOM:[{tag:"hr"}],toDOM:function(){return["div",["hr"]]}},heading:{attrs:{level:{default:1}},content:"(text | image)*",group:"block",defining:!0,parseDOM:[{tag:"h1",attrs:{level:1}},{tag:"h2",attrs:{level:2}},{tag:"h3",attrs:{level:3}},{tag:"h4",attrs:{level:4}},{tag:"h5",attrs:{level:5}},{tag:"h6",attrs:{level:6}}],toDOM:function(e){return["h"+e.attrs.level,0]}},code_block:{content:"text*",group:"block",code:!0,defining:!0,marks:"",attrs:{params:{default:""}},parseDOM:[{tag:"pre",preserveWhitespace:"full",getAttrs:function(e){return{params:e.getAttribute("data-params")||""}}}],toDOM:function(e){return["pre",e.attrs.params?{"data-params":e.attrs.params}:{},["code",0]]}},ordered_list:{content:"list_item+",group:"block",attrs:{order:{default:1},tight:{default:!1}},parseDOM:[{tag:"ol",getAttrs:function(e){return{order:e.hasAttribute("start")?+e.getAttribute("start"):1,tight:e.hasAttribute("data-tight")}}}],toDOM:function(e){return["ol",{start:1==e.attrs.order?null:e.attrs.order,"data-tight":e.attrs.tight?"true":null},0]}},bullet_list:{content:"list_item+",group:"block",attrs:{tight:{default:!1}},parseDOM:[{tag:"ul",getAttrs:function(e){return{tight:e.hasAttribute("data-tight")}}}],toDOM:function(e){return["ul",{"data-tight":e.attrs.tight?"true":null},0]}},list_item:{content:"paragraph block*",defining:!0,parseDOM:[{tag:"li"}],toDOM:function(){return["li",0]}},text:{group:"inline"},image:{inline:!0,attrs:{src:{},alt:{default:null},title:{default:null}},group:"inline",draggable:!0,parseDOM:[{tag:"img[src]",getAttrs:function(e){return{src:e.getAttribute("src"),title:e.getAttribute("title"),alt:e.getAttribute("alt")}}}],toDOM:function(e){return["img",e.attrs]}},hard_break:{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM:function(){return["br"]}}},marks:{em:{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style",getAttrs:function(e){return"italic"==e&&null}}],toDOM:function(){return["em"]}},strong:{parseDOM:[{tag:"b"},{tag:"strong"},{style:"font-weight",getAttrs:function(e){return/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}}],toDOM:function(){return["strong"]}},link:{attrs:{href:{},title:{default:null}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs:function(e){return{href:e.getAttribute("href"),title:e.getAttribute("title")}}}],toDOM:function(e){return["a",e.attrs]}},code:{parseDOM:[{tag:"code"}],toDOM:function(){return["code"]}}}});var ra=function(e,t){this.schema=e,this.stack=[{type:e.topNodeType,content:[]}],this.marks=a.none,this.tokenHandlers=t};function na(e,t,r,n){return e.getAttrs?e.getAttrs(t,r,n):e.attrs instanceof Function?e.attrs(t):e.attrs}function oa(e,t){return e.noCloseToken||"code_inline"==t||"code_block"==t||"fence"==t}function ia(e){return"\n"==e[e.length-1]?e.slice(0,e.length-1):e}function sa(){}ra.prototype.top=function(){return this.stack[this.stack.length-1]},ra.prototype.push=function(e){this.stack.length&&this.top().content.push(e)},ra.prototype.addText=function(e){if(e){var t,r=this.top().content,n=r[r.length-1],o=this.schema.text(e,this.marks);n&&(t=function(e,t){if(e.isText&&t.isText&&a.sameSet(e.marks,t.marks))return e.withText(e.text+t.text)}(n,o))?r[r.length-1]=t:r.push(o)}},ra.prototype.openMark=function(e){this.marks=e.addToSet(this.marks)},ra.prototype.closeMark=function(e){this.marks=e.removeFromSet(this.marks)},ra.prototype.parseTokens=function(e){for(var t=0;t<e.length;t++){var r=e[t],n=this.tokenHandlers[r.type];if(!n)throw new Error("Token type `"+r.type+"` not supported by Markdown parser");n(this,r,e,t)}},ra.prototype.addNode=function(e,t,r){var n=e.createAndFill(t,r,this.marks);return n?(this.push(n),n):null},ra.prototype.openNode=function(e,t){this.stack.push({type:e,attrs:t,content:[]})},ra.prototype.closeNode=function(){this.marks.length&&(this.marks=a.none);var e=this.stack.pop();return this.addNode(e.type,e.attrs,e.content)};var aa=function(e,t,r){this.tokens=r,this.schema=e,this.tokenizer=t,this.tokenHandlers=function(e,t){var r=Object.create(null),n=function(n){var o=t[n];if(o.block){var i=e.nodeType(o.block);oa(o,n)?r[n]=function(e,t,r,n){e.openNode(i,na(o,t,r,n)),e.addText(ia(t.content)),e.closeNode()}:(r[n+"_open"]=function(e,t,r,n){return e.openNode(i,na(o,t,r,n))},r[n+"_close"]=function(e){return e.closeNode()})}else if(o.node){var s=e.nodeType(o.node);r[n]=function(e,t,r,n){return e.addNode(s,na(o,t,r,n))}}else if(o.mark){var a=e.marks[o.mark];oa(o,n)?r[n]=function(e,t,r,n){e.openMark(a.create(na(o,t,r,n))),e.addText(ia(t.content)),e.closeMark(a)}:(r[n+"_open"]=function(e,t,r,n){return e.openMark(a.create(na(o,t,r,n)))},r[n+"_close"]=function(e){return e.closeMark(a)})}else{if(!o.ignore)throw new RangeError("Unrecognized parsing spec "+JSON.stringify(o));oa(o,n)?r[n]=sa:(r[n+"_open"]=sa,r[n+"_close"]=sa)}};for(var o in t)n(o);return r.text=function(e,t){return e.addText(t.content)},r.inline=function(e,t){return e.parseTokens(t.children)},r.softbreak=r.softbreak||function(e){return e.addText("\n")},r}(e,r)};function ca(e,t){for(;++t<e.length;)if("list_item_open"!=e[t].type)return e[t].hidden;return!1}aa.prototype.parse=function(e){var t,r=new ra(this.schema,this.tokenHandlers);r.parseTokens(this.tokenizer.parse(e,{}));do{t=r.closeNode()}while(r.stack.length);return t};new aa(ta,ea("commonmark",{html:!1}),{blockquote:{block:"blockquote"},paragraph:{block:"paragraph"},list_item:{block:"list_item"},bullet_list:{block:"bullet_list",getAttrs:function(e,t,r){return{tight:ca(t,r)}}},ordered_list:{block:"ordered_list",getAttrs:function(e,t,r){return{order:+e.attrGet("start")||1,tight:ca(t,r)}}},heading:{block:"heading",getAttrs:function(e){return{level:+e.tag.slice(1)}}},code_block:{block:"code_block",noCloseToken:!0},fence:{block:"code_block",getAttrs:function(e){return{params:e.info||""}},noCloseToken:!0},hr:{node:"horizontal_rule"},image:{node:"image",getAttrs:function(e){return{src:e.attrGet("src"),title:e.attrGet("title")||null,alt:e.children[0]&&e.children[0].content||null}}},hardbreak:{node:"hard_break"},em:{mark:"em"},strong:{mark:"strong"},link:{mark:"link",getAttrs:function(e){return{href:e.attrGet("href"),title:e.attrGet("title")||null}}},code_inline:{mark:"code",noCloseToken:!0}});for(var la={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"},ua={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"},pa="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),ha="undefined"!=typeof navigator&&/Apple Computer/.test(navigator.vendor),da="undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),fa="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),ma="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),ga=pa&&(fa||+pa[1]<57)||da&&fa,va=0;va<10;va++)la[48+va]=la[96+va]=String(va);for(va=1;va<=24;va++)la[va+111]="F"+va;for(va=65;va<=90;va++)la[va]=String.fromCharCode(va+32),ua[va]=String.fromCharCode(va);for(var ya in la)ua.hasOwnProperty(ya)||(ua[ya]=la[ya]);var ba="undefined"!=typeof navigator&&/Mac/.test(navigator.platform);function wa(e){var t,r,n,o,i=e.split(/-(?!$)/),s=i[i.length-1];"Space"==s&&(s=" ");for(var a=0;a<i.length-1;a++){var c=i[a];if(/^(cmd|meta|m)$/i.test(c))o=!0;else if(/^a(lt)?$/i.test(c))t=!0;else if(/^(c|ctrl|control)$/i.test(c))r=!0;else if(/^s(hift)?$/i.test(c))n=!0;else{if(!/^mod$/i.test(c))throw new Error("Unrecognized modifier name: "+c);ba?o=!0:r=!0}}return t&&(s="Alt-"+s),r&&(s="Ctrl-"+s),o&&(s="Meta-"+s),n&&(s="Shift-"+s),s}function ka(e,t,r){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),!1!==r&&t.shiftKey&&(e="Shift-"+e),e}function xa(e){return new ft({props:{handleKeyDown:Ca(e)}})}function Ca(e){var t=function(e){var t=Object.create(null);for(var r in e)t[wa(r)]=e[r];return t}(e);return function(e,r){var n,o=function(e){var t=!(ga&&(e.ctrlKey||e.altKey||e.metaKey)||(ha||ma)&&e.shiftKey&&e.key&&1==e.key.length)&&e.key||(e.shiftKey?ua:la)[e.keyCode]||e.key||"Unidentified";return"Esc"==t&&(t="Escape"),"Del"==t&&(t="Delete"),"Left"==t&&(t="ArrowLeft"),"Up"==t&&(t="ArrowUp"),"Right"==t&&(t="ArrowRight"),"Down"==t&&(t="ArrowDown"),t}(r),i=1==o.length&&" "!=o,s=t[ka(o,r,!i)];if(s&&s(e.state,e.dispatch,e))return!0;if(i&&(r.shiftKey||r.altKey||r.metaKey||o.charCodeAt(0)>127)&&(n=la[r.keyCode])&&n!=o){var a=t[ka(n,r,!0)];if(a&&a(e.state,e.dispatch,e))return!0}else if(i&&r.shiftKey){var c=t[ka(o,r,!0)];if(c&&c(e.state,e.dispatch,e))return!0}return!1}}var Sa=function(){};Sa.prototype.append=function(e){return e.length?(e=Sa.from(e),!this.length&&e||e.length<200&&this.leafAppend(e)||this.length<200&&e.leafPrepend(this)||this.appendInner(e)):this},Sa.prototype.prepend=function(e){return e.length?Sa.from(e).append(this):this},Sa.prototype.appendInner=function(e){return new Da(this,e)},Sa.prototype.slice=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.length),e>=t?Sa.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))},Sa.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)},Sa.prototype.forEach=function(e,t,r){void 0===t&&(t=0),void 0===r&&(r=this.length),t<=r?this.forEachInner(e,t,r,0):this.forEachInvertedInner(e,t,r,0)},Sa.prototype.map=function(e,t,r){void 0===t&&(t=0),void 0===r&&(r=this.length);var n=[];return this.forEach((function(t,r){return n.push(e(t,r))}),t,r),n},Sa.from=function(e){return e instanceof Sa?e:e&&e.length?new _a(e):Sa.empty};var _a=function(e){function t(t){e.call(this),this.values=t}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var r={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(e,r){return 0==e&&r==this.length?this:new t(this.values.slice(e,r))},t.prototype.getInner=function(e){return this.values[e]},t.prototype.forEachInner=function(e,t,r,n){for(var o=t;o<r;o++)if(!1===e(this.values[o],n+o))return!1},t.prototype.forEachInvertedInner=function(e,t,r,n){for(var o=t-1;o>=r;o--)if(!1===e(this.values[o],n+o))return!1},t.prototype.leafAppend=function(e){if(this.length+e.length<=200)return new t(this.values.concat(e.flatten()))},t.prototype.leafPrepend=function(e){if(this.length+e.length<=200)return new t(e.flatten().concat(this.values))},r.length.get=function(){return this.values.length},r.depth.get=function(){return 0},Object.defineProperties(t.prototype,r),t}(Sa);Sa.empty=new _a([]);var Da=function(e){function t(t,r){e.call(this),this.left=t,this.right=r,this.length=t.length+r.length,this.depth=Math.max(t.depth,r.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(e){return e<this.left.length?this.left.get(e):this.right.get(e-this.left.length)},t.prototype.forEachInner=function(e,t,r,n){var o=this.left.length;return!(t<o&&!1===this.left.forEachInner(e,t,Math.min(r,o),n))&&(!(r>o&&!1===this.right.forEachInner(e,Math.max(t-o,0),Math.min(this.length,r)-o,n+o))&&void 0)},t.prototype.forEachInvertedInner=function(e,t,r,n){var o=this.left.length;return!(t>o&&!1===this.right.forEachInvertedInner(e,t-o,Math.max(r,o)-o,n+o))&&(!(r<o&&!1===this.left.forEachInvertedInner(e,Math.min(t,o),r,n))&&void 0)},t.prototype.sliceInner=function(e,t){if(0==e&&t==this.length)return this;var r=this.left.length;return t<=r?this.left.slice(e,t):e>=r?this.right.slice(e-r,t-r):this.left.slice(e,r).append(this.right.slice(0,t-r))},t.prototype.leafAppend=function(e){var r=this.right.leafAppend(e);if(r)return new t(this.left,r)},t.prototype.leafPrepend=function(e){var r=this.left.leafPrepend(e);if(r)return new t(r,this.right)},t.prototype.appendInner=function(e){return this.left.depth>=Math.max(this.right.depth,e.depth)+1?new t(this.left,new t(this.right,e)):new t(this,e)},t}(Sa),Aa=Sa,Ea=function(e,t){this.items=e,this.eventCount=t};Ea.prototype.popEvent=function(e,t){var r=this;if(0==this.eventCount)return null;for(var n,o,i=this.items.length;;i--){if(this.items.get(i-1).selection){--i;break}}t&&(n=this.remapping(i,this.items.length),o=n.maps.length);var s,a,c=e.tr,l=[],u=[];return this.items.forEach((function(e,t){if(!e.step)return n||(n=r.remapping(i,t+1),o=n.maps.length),o--,void u.push(e);if(n){u.push(new Ma(e.map));var p,h=e.step.map(n.slice(o));h&&c.maybeStep(h).doc&&(p=c.mapping.maps[c.mapping.maps.length-1],l.push(new Ma(p,null,null,l.length+u.length))),o--,p&&n.appendMap(p,o)}else c.maybeStep(e.step);return e.selection?(s=n?e.selection.map(n.slice(o)):e.selection,a=new Ea(r.items.slice(0,i).append(u.reverse().concat(l)),r.eventCount-1),!1):void 0}),this.items.length,0),{remaining:a,transform:c,selection:s}},Ea.prototype.addTransform=function(e,t,r,n){for(var o=[],i=this.eventCount,s=this.items,a=!n&&s.length?s.get(s.length-1):null,c=0;c<e.steps.length;c++){var l,u=e.steps[c].invert(e.docs[c]),p=new Ma(e.mapping.maps[c],u,t);(l=a&&a.merge(p))&&(p=l,c?o.pop():s=s.slice(0,s.length-1)),o.push(p),t&&(i++,t=null),n||(a=p)}var h=i-r.depth;return h>Oa&&(s=function(e,t){var r;return e.forEach((function(e,n){if(e.selection&&0==t--)return r=n,!1})),e.slice(r)}(s,h),i-=h),new Ea(s.append(o),i)},Ea.prototype.remapping=function(e,t){var r=new me;return this.items.forEach((function(t,n){var o=null!=t.mirrorOffset&&n-t.mirrorOffset>=e?r.maps.length-t.mirrorOffset:null;r.appendMap(t.map,o)}),e,t),r},Ea.prototype.addMaps=function(e){return 0==this.eventCount?this:new Ea(this.items.append(e.map((function(e){return new Ma(e)}))),this.eventCount)},Ea.prototype.rebased=function(e,t){if(!this.eventCount)return this;var r=[],n=Math.max(0,this.items.length-t),o=e.mapping,i=e.steps.length,s=this.eventCount;this.items.forEach((function(e){e.selection&&s--}),n);var a=t;this.items.forEach((function(t){var n=o.getMirror(--a);if(null!=n){i=Math.min(i,n);var c=o.maps[n];if(t.step){var l=e.steps[n].invert(e.docs[n]),u=t.selection&&t.selection.map(o.slice(a+1,n));u&&s++,r.push(new Ma(c,l,u))}else r.push(new Ma(c))}}),n);for(var c=[],l=t;l<i;l++)c.push(new Ma(o.maps[l]));var u=this.items.slice(0,n).append(c).append(r),p=new Ea(u,s);return p.emptyItemCount()>500&&(p=p.compress(this.items.length-r.length)),p},Ea.prototype.emptyItemCount=function(){var e=0;return this.items.forEach((function(t){t.step||e++})),e},Ea.prototype.compress=function(e){void 0===e&&(e=this.items.length);var t=this.remapping(0,e),r=t.maps.length,n=[],o=0;return this.items.forEach((function(i,s){if(s>=e)n.push(i),i.selection&&o++;else if(i.step){var a=i.step.map(t.slice(r)),c=a&&a.getMap();if(r--,c&&t.appendMap(c,r),a){var l=i.selection&&i.selection.map(t.slice(r));l&&o++;var u,p=new Ma(c.invert(),a,l),h=n.length-1;(u=n.length&&n[h].merge(p))?n[h]=u:n.push(p)}}else i.map&&r--}),this.items.length,0),new Ea(Aa.from(n.reverse()),o)},Ea.empty=new Ea(Aa.empty,0);var Ma=function(e,t,r,n){this.map=e,this.step=t,this.selection=r,this.mirrorOffset=n};Ma.prototype.merge=function(e){if(this.step&&e.step&&!e.selection){var t=e.step.merge(this.step);if(t)return new Ma(t.getMap().invert(),t,this.selection)}};var Ta=function(e,t,r,n){this.done=e,this.undone=t,this.prevRanges=r,this.prevTime=n},Oa=20;function Na(e){var t=[];return e.forEach((function(e,r,n,o){return t.push(n,o)})),t}function qa(e,t){if(!e)return null;for(var r=[],n=0;n<e.length;n+=2){var o=t.map(e[n],1),i=t.map(e[n+1],-1);o<=i&&r.push(o,i)}return r}function Ra(e,t,r,n){var o=za(t),i=Fa.get(t).spec.config,s=(n?e.undone:e.done).popEvent(t,o);if(s){var a=s.selection.resolve(s.transform.doc),c=(n?e.done:e.undone).addTransform(s.transform,t.selection.getBookmark(),i,o),l=new Ta(n?c:s.remaining,n?s.remaining:c,null,0);r(s.transform.setSelection(a).setMeta(Fa,{redo:n,historyState:l}).scrollIntoView())}}var Ia=!1,La=null;function za(e){var t=e.plugins;if(La!=t){Ia=!1,La=t;for(var r=0;r<t.length;r++)if(t[r].spec.historyPreserveItems){Ia=!0;break}}return Ia}var Fa=new vt("history"),Ba=new vt("closeHistory");function Pa(e){return e={depth:e&&e.depth||100,newGroupDelay:e&&e.newGroupDelay||500},new ft({key:Fa,state:{init:function(){return new Ta(Ea.empty,Ea.empty,null,0)},apply:function(t,r,n){return function(e,t,r,n){var o,i=r.getMeta(Fa);if(i)return i.historyState;r.getMeta(Ba)&&(e=new Ta(e.done,e.undone,null,0));var s=r.getMeta("appendedTransaction");if(0==r.steps.length)return e;if(s&&s.getMeta(Fa))return s.getMeta(Fa).redo?new Ta(e.done.addTransform(r,null,n,za(t)),e.undone,Na(r.mapping.maps[r.steps.length-1]),e.prevTime):new Ta(e.done,e.undone.addTransform(r,null,n,za(t)),null,e.prevTime);if(!1===r.getMeta("addToHistory")||s&&!1===s.getMeta("addToHistory"))return(o=r.getMeta("rebased"))?new Ta(e.done.rebased(r,o),e.undone.rebased(r,o),qa(e.prevRanges,r.mapping),e.prevTime):new Ta(e.done.addMaps(r.mapping.maps),e.undone.addMaps(r.mapping.maps),qa(e.prevRanges,r.mapping),e.prevTime);var a=0==e.prevTime||!s&&(e.prevTime<(r.time||0)-n.newGroupDelay||!function(e,t){if(!t)return!1;if(!e.docChanged)return!0;var r=!1;return e.mapping.maps[0].forEach((function(e,n){for(var o=0;o<t.length;o+=2)e<=t[o+1]&&n>=t[o]&&(r=!0)})),r}(r,e.prevRanges)),c=s?qa(e.prevRanges,r.mapping):Na(r.mapping.maps[r.steps.length-1]);return new Ta(e.done.addTransform(r,a?t.selection.getBookmark():null,n,za(t)),Ea.empty,c,r.time)}(r,n,t,e)}},config:e})}function Va(e,t){var r=Fa.getState(e);return!(!r||0==r.done.eventCount)&&(t&&Ra(r,e,t,!1),!0)}function $a(e,t){var r=Fa.getState(e);return!(!r||0==r.undone.eventCount)&&(t&&Ra(r,e,t,!0),!0)}function ja(e,t){return!e.selection.empty&&(t&&t(e.tr.deleteSelection().scrollIntoView()),!0)}function Ha(e,t){for(;e;e="start"==t?e.firstChild:e.lastChild)if(e.isTextblock)return!0;return!1}function Ua(e){if(!e.parent.type.spec.isolating)for(var t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function Ja(e){if(!e.parent.type.spec.isolating)for(var t=e.depth-1;t>=0;t--){var r=e.node(t);if(e.index(t)+1<r.childCount)return e.doc.resolve(e.after(t+1));if(r.type.spec.isolating)break}return null}function Ga(e,t){var r,n=e.selection,o=n instanceof et;if(o){if(n.node.isTextblock||!Oe(e.doc,n.from))return!1;r=n.from}else if(null==(r=qe(e.doc,n.from,-1)))return!1;if(t){var i=e.tr.join(r);o&&i.setSelection(et.create(i.doc,r-e.doc.resolve(r).nodeBefore.nodeSize)),t(i.scrollIntoView())}return!0}function Wa(e,t){var r,n=e.selection;if(n instanceof et){if(n.node.isTextblock||!Oe(e.doc,n.to))return!1;r=n.to}else if(null==(r=qe(e.doc,n.to,1)))return!1;return t&&t(e.tr.join(r).scrollIntoView()),!0}function Ka(e,t){var r=e.selection,n=r.$from,o=r.$to,i=n.blockRange(o),s=i&&Ae(i);return null!=s&&(t&&t(e.tr.lift(i,s).scrollIntoView()),!0)}function Za(e){for(var t=0;t<e.edgeCount;t++){var r=e.edge(t).type;if(r.isTextblock&&!r.hasRequiredAttrs())return r}return null}function Ya(e,t){var r=e.selection,n=r.$head,o=r.$anchor;if(!n.parent.type.spec.code||!n.sameParent(o))return!1;var i=n.node(-1),s=n.indexAfter(-1),a=Za(i.contentMatchAt(s));if(!i.canReplaceWith(s,s,a))return!1;if(t){var c=n.after(),l=e.tr.replaceWith(c,c,a.createAndFill());l.setSelection(Ke.near(l.doc.resolve(c),1)),t(l.scrollIntoView())}return!0}function Qa(e,t){var r,n=e.selection,o=n.$from,i=n.to,s=o.sharedDepth(i);return 0!=s&&(r=o.before(s),t&&t(e.tr.setSelection(et.create(e.doc,r))),!0)}function Xa(e,t,n){var o,i,s=t.nodeBefore,a=t.nodeAfter;if(s.type.spec.isolating||a.type.spec.isolating)return!1;if(function(e,t,r){var n=t.nodeBefore,o=t.nodeAfter,i=t.index();return!!(n&&o&&n.type.compatibleContent(o.type))&&(!n.content.size&&t.parent.canReplace(i-1,i)?(r&&r(e.tr.delete(t.pos-n.nodeSize,t.pos).scrollIntoView()),!0):!(!t.parent.canReplace(i,i+1)||!o.isTextblock&&!Oe(e.doc,t.pos))&&(r&&r(e.tr.clearIncompatible(t.pos,n.type,n.contentMatchAt(n.childCount)).join(t.pos).scrollIntoView()),!0))}(e,t,n))return!0;if(t.parent.canReplace(t.index(),t.index()+1)&&(o=(i=s.contentMatchAt(s.childCount)).findWrapping(a.type))&&i.matchType(o[0]||a.type).validEnd){if(n){for(var c=t.pos+a.nodeSize,u=r.empty,p=o.length-1;p>=0;p--)u=r.from(o[p].create(null,u));u=r.from(s.copy(u));var h=e.tr.step(new Se(t.pos-1,c,t.pos,c,new l(u,1,0),o.length,!0)),d=c+2*o.length;Oe(h.doc,d)&&h.join(d),n(h.scrollIntoView())}return!0}var f=Ke.findFrom(t,1),m=f&&f.$from.blockRange(f.$to),g=m&&Ae(m);return null!=g&&g>=t.depth&&(n&&n(e.tr.lift(m,g).scrollIntoView()),!0)}function ec(e,t){return function(r,n){var o=r.selection,i=o.$from,s=o.$to,a=i.blockRange(s),c=a&&Ee(a,e,t);return!!c&&(n&&n(r.tr.wrap(a,c).scrollIntoView()),!0)}}function tc(e,t){return function(r,n){var o=r.selection,i=o.from,s=o.to,a=!1;return r.doc.nodesBetween(i,s,(function(n,o){if(a)return!1;if(n.isTextblock&&!n.hasMarkup(e,t))if(n.type==e)a=!0;else{var i=r.doc.resolve(o),s=i.index();a=i.parent.canReplaceWith(s,s+1,e)}})),!!a&&(n&&n(r.tr.setBlockType(i,s,e,t).scrollIntoView()),!0)}}function rc(e,t){return function(r,n){var o=r.selection,i=o.empty,s=o.$cursor,a=o.ranges;if(i&&!s||!function(e,t,r){for(var n=function(n){var o=t[n],i=o.$from,s=o.$to,a=0==i.depth&&e.type.allowsMarkType(r);if(e.nodesBetween(i.pos,s.pos,(function(e){if(a)return!1;a=e.inlineContent&&e.type.allowsMarkType(r)})),a)return{v:!0}},o=0;o<t.length;o++){var i=n(o);if(i)return i.v}return!1}(r.doc,a,e))return!1;if(n)if(s)e.isInSet(r.storedMarks||s.marks())?n(r.tr.removeStoredMark(e)):n(r.tr.addStoredMark(e.create(t)));else{for(var c=!1,l=r.tr,u=0;!c&&u<a.length;u++){var p=a[u],h=p.$from,d=p.$to;c=r.doc.rangeHasMark(h.pos,d.pos,e)}for(var f=0;f<a.length;f++){var m=a[f],g=m.$from,v=m.$to;c?l.removeMark(g.pos,v.pos,e):l.addMark(g.pos,v.pos,e.create(t))}n(l.scrollIntoView())}return!0}}function nc(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return function(t,r,n){for(var o=0;o<e.length;o++)if(e[o](t,r,n))return!0;return!1}}var oc=nc(ja,(function(e,t,r){var n=e.selection.$cursor;if(!n||(r?!r.endOfTextblock("backward",e):n.parentOffset>0))return!1;var o=Ua(n);if(!o){var i=n.blockRange(),s=i&&Ae(i);return null!=s&&(t&&t(e.tr.lift(i,s).scrollIntoView()),!0)}var a=o.nodeBefore;if(!a.type.spec.isolating&&Xa(e,o,t))return!0;if(0==n.parent.content.size&&(Ha(a,"end")||et.isSelectable(a))){if(t){var c=e.tr.deleteRange(n.before(),n.after());c.setSelection(Ha(a,"end")?Ke.findFrom(c.doc.resolve(c.mapping.map(o.pos,-1)),-1):et.create(c.doc,o.pos-a.nodeSize)),t(c.scrollIntoView())}return!0}return!(!a.isAtom||o.depth!=n.depth-1)&&(t&&t(e.tr.delete(o.pos-a.nodeSize,o.pos).scrollIntoView()),!0)}),(function(e,t,r){var n=e.selection,o=n.$head,i=o;if(!n.empty)return!1;if(o.parent.isTextblock){if(r?!r.endOfTextblock("backward",e):o.parentOffset>0)return!1;i=Ua(o)}var s=i&&i.nodeBefore;return!(!s||!et.isSelectable(s))&&(t&&t(e.tr.setSelection(et.create(e.doc,i.pos-s.nodeSize)).scrollIntoView()),!0)})),ic=nc(ja,(function(e,t,r){var n=e.selection.$cursor;if(!n||(r?!r.endOfTextblock("forward",e):n.parentOffset<n.parent.content.size))return!1;var o=Ja(n);if(!o)return!1;var i=o.nodeAfter;if(Xa(e,o,t))return!0;if(0==n.parent.content.size&&(Ha(i,"start")||et.isSelectable(i))){if(t){var s=e.tr.deleteRange(n.before(),n.after());s.setSelection(Ha(i,"start")?Ke.findFrom(s.doc.resolve(s.mapping.map(o.pos)),1):et.create(s.doc,s.mapping.map(o.pos))),t(s.scrollIntoView())}return!0}return!(!i.isAtom||o.depth!=n.depth-1)&&(t&&t(e.tr.delete(o.pos,o.pos+i.nodeSize).scrollIntoView()),!0)}),(function(e,t,r){var n=e.selection,o=n.$head,i=o;if(!n.empty)return!1;if(o.parent.isTextblock){if(r?!r.endOfTextblock("forward",e):o.parentOffset<o.parent.content.size)return!1;i=Ja(o)}var s=i&&i.nodeAfter;return!(!s||!et.isSelectable(s))&&(t&&t(e.tr.setSelection(et.create(e.doc,i.pos)).scrollIntoView()),!0)})),sc={Enter:nc((function(e,t){var r=e.selection,n=r.$head,o=r.$anchor;return!(!n.parent.type.spec.code||!n.sameParent(o))&&(t&&t(e.tr.insertText("\n").scrollIntoView()),!0)}),(function(e,t){var r=e.selection,n=r.$from,o=r.$to;if(n.parent.inlineContent||o.parent.inlineContent)return!1;var i=Za(n.parent.contentMatchAt(o.indexAfter()));if(!i||!i.isTextblock)return!1;if(t){var s=(!n.parentOffset&&o.index()<o.parent.childCount?n:o).pos,a=e.tr.insert(s,i.createAndFill());a.setSelection(Qe.create(a.doc,s+1)),t(a.scrollIntoView())}return!0}),(function(e,t){var r=e.selection.$cursor;if(!r||r.parent.content.size)return!1;if(r.depth>1&&r.after()!=r.end(-1)){var n=r.before();if(Te(e.doc,n))return t&&t(e.tr.split(n).scrollIntoView()),!0}var o=r.blockRange(),i=o&&Ae(o);return null!=i&&(t&&t(e.tr.lift(o,i).scrollIntoView()),!0)}),(function(e,t){var n=e.selection,o=n.$from,i=n.$to;if(e.selection instanceof et&&e.selection.node.isBlock)return!(!o.parentOffset||!Te(e.doc,o.pos))&&(t&&t(e.tr.split(o.pos).scrollIntoView()),!0);if(!o.parent.isBlock)return!1;if(t){var s=i.parentOffset==i.parent.content.size,a=e.tr;e.selection instanceof Qe&&a.deleteSelection();var c=0==o.depth?null:Za(o.node(-1).contentMatchAt(o.indexAfter(-1))),l=s&&c?[{type:c}]:null,u=Te(a.doc,a.mapping.map(o.pos),1,l);l||u||!Te(a.doc,a.mapping.map(o.pos),1,c&&[{type:c}])||(l=[{type:c}],u=!0),u&&(a.split(a.mapping.map(o.pos),1,l),s||o.parentOffset||o.parent.type==c||!o.node(-1).canReplace(o.index(-1),o.indexAfter(-1),r.from(c.create(),o.parent))||a.setNodeMarkup(a.mapping.map(o.before()),c)),t(a.scrollIntoView())}return!0})),"Mod-Enter":Ya,Backspace:oc,"Mod-Backspace":oc,Delete:ic,"Mod-Delete":ic,"Mod-a":function(e,t){return t&&t(e.tr.setSelection(new rt(e.doc))),!0}},ac={"Ctrl-h":sc.Backspace,"Alt-Backspace":sc["Mod-Backspace"],"Ctrl-d":sc.Delete,"Ctrl-Alt-Backspace":sc["Mod-Delete"],"Alt-Delete":sc["Mod-Delete"],"Alt-d":sc["Mod-Delete"]};for(var cc in sc)ac[cc]=sc[cc];var lc=("undefined"!=typeof navigator?/Mac/.test(navigator.platform):"undefined"!=typeof os&&"darwin"==os.platform())?ac:sc;function uc(e){return void 0===e&&(e={}),new ft({view:function(t){return new pc(t,e)}})}var pc=function(e,t){var r=this;this.editorView=e,this.width=t.width||1,this.color=t.color||"black",this.class=t.class,this.cursorPos=null,this.element=null,this.timeout=null,this.handlers=["dragover","dragend","drop","dragleave"].map((function(t){var n=function(e){return r[t](e)};return e.dom.addEventListener(t,n),{name:t,handler:n}}))};pc.prototype.destroy=function(){var e=this;this.handlers.forEach((function(t){var r=t.name,n=t.handler;return e.editorView.dom.removeEventListener(r,n)}))},pc.prototype.update=function(e,t){null!=this.cursorPos&&t.doc!=e.state.doc&&this.updateOverlay()},pc.prototype.setCursor=function(e){e!=this.cursorPos&&(this.cursorPos=e,null==e?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())},pc.prototype.updateOverlay=function(){var e,t=this.editorView.state.doc.resolve(this.cursorPos);if(!t.parent.inlineContent){var r=t.nodeBefore,n=t.nodeAfter;if(r||n){var o=this.editorView.nodeDOM(this.cursorPos-(r?r.nodeSize:0)).getBoundingClientRect(),i=r?o.bottom:o.top;r&&n&&(i=(i+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),e={left:o.left,right:o.right,top:i-this.width/2,bottom:i+this.width/2}}}if(!e){var s=this.editorView.coordsAtPos(this.cursorPos);e={left:s.left-this.width/2,right:s.left+this.width/2,top:s.top,bottom:s.bottom}}var a=this.editorView.dom.offsetParent;this.element||(this.element=a.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none; background-color: "+this.color);var c=!a||a==document.body&&"static"==getComputedStyle(a).position?{left:-pageXOffset,top:-pageYOffset}:a.getBoundingClientRect();this.element.style.left=e.left-c.left+"px",this.element.style.top=e.top-c.top+"px",this.element.style.width=e.right-e.left+"px",this.element.style.height=e.bottom-e.top+"px"},pc.prototype.scheduleRemoval=function(e){var t=this;clearTimeout(this.timeout),this.timeout=setTimeout((function(){return t.setCursor(null)}),e)},pc.prototype.dragover=function(e){if(this.editorView.editable){var t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY});if(t){var r=t.pos;this.editorView.dragging&&this.editorView.dragging.slice&&null==(r=Re(this.editorView.state.doc,r,this.editorView.dragging.slice))&&(r=t.pos),this.setCursor(r),this.scheduleRemoval(5e3)}}},pc.prototype.dragend=function(){this.scheduleRemoval(20)},pc.prototype.drop=function(){this.scheduleRemoval(20)},pc.prototype.dragleave=function(e){e.target!=this.editorView.dom&&this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)};var hc=function(e){function t(t){e.call(this,t,t)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.map=function(r,n){var o=r.resolve(n.map(this.head));return t.valid(o)?new t(o):e.near(o)},t.prototype.content=function(){return l.empty},t.prototype.eq=function(e){return e instanceof t&&e.head==this.head},t.prototype.toJSON=function(){return{type:"gapcursor",pos:this.head}},t.fromJSON=function(e,r){if("number"!=typeof r.pos)throw new RangeError("Invalid input for GapCursor.fromJSON");return new t(e.resolve(r.pos))},t.prototype.getBookmark=function(){return new dc(this.anchor)},t.valid=function(e){var t=e.parent;if(t.isTextblock||!function(e){for(var t=e.depth;t>=0;t--){var r=e.index(t);if(0!=r)for(var n=e.node(t).child(r-1);;n=n.lastChild){if(0==n.childCount&&!n.inlineContent||n.isAtom||n.type.spec.isolating)return!0;if(n.inlineContent)return!1}}return!0}(e)||!function(e){for(var t=e.depth;t>=0;t--){var r=e.indexAfter(t),n=e.node(t);if(r!=n.childCount)for(var o=n.child(r);;o=o.firstChild){if(0==o.childCount&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}}return!0}(e))return!1;var r=t.type.spec.allowGapCursor;if(null!=r)return r;var n=t.contentMatchAt(e.index()).defaultType;return n&&n.isTextblock},t.findFrom=function(e,r,n){e:for(;;){if(!n&&t.valid(e))return e;for(var o=e.pos,i=null,s=e.depth;;s--){var a=e.node(s);if(r>0?e.indexAfter(s)<a.childCount:e.index(s)>0){i=a.child(r>0?e.indexAfter(s):e.index(s)-1);break}if(0==s)return null;o+=r;var c=e.doc.resolve(o);if(t.valid(c))return c}for(;;){var l=r>0?i.firstChild:i.lastChild;if(!l){if(i.isAtom&&!i.isText&&!et.isSelectable(i)){e=e.doc.resolve(o+i.nodeSize*r),n=!1;continue e}break}i=l,o+=r;var u=e.doc.resolve(o);if(t.valid(u))return u}return null}},t}(Ke);hc.prototype.visible=!1,Ke.jsonID("gapcursor",hc);var dc=function(e){this.pos=e};dc.prototype.map=function(e){return new dc(e.map(this.pos))},dc.prototype.resolve=function(e){var t=e.resolve(this.pos);return hc.valid(t)?new hc(t):Ke.near(t)};var fc=Ca({ArrowLeft:mc("horiz",-1),ArrowRight:mc("horiz",1),ArrowUp:mc("vert",-1),ArrowDown:mc("vert",1)});function mc(e,t){var r="vert"==e?t>0?"down":"up":t>0?"right":"left";return function(e,n,o){var i=e.selection,s=t>0?i.$to:i.$from,a=i.empty;if(i instanceof Qe){if(!o.endOfTextblock(r)||0==s.depth)return!1;a=!1,s=e.doc.resolve(t>0?s.after():s.before())}var c=hc.findFrom(s,t,a);return!!c&&(n&&n(e.tr.setSelection(new hc(c))),!0)}}function gc(e,t,r){if(!e.editable)return!1;var n=e.state.doc.resolve(t);if(!hc.valid(n))return!1;var o=e.posAtCoords({left:r.clientX,top:r.clientY}).inside;return!(o>-1&&et.isSelectable(e.state.doc.nodeAt(o)))&&(e.dispatch(e.state.tr.setSelection(new hc(n))),!0)}function vc(e){if(!(e.selection instanceof hc))return null;var t=document.createElement("div");return t.className="ProseMirror-gapcursor",jn.create(e.doc,[Bn.widget(e.selection.head,t,{key:"gapcursor"})])}function yc(){var e=arguments[0];"string"==typeof e&&(e=document.createElement(e));var t=1,r=arguments[1];if(r&&"object"==typeof r&&null==r.nodeType&&!Array.isArray(r)){for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)){var o=r[n];"string"==typeof o?e.setAttribute(n,o):null!=o&&(e[n]=o)}t++}for(;t<arguments.length;t++)bc(e,arguments[t]);return e}function bc(e,t){if("string"==typeof t)e.appendChild(document.createTextNode(t));else if(null==t);else if(null!=t.nodeType)e.appendChild(t);else{if(!Array.isArray(t))throw new RangeError("Unsupported child node: "+t);for(var r=0;r<t.length;r++)bc(e,t[r])}}var wc="http://www.w3.org/2000/svg",kc="ProseMirror-icon";function xc(e){var t=document.createElement("div");if(t.className=kc,e.path){var r="pm-icon-"+function(e){for(var t=0,r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r)|0;return t}(e.path).toString(16);document.getElementById(r)||function(e,t){var r=document.getElementById(kc+"-collection");r||((r=document.createElementNS(wc,"svg")).id=kc+"-collection",r.style.display="none",document.body.insertBefore(r,document.body.firstChild));var n=document.createElementNS(wc,"symbol");n.id=e,n.setAttribute("viewBox","0 0 "+t.width+" "+t.height),n.appendChild(document.createElementNS(wc,"path")).setAttribute("d",t.path),r.appendChild(n)}(r,e);var n=t.appendChild(document.createElementNS(wc,"svg"));n.style.width=e.width/e.height+"em",n.appendChild(document.createElementNS(wc,"use")).setAttributeNS("http://www.w3.org/1999/xlink","href",/([^#]*)/.exec(document.location)[1]+"#"+r)}else e.dom?t.appendChild(e.dom.cloneNode(!0)):(t.appendChild(document.createElement("span")).textContent=e.text||"",e.css&&(t.firstChild.style.cssText=e.css));return t}var Cc="ProseMirror-menu",Sc=function(e){this.spec=e};function _c(e,t){return e._props.translate?e._props.translate(t):t}Sc.prototype.render=function(e){var t=this.spec,r=t.render?t.render(e):t.icon?xc(t.icon):t.label?yc("div",null,_c(e,t.label)):null;if(!r)throw new RangeError("MenuItem without icon or label property");if(t.title){var n="function"==typeof t.title?t.title(e.state):t.title;r.setAttribute("title",_c(e,n))}return t.class&&r.classList.add(t.class),t.css&&(r.style.cssText+=t.css),r.addEventListener("mousedown",(function(n){n.preventDefault(),r.classList.contains(Cc+"-disabled")||t.run(e.state,e.dispatch,e,n)})),{dom:r,update:function(e){if(t.select){var n=t.select(e);if(r.style.display=n?"":"none",!n)return!1}var o=!0;if(t.enable&&(o=t.enable(e)||!1,Pc(r,Cc+"-disabled",!o)),t.active){var i=o&&t.active(e)||!1;Pc(r,Cc+"-active",i)}return!0}}};var Dc={time:0,node:null};function Ac(e){Dc.time=Date.now(),Dc.node=e.target}function Ec(e){return Date.now()-100<Dc.time&&Dc.node&&e.contains(Dc.node)}var Mc=function(e,t){this.options=t||{},this.content=Array.isArray(e)?e:[e]};function Tc(e,t){for(var r=[],n=[],o=0;o<e.length;o++){var i=e[o].render(t),s=i.dom,a=i.update;r.push(yc("div",{class:Cc+"-dropdown-item"},s)),n.push(a)}return{dom:r,update:Oc(n,r)}}function Oc(e,t){return function(r){for(var n=!1,o=0;o<e.length;o++){var i=e[o](r);t[o].style.display=i?"":"none",i&&(n=!0)}return n}}Mc.prototype.render=function(e){var t=this,r=Tc(this.content,e),n=yc("div",{class:Cc+"-dropdown "+(this.options.class||""),style:this.options.css},_c(e,this.options.label));this.options.title&&n.setAttribute("title",_c(e,this.options.title));var o=yc("div",{class:Cc+"-dropdown-wrap"},n),i=null,s=null,a=function(){i&&i.close()&&(i=null,window.removeEventListener("mousedown",s))};return n.addEventListener("mousedown",(function(e){e.preventDefault(),Ac(e),i?a():(i=t.expand(o,r.dom),window.addEventListener("mousedown",s=function(){Ec(o)||a()}))})),{dom:o,update:function(e){var t=r.update(e);return o.style.display=t?"":"none",t}}},Mc.prototype.expand=function(e,t){var r=yc("div",{class:Cc+"-dropdown-menu "+(this.options.class||"")},t),n=!1;return e.appendChild(r),{close:function(){if(!n)return n=!0,e.removeChild(r),!0},node:r}};var Nc=function(e,t){this.options=t||{},this.content=Array.isArray(e)?e:[e]};Nc.prototype.render=function(e){var t=Tc(this.content,e),r=yc("div",{class:Cc+"-submenu-label"},_c(e,this.options.label)),n=yc("div",{class:Cc+"-submenu-wrap"},r,yc("div",{class:Cc+"-submenu"},t.dom)),o=null;return r.addEventListener("mousedown",(function(e){e.preventDefault(),Ac(e),Pc(n,Cc+"-submenu-wrap-active"),o||window.addEventListener("mousedown",o=function(){Ec(n)||(n.classList.remove(Cc+"-submenu-wrap-active"),window.removeEventListener("mousedown",o),o=null)})})),{dom:n,update:function(e){var r=t.update(e);return n.style.display=r?"":"none",r}}};var qc={join:{width:800,height:900,path:"M0 75h800v125h-800z M0 825h800v-125h-800z M250 400h100v-100h100v100h100v100h-100v100h-100v-100h-100z"},lift:{width:1024,height:1024,path:"M219 310v329q0 7-5 12t-12 5q-8 0-13-5l-164-164q-5-5-5-13t5-13l164-164q5-5 13-5 7 0 12 5t5 12zM1024 749v109q0 7-5 12t-12 5h-987q-7 0-12-5t-5-12v-109q0-7 5-12t12-5h987q7 0 12 5t5 12zM1024 530v109q0 7-5 12t-12 5h-621q-7 0-12-5t-5-12v-109q0-7 5-12t12-5h621q7 0 12 5t5 12zM1024 310v109q0 7-5 12t-12 5h-621q-7 0-12-5t-5-12v-109q0-7 5-12t12-5h621q7 0 12 5t5 12zM1024 91v109q0 7-5 12t-12 5h-987q-7 0-12-5t-5-12v-109q0-7 5-12t12-5h987q7 0 12 5t5 12z"},selectParentNode:{text:"⬚",css:"font-weight: bold"},undo:{width:1024,height:1024,path:"M761 1024c113-206 132-520-313-509v253l-384-384 384-384v248c534-13 594 472 313 775z"},redo:{width:1024,height:1024,path:"M576 248v-248l384 384-384 384v-253c-446-10-427 303-313 509-280-303-221-789 313-775z"},strong:{width:805,height:1024,path:"M317 869q42 18 80 18 214 0 214-191 0-65-23-102-15-25-35-42t-38-26-46-14-48-6-54-1q-41 0-57 5 0 30-0 90t-0 90q0 4-0 38t-0 55 2 47 6 38zM309 442q24 4 62 4 46 0 81-7t62-25 42-51 14-81q0-40-16-70t-45-46-61-24-70-8q-28 0-74 7 0 28 2 86t2 86q0 15-0 45t-0 45q0 26 0 39zM0 950l1-53q8-2 48-9t60-15q4-6 7-15t4-19 3-18 1-21 0-19v-37q0-561-12-585-2-4-12-8t-25-6-28-4-27-2-17-1l-2-47q56-1 194-6t213-5q13 0 39 0t38 0q40 0 78 7t73 24 61 40 42 59 16 78q0 29-9 54t-22 41-36 32-41 25-48 22q88 20 146 76t58 141q0 57-20 102t-53 74-78 48-93 27-100 8q-25 0-75-1t-75-1q-60 0-175 6t-132 6z"},em:{width:585,height:1024,path:"M0 949l9-48q3-1 46-12t63-21q16-20 23-57 0-4 35-165t65-310 29-169v-14q-13-7-31-10t-39-4-33-3l10-58q18 1 68 3t85 4 68 1q27 0 56-1t69-4 56-3q-2 22-10 50-17 5-58 16t-62 19q-4 10-8 24t-5 22-4 26-3 24q-15 84-50 239t-44 203q-1 5-7 33t-11 51-9 47-3 32l0 10q9 2 105 17-1 25-9 56-6 0-18 0t-18 0q-16 0-49-5t-49-5q-78-1-117-1-29 0-81 5t-69 6z"},code:{width:896,height:1024,path:"M608 192l-96 96 224 224-224 224 96 96 288-320-288-320zM288 192l-288 320 288 320 96-96-224-224 224-224-96-96z"},link:{width:951,height:1024,path:"M832 694q0-22-16-38l-118-118q-16-16-38-16-24 0-41 18 1 1 10 10t12 12 8 10 7 14 2 15q0 22-16 38t-38 16q-8 0-15-2t-14-7-10-8-12-12-10-10q-18 17-18 41 0 22 16 38l117 118q15 15 38 15 22 0 38-14l84-83q16-16 16-38zM430 292q0-22-16-38l-117-118q-16-16-38-16-22 0-38 15l-84 83q-16 16-16 38 0 22 16 38l118 118q15 15 38 15 24 0 41-17-1-1-10-10t-12-12-8-10-7-14-2-15q0-22 16-38t38-16q8 0 15 2t14 7 10 8 12 12 10 10q18-17 18-41zM941 694q0 68-48 116l-84 83q-47 47-116 47-69 0-116-48l-117-118q-47-47-47-116 0-70 50-119l-50-50q-49 50-118 50-68 0-116-48l-118-118q-48-48-48-116t48-116l84-83q47-47 116-47 69 0 116 48l117 118q47 47 47 116 0 70-50 119l50 50q49-50 118-50 68 0 116 48l118 118q48 48 48 116z"},bulletList:{width:768,height:896,path:"M0 512h128v-128h-128v128zM0 256h128v-128h-128v128zM0 768h128v-128h-128v128zM256 512h512v-128h-512v128zM256 256h512v-128h-512v128zM256 768h512v-128h-512v128z"},orderedList:{width:768,height:896,path:"M320 512h448v-128h-448v128zM320 768h448v-128h-448v128zM320 128v128h448v-128h-448zM79 384h78v-256h-36l-85 23v50l43-2v185zM189 590c0-36-12-78-96-78-33 0-64 6-83 16l1 66c21-10 42-15 67-15s32 11 32 28c0 26-30 58-110 112v50h192v-67l-91 2c49-30 87-66 87-113l1-1z"},blockquote:{width:640,height:896,path:"M0 448v256h256v-256h-128c0 0 0-128 128-128v-128c0 0-256 0-256 256zM640 320v-128c0 0-256 0-256 256v256h256v-256h-128c0 0 0-128 128-128z"}},Rc=new Sc({title:"Join with above block",run:Ga,select:function(e){return Ga(e)},icon:qc.join}),Ic=new Sc({title:"Lift out of enclosing block",run:Ka,select:function(e){return Ka(e)},icon:qc.lift}),Lc=new Sc({title:"Select parent node",run:Qa,select:function(e){return Qa(e)},icon:qc.selectParentNode}),zc=new Sc({title:"Undo last change",run:Va,enable:function(e){return Va(e)},icon:qc.undo}),Fc=new Sc({title:"Redo last undone change",run:$a,enable:function(e){return $a(e)},icon:qc.redo});function Bc(e,t){var r=tc(e,t.attrs),n={run:r,enable:function(e){return r(e)},active:function(r){var n=r.selection,o=n.$from,i=n.to,s=n.node;return s?s.hasMarkup(e,t.attrs):i<=o.end()&&o.parent.hasMarkup(e,t.attrs)}};for(var o in t)n[o]=t[o];return new Sc(n)}function Pc(e,t,r){r?e.classList.add(t):e.classList.remove(t)}var Vc="ProseMirror-menubar";var $c=function(e,t){var r=this;this.editorView=e,this.options=t,this.wrapper=yc("div",{class:Vc+"-wrapper"}),this.menu=this.wrapper.appendChild(yc("div",{class:Vc})),this.menu.className=Vc,this.spacer=null,e.dom.parentNode.replaceChild(this.wrapper,e.dom),this.wrapper.appendChild(e.dom),this.maxHeight=0,this.widthForMaxHeight=0,this.floating=!1;var n=function(e,t){for(var r=document.createDocumentFragment(),n=[],o=[],i=0;i<t.length;i++){for(var s=t[i],a=[],c=[],l=0;l<s.length;l++){var u=s[l].render(e),p=u.dom,h=u.update,d=yc("span",{class:Cc+"item"},p);r.appendChild(d),c.push(d),a.push(h)}a.length&&(n.push(Oc(a,c)),i<t.length-1&&o.push(r.appendChild(yc("span",{class:Cc+"separator"}))))}return{dom:r,update:function(e){for(var t=!1,r=!1,i=0;i<n.length;i++){var s=n[i](e);i&&(o[i-1].style.display=r&&s?"":"none"),r=s,s&&(t=!0)}return t}}}(this.editorView,this.options.content),o=n.dom,i=n.update;if(this.contentUpdate=i,this.menu.appendChild(o),this.update(),t.floating&&!function(){if("undefined"==typeof navigator)return!1;var e=navigator.userAgent;return!/Edge\/\d/.test(e)&&/AppleWebKit/.test(e)&&/Mobile\/\w+/.test(e)}()){this.updateFloat();var s=function(e){for(var t=[window],r=e.parentNode;r;r=r.parentNode)t.push(r);return t}(this.wrapper);this.scrollFunc=function(e){var t=r.editorView.root;(t.body||t).contains(r.wrapper)?r.updateFloat(e.target.getBoundingClientRect&&e.target):s.forEach((function(e){return e.removeEventListener("scroll",r.scrollFunc)}))},s.forEach((function(e){return e.addEventListener("scroll",r.scrollFunc)}))}};function jc(e,t){return function(n,o){var i=n.selection,s=i.$from,a=i.$to,c=s.blockRange(a),u=!1,p=c;if(!c)return!1;if(c.depth>=2&&s.node(c.depth-1).type.compatibleContent(e)&&0==c.startIndex){if(0==s.index(c.depth-1))return!1;var h=n.doc.resolve(c.start-2);p=new C(h,h,c.depth),c.endIndex<c.parent.childCount&&(c=new C(s,n.doc.resolve(a.end(c.depth)),c.depth)),u=!0}var d=Ee(p,e,t,c);return!!d&&(o&&o(function(e,t,n,o,i){for(var s=r.empty,a=n.length-1;a>=0;a--)s=r.from(n[a].type.create(n[a].attrs,s));e.step(new Se(t.start-(o?2:0),t.end,t.start,t.end,new l(s,0,0),n.length,!0));for(var c=0,u=0;u<n.length;u++)n[u].type==i&&(c=u+1);for(var p=n.length-c,h=t.start+n.length-(o?2:0),d=t.parent,f=t.startIndex,m=t.endIndex,g=!0;f<m;f++,g=!1)!g&&Te(e.doc,h,p)&&(e.split(h,p),h+=2*p),h+=d.child(f).nodeSize;return e}(n.tr,c,d,u,e).scrollIntoView()),!0)}}function Hc(e){return function(t,n){var o=t.selection,i=o.$from,s=o.$to,a=i.blockRange(s,(function(t){return t.childCount&&t.firstChild.type==e}));return!!a&&(!n||(i.node(a.depth-1).type==e?function(e,t,n,o){var i=e.tr,s=o.end,a=o.$to.end(o.depth);s<a&&(i.step(new Se(s-1,a,s,a,new l(r.from(n.create(null,o.parent.copy())),1,0),1,!0)),o=new C(i.doc.resolve(o.$from.pos),i.doc.resolve(a),o.depth));return t(i.lift(o,Ae(o)).scrollIntoView()),!0}(t,n,e,a):function(e,t,n){for(var o=e.tr,i=n.parent,s=n.end,a=n.endIndex-1,c=n.startIndex;a>c;a--)s-=i.child(a).nodeSize,o.delete(s-1,s+1);var u=o.doc.resolve(n.start),p=u.nodeAfter,h=0==n.startIndex,d=n.endIndex==i.childCount,f=u.node(-1),m=u.index(-1);if(!f.canReplace(m+(h?0:1),m+1,p.content.append(d?r.empty:r.from(i))))return!1;var g=u.pos,v=g+p.nodeSize;return o.step(new Se(g-(h?1:0),v+(d?1:0),g+1,v-1,new l((h?r.empty:r.from(i.copy(r.empty))).append(d?r.empty:r.from(i.copy(r.empty))),h?0:1,d?0:1),h?0:1)),t(o.scrollIntoView()),!0}(t,n,a)))}}$c.prototype.update=function(){this.contentUpdate(this.editorView.state),this.floating?this.updateScrollCursor():(this.menu.offsetWidth!=this.widthForMaxHeight&&(this.widthForMaxHeight=this.menu.offsetWidth,this.maxHeight=0),this.menu.offsetHeight>this.maxHeight&&(this.maxHeight=this.menu.offsetHeight,this.menu.style.minHeight=this.maxHeight+"px"))},$c.prototype.updateScrollCursor=function(){var e=this.editorView.root.getSelection();if(e.focusNode){var t=e.getRangeAt(0).getClientRects(),r=t[function(e){if(e.anchorNode==e.focusNode)return e.anchorOffset>e.focusOffset;return e.anchorNode.compareDocumentPosition(e.focusNode)==Node.DOCUMENT_POSITION_FOLLOWING}(e)?0:t.length-1];if(r){var n=this.menu.getBoundingClientRect();if(r.top<n.bottom&&r.bottom>n.top){var o=function(e){for(var t=e.parentNode;t;t=t.parentNode)if(t.scrollHeight>t.clientHeight)return t}(this.wrapper);o&&(o.scrollTop-=n.bottom-r.top)}}}},$c.prototype.updateFloat=function(e){var t=this.wrapper,r=t.getBoundingClientRect(),n=e?Math.max(0,e.getBoundingClientRect().top):0;if(this.floating)if(r.top>=n||r.bottom<this.menu.offsetHeight+10)this.floating=!1,this.menu.style.position=this.menu.style.left=this.menu.style.top=this.menu.style.width="",this.menu.style.display="",this.spacer.parentNode.removeChild(this.spacer),this.spacer=null;else{var o=(t.offsetWidth-t.clientWidth)/2;this.menu.style.left=r.left+o+"px",this.menu.style.display=r.top>window.innerHeight?"none":"",e&&(this.menu.style.top=n+"px")}else if(r.top<n&&r.bottom>=this.menu.offsetHeight+10){this.floating=!0;var i=this.menu.getBoundingClientRect();this.menu.style.left=i.left+"px",this.menu.style.width=i.width+"px",e&&(this.menu.style.top=n+"px"),this.menu.style.position="fixed",this.spacer=yc("div",{class:Vc+"-spacer",style:"height: "+i.height+"px"}),t.insertBefore(this.spacer,this.menu)}},$c.prototype.destroy=function(){this.wrapper.parentNode&&this.wrapper.parentNode.replaceChild(this.editorView.dom,this.wrapper)};var Uc=function(e,t){var r;this.match=e,this.handler="string"==typeof t?(r=t,function(e,t,n,o){var i=r;if(t[1]){var s=t[0].lastIndexOf(t[1]);i+=t[0].slice(s+t[1].length);var a=(n+=s)-o;a>0&&(i=t[0].slice(s-a,s)+i,n=o)}return e.tr.insertText(i,n,o)}):t};function Jc(e,t,r,n,o,i){if(e.composing)return!1;var s=e.state,a=s.doc.resolve(t);if(a.parent.type.spec.code)return!1;for(var c=a.parent.textBetween(Math.max(0,a.parentOffset-500),a.parentOffset,null,"￼")+n,l=0;l<o.length;l++){var u=o[l].match.exec(c),p=u&&o[l].handler(s,u,t-(u[0].length-n.length),r);if(p)return e.dispatch(p.setMeta(i,{transform:p,from:t,to:r,text:n})),!0}return!1}function Gc(e,t){for(var r=e.plugins,n=0;n<r.length;n++){var o=r[n],i=void 0;if(o.spec.isInputRules&&(i=o.getState(e))){if(t){for(var s=e.tr,a=i.transform,c=a.steps.length-1;c>=0;c--)s.step(a.steps[c].invert(a.docs[c]));var l=s.doc.resolve(i.from).marks();t(s.replaceWith(i.from,i.to,e.schema.text(i.text,l)))}return!0}}return!1}var Wc=new Uc(/--$/,"—"),Kc=new Uc(/\.\.\.$/,"…"),Zc=[new Uc(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,"“"),new Uc(/"$/,"”"),new Uc(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,"‘"),new Uc(/'$/,"’")];function Yc(e,t,r,n){return new Uc(e,(function(e,o,i,s){var a=r instanceof Function?r(o):r,c=e.tr.delete(i,s),l=c.doc.resolve(i).blockRange(),u=l&&Ee(l,t,a);if(!u)return null;c.wrap(l,u);var p=c.doc.resolve(i-1).nodeBefore;return p&&p.type==t&&Oe(c.doc,i-1)&&(!n||n(o,p))&&c.join(i-1),c}))}function Qc(e,t,r){return new Uc(e,(function(e,n,o,i){var s=e.doc.resolve(o),a=r instanceof Function?r(n):r;return s.node(-1).canReplaceWith(s.index(-1),s.indexAfter(-1),t)?e.tr.delete(o,i).setBlockType(o,o,t,a):null}))}var Xc="ProseMirror-prompt";function el(e){var t=document.body.appendChild(document.createElement("div"));t.className=Xc;var r=function(e){t.contains(e.target)||n()};setTimeout((function(){return window.addEventListener("mousedown",r)}),50);var n=function(){window.removeEventListener("mousedown",r),t.parentNode&&t.parentNode.removeChild(t)},o=[];for(var i in e.fields)o.push(e.fields[i].render());var s=document.createElement("button");s.type="submit",s.className=Xc+"-submit",s.textContent="OK";var a=document.createElement("button");a.type="button",a.className=Xc+"-cancel",a.textContent="Cancel",a.addEventListener("click",n);var c=t.appendChild(document.createElement("form"));e.title&&(c.appendChild(document.createElement("h5")).textContent=e.title),o.forEach((function(e){c.appendChild(document.createElement("div")).appendChild(e)}));var l=c.appendChild(document.createElement("div"));l.className=Xc+"-buttons",l.appendChild(s),l.appendChild(document.createTextNode(" ")),l.appendChild(a);var u=t.getBoundingClientRect();t.style.top=(window.innerHeight-u.height)/2+"px",t.style.left=(window.innerWidth-u.width)/2+"px";var p=function(){var t=function(e,t){var r=Object.create(null),n=0;for(var o in e){var i=e[o],s=t[n++],a=i.read(s),c=i.validate(a);if(c)return tl(s,c),null;r[o]=i.clean(a)}return r}(e.fields,o);t&&(n(),e.callback(t))};c.addEventListener("submit",(function(e){e.preventDefault(),p()})),c.addEventListener("keydown",(function(e){27==e.keyCode?(e.preventDefault(),n()):13!=e.keyCode||e.ctrlKey||e.metaKey||e.shiftKey?9==e.keyCode&&window.setTimeout((function(){t.contains(document.activeElement)||n()}),500):(e.preventDefault(),p())}));var h=c.elements[0];h&&h.focus()}function tl(e,t){var r=e.parentNode,n=r.appendChild(document.createElement("div"));n.style.left=e.offsetLeft+e.offsetWidth+2+"px",n.style.top=e.offsetTop-5+"px",n.className="ProseMirror-invalid",n.textContent=t,setTimeout((function(){return r.removeChild(n)}),1500)}var rl=function(e){this.options=e};rl.prototype.read=function(e){return e.value},rl.prototype.validateType=function(e){},rl.prototype.validate=function(e){return!e&&this.options.required?"Required field":this.validateType(e)||this.options.validate&&this.options.validate(e)},rl.prototype.clean=function(e){return this.options.clean?this.options.clean(e):e};var nl=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.render=function(){var e=document.createElement("input");return e.type="text",e.placeholder=this.options.label,e.value=this.options.value||"",e.autocomplete="off",e},t}(rl);function ol(e,t){for(var r=e.selection.$from,n=r.depth;n>=0;n--){var o=r.index(n);if(r.node(n).canReplaceWith(o,o,t))return!0}return!1}function il(e,t){var r={label:t.title,run:e};for(var n in t)r[n]=t[n];return t.enable&&!0!==t.enable||t.select||(r[t.enable?"enable":"select"]=function(t){return e(t)}),new Sc(r)}function sl(e,t){var r=e.selection,n=r.from,o=r.$from,i=r.to;return r.empty?t.isInSet(e.storedMarks||o.marks()):e.doc.rangeHasMark(n,i,t)}function al(e,t){var r={active:function(t){return sl(t,e)},enable:!0};for(var n in t)r[n]=t[n];return il(rc(e),r)}function cl(e,t){return il(jc(e,t.attrs),t)}function ll(e){var t,r,n,o={};if((t=e.marks.strong)&&(o.toggleStrong=al(t,{title:"Toggle strong style",icon:qc.strong})),(t=e.marks.em)&&(o.toggleEm=al(t,{title:"Toggle emphasis",icon:qc.em})),(t=e.marks.code)&&(o.toggleCode=al(t,{title:"Toggle code font",icon:qc.code})),(t=e.marks.link)&&(o.toggleLink=(r=t,new Sc({title:"Add or remove link",icon:qc.link,active:function(e){return sl(e,r)},enable:function(e){return!e.selection.empty},run:function(e,t,n){if(sl(e,r))return rc(r)(e,t),!0;el({title:"Create a link",fields:{href:new nl({label:"Link target",required:!0}),title:new nl({label:"Title"})},callback:function(e){rc(r,e)(n.state,n.dispatch),n.focus()}})}}))),(t=e.nodes.image)&&(o.insertImage=(n=t,new Sc({title:"Insert image",label:"Image",enable:function(e){return ol(e,n)},run:function(e,t,r){var o=e.selection,i=o.from,s=o.to,a=null;e.selection instanceof et&&e.selection.node.type==n&&(a=e.selection.node.attrs),el({title:"Insert image",fields:{src:new nl({label:"Location",required:!0,value:a&&a.src}),title:new nl({label:"Title",value:a&&a.title}),alt:new nl({label:"Description",value:a?a.alt:e.doc.textBetween(i,s," ")})},callback:function(e){r.dispatch(r.state.tr.replaceSelectionWith(n.createAndFill(e))),r.focus()}})}}))),(t=e.nodes.bullet_list)&&(o.wrapBulletList=cl(t,{title:"Wrap in bullet list",icon:qc.bulletList})),(t=e.nodes.ordered_list)&&(o.wrapOrderedList=cl(t,{title:"Wrap in ordered list",icon:qc.orderedList})),(t=e.nodes.blockquote)&&(o.wrapBlockQuote=function(e,t){var r={run:function(r,n){return ec(e,t.attrs)(r,n)},select:function(r){return ec(e,t.attrs instanceof Function?null:t.attrs)(r)}};for(var n in t)r[n]=t[n];return new Sc(r)}(t,{title:"Wrap in block quote",icon:qc.blockquote})),(t=e.nodes.paragraph)&&(o.makeParagraph=Bc(t,{title:"Change to paragraph",label:"Plain"})),(t=e.nodes.code_block)&&(o.makeCodeBlock=Bc(t,{title:"Change to code block",label:"Code"})),t=e.nodes.heading)for(var i=1;i<=10;i++)o["makeHead"+i]=Bc(t,{title:"Change to heading "+i,label:"Level "+i,attrs:{level:i}});if(t=e.nodes.horizontal_rule){var s=t;o.insertHorizontalRule=new Sc({title:"Insert horizontal rule",label:"Horizontal rule",enable:function(e){return ol(e,s)},run:function(e,t){t(e.tr.replaceSelectionWith(s.create()))}})}var a=function(e){return e.filter((function(e){return e}))};return o.insertMenu=new Mc(a([o.insertImage,o.insertHorizontalRule]),{label:"Insert"}),o.typeMenu=new Mc(a([o.makeParagraph,o.makeCodeBlock,o.makeHead1&&new Nc(a([o.makeHead1,o.makeHead2,o.makeHead3,o.makeHead4,o.makeHead5,o.makeHead6]),{label:"Heading"})]),{label:"Type..."}),o.inlineMenu=[a([o.toggleStrong,o.toggleEm,o.toggleCode,o.toggleLink])],o.blockMenu=[a([o.wrapBulletList,o.wrapOrderedList,o.wrapBlockQuote,Rc,Ic,Lc])],o.fullMenu=o.inlineMenu.concat([[o.insertMenu,o.typeMenu]],[[zc,Fc]],o.blockMenu),o}var ul="undefined"!=typeof navigator&&/Mac/.test(navigator.platform);function pl(e,t){var n,o,i={};function s(e,r){if(t){var n=t[e];if(!1===n)return;n&&(e=n)}i[e]=r}if(s("Mod-z",Va),s("Shift-Mod-z",$a),s("Backspace",Gc),ul||s("Mod-y",$a),s("Alt-ArrowUp",Ga),s("Alt-ArrowDown",Wa),s("Mod-BracketLeft",Ka),s("Escape",Qa),(n=e.marks.strong)&&(s("Mod-b",rc(n)),s("Mod-B",rc(n))),(n=e.marks.em)&&(s("Mod-i",rc(n)),s("Mod-I",rc(n))),(n=e.marks.code)&&s("Mod-`",rc(n)),(n=e.nodes.bullet_list)&&s("Shift-Ctrl-8",jc(n)),(n=e.nodes.ordered_list)&&s("Shift-Ctrl-9",jc(n)),(n=e.nodes.blockquote)&&s("Ctrl->",ec(n)),n=e.nodes.hard_break){var a=n,c=nc(Ya,(function(e,t){return t(e.tr.replaceSelectionWith(a.create()).scrollIntoView()),!0}));s("Mod-Enter",c),s("Shift-Enter",c),ul&&s("Ctrl-Enter",c)}if((n=e.nodes.list_item)&&(s("Enter",(o=n,function(e,t){var n=e.selection,i=n.$from,s=n.$to,a=n.node;if(a&&a.isBlock||i.depth<2||!i.sameParent(s))return!1;var c=i.node(-1);if(c.type!=o)return!1;if(0==i.parent.content.size&&i.node(-1).childCount==i.indexAfter(-1)){if(2==i.depth||i.node(-3).type!=o||i.index(-2)!=i.node(-2).childCount-1)return!1;if(t){for(var u=r.empty,p=i.index(-1)>0,h=i.depth-(p?1:2);h>=i.depth-3;h--)u=r.from(i.node(h).copy(u));u=u.append(r.from(o.createAndFill()));var d=e.tr.replace(i.before(p?null:-1),i.after(-3),new l(u,p?3:2,2));d.setSelection(e.selection.constructor.near(d.doc.resolve(i.pos+(p?3:2)))),t(d.scrollIntoView())}return!0}var f=s.pos==i.end()?c.contentMatchAt(0).defaultType:null,m=e.tr.delete(i.pos,s.pos),g=f&&[null,{type:f}];return!!Te(m.doc,i.pos,2,g)&&(t&&t(m.split(i.pos,2,g).scrollIntoView()),!0)})),s("Mod-[",Hc(n)),s("Mod-]",function(e){return function(t,n){var o=t.selection,i=o.$from,s=o.$to,a=i.blockRange(s,(function(t){return t.childCount&&t.firstChild.type==e}));if(!a)return!1;var c=a.startIndex;if(0==c)return!1;var u=a.parent,p=u.child(c-1);if(p.type!=e)return!1;if(n){var h=p.lastChild&&p.lastChild.type==u.type,d=r.from(h?e.create():null),f=new l(r.from(e.create(null,r.from(u.type.create(null,d)))),h?3:1,0),m=a.start,g=a.end;n(t.tr.step(new Se(m-(h?3:1),g,m,g,f,1,!0)).scrollIntoView())}return!0}}(n))),(n=e.nodes.paragraph)&&s("Shift-Ctrl-0",tc(n)),(n=e.nodes.code_block)&&s("Shift-Ctrl-\\",tc(n)),n=e.nodes.heading)for(var u=1;u<=6;u++)s("Shift-Ctrl-"+u,tc(n,{level:u}));if(n=e.nodes.horizontal_rule){var p=n;s("Mod-_",(function(e,t){return t(e.tr.replaceSelectionWith(p.create()).scrollIntoView()),!0}))}return i}function hl(e){var t,r=Zc.concat(Kc,Wc);return(t=e.nodes.blockquote)&&r.push(Yc(/^\s*>\s$/,t)),(t=e.nodes.ordered_list)&&r.push(function(e){return Yc(/^(\d+)\.\s$/,e,(function(e){return{order:+e[1]}}),(function(e,t){return t.childCount+t.attrs.order==+e[1]}))}(t)),(t=e.nodes.bullet_list)&&r.push(function(e){return Yc(/^\s*([-+*])\s$/,e)}(t)),(t=e.nodes.code_block)&&r.push(function(e){return Qc(/^```$/,e)}(t)),(t=e.nodes.heading)&&r.push(function(e,t){return Qc(new RegExp("^(#{1,"+t+"})\\s$"),e,(function(e){return{level:e[1].length}}))}(t,6)),function(e){var t=e.rules,r=new ft({state:{init:function(){return null},apply:function(e,t){var r=e.getMeta(this);return r||(e.selectionSet||e.docChanged?null:t)}},props:{handleTextInput:function(e,n,o,i){return Jc(e,n,o,i,t,r)},handleDOMEvents:{compositionend:function(e){setTimeout((function(){var n=e.state.selection.$cursor;n&&Jc(e,n.pos,n.pos,"",t,r)}))}}},isInputRules:!0});return r}({rules:r})}function dl(e){var t=[hl(e.schema),xa(pl(e.schema,e.mapKeys)),xa(lc),uc(),new ft({props:{decorations:vc,createSelectionBetween:function(e,t,r){if(t.pos==r.pos&&hc.valid(r))return new hc(r)},handleClick:gc,handleKeyDown:fc}})];return!1!==e.menuBar&&t.push(function(e){return new ft({view:function(t){return new $c(t,e)}})}({floating:!1!==e.floatingMenu,content:e.menuContent||ll(e.schema).fullMenu})),!1!==e.history&&t.push(Pa()),t.concat(new ft({props:{attributes:{class:"ProseMirror-example-setup-style"}}}))}var fl=function(e,t,r){this.step=e,this.inverted=t,this.origin=r};var ml=function(e,t){this.version=e,this.unconfirmed=t};var gl=new vt("collab");function vl(e){return void 0===e&&(e={}),e={version:e.version||0,clientID:null==e.clientID?Math.floor(4294967295*Math.random()):e.clientID},new ft({key:gl,state:{init:function(){return new ml(e.version,[])},apply:function(e,t){var r=e.getMeta(gl);return r||(e.docChanged?new ml(t.version,t.unconfirmed.concat(function(e){for(var t=[],r=0;r<e.steps.length;r++)t.push(new fl(e.steps[r],e.steps[r].invert(e.docs[r]),e));return t}(e))):t)}},config:e,historyPreserveItems:!0})}function yl(e,t,r,n){for(var o=gl.getState(e),i=o.version+t.length,s=gl.get(e).spec.config.clientID,a=0;a<r.length&&r[a]==s;)++a;var c=o.unconfirmed.slice(a);if(!(t=a?t.slice(a):t).length)return e.tr.setMeta(gl,new ml(i,c));var l=c.length,u=e.tr;if(l)c=function(e,t,r){for(var n=e.length-1;n>=0;n--)r.step(e[n].inverted);for(var o=0;o<t.length;o++)r.step(t[o]);for(var i=[],s=0,a=e.length;s<e.length;s++){var c=e[s].step.map(r.mapping.slice(a));a--,c&&!r.maybeStep(c).failed&&(r.mapping.setMirror(a,r.steps.length-1),i.push(new fl(c,c.invert(r.docs[r.docs.length-1]),e[s].origin)))}return i}(c,t,u);else{for(var p=0;p<t.length;p++)u.step(t[p]);c=[]}var h=new ml(i,c);return n&&n.mapSelectionBackward&&e.selection instanceof Qe&&(u.setSelection(Qe.between(u.doc.resolve(u.mapping.map(e.selection.anchor,-1)),u.doc.resolve(u.mapping.map(e.selection.head,-1)),-1)),u.updated&=-2),u.setMeta("rebased",l).setMeta("addToHistory",!1).setMeta(gl,h)}async function bl(e,t){console.log("Send init message to client",t);const r=new RTCPeerConnection(e.iceConfig);e.localStream.getTracks().forEach(t=>{console.log("Adding track",t),r.addTrack(t,e.localStream)});const n=await r.createOffer();await r.setLocalDescription(n),e.client.sendWebRTC(t,n),e.connections.set(t,r)}async function wl(e,t){console.info("Client",t,"enabled their audio"),e.isEnabled?t<e.client.id?bl(e,t):t==e.client.id?console.log("Server confirmed that we enabled our audio"):console.log("Expecting init message from client",t):console.info("Audio is disabled, ignoring!")}function kl(e){e.isEnabled?wl(this,e.id):console.log("Client",e.id,"disabled their audio")}function xl(e){e.data.audio&&wl(this,e.id)}function Cl(e){let t=e.split("\r\n");t=t.filter(e=>!!e);let r=t.map(e=>{const[t,r]=e.split("=");let n=new Object;return n[t]=r,n});console.dir(r)}function Sl(e,t,r){r.addEventListener("icecandidate",r=>{console.log("ICE Candidate Event"),r.candidate&&e.client.sendWebRTC(t,{iceCandidate:r.candidate,type:"iceCandidate"})}),r.addEventListener("track",async r=>{console.log("Recieved Track",r.track);var n=new MediaStream;n.addTrack(r.track);var o=e.audioCtx.createMediaStreamSource(n);o.connect(e.audioCtx.destination),e.remoteStreamAudioNodes.set(t,o)}),r.onconnectionstatechange=function(e){switch(r.connectionState){case"connected":console.info("The connection has become fully connected");break;case"disconnected":case"failed":console.info("One or more transports has terminated unexpectedly or in an error");break;case"closed":console.info("The connection has been closed")}},r.addEventListener("icegatheringstatechange",e=>{switch(r.iceGatheringState){case"new":console.log("gathering is either just starting or has been reset");break;case"gathering":console.log("gathering has begun or is ongoing");break;case"complete":console.log("gathering has ended")}}),console.log("Finished setup for connection",r)}function _l(e){switch(e.message.type){case"offer":!async function(e,t,r){console.groupCollapsed("Got WebRTC offer"),Cl(r.sdp),console.groupEnd();const n=new RTCPeerConnection(e.iceConfig);n.setRemoteDescription(new RTCSessionDescription(r)),e.localStream.getTracks().forEach(t=>{console.log("Adding track",t),n.addTrack(t,e.localStream)}),Sl(e,t,n);const o=await n.createAnswer();await n.setLocalDescription(o),e.client.sendWebRTC(t,o),e.connections.set(t,n)}(this,e.id,e.message);break;case"answer":!async function(e,t,r){console.groupCollapsed("Got WebRTC answer"),Cl(r.sdp),console.groupEnd();const n=new RTCSessionDescription(r);let o=e.connections.get(t);o?(Sl(e,t,o),await o.setRemoteDescription(n),console.log("Finished setting remote description",o)):console.error("Recieved WebRTC answer for client",t,"but there is no connection pending")}(this,e.id,e.message);break;case"iceCandidate":!async function(e,t,r){let n=e.connections.get(t);if(n)try{console.log("ICE Candidate Message"),await n.addIceCandidate(r.iceCandidate)}catch(e){console.error("Error adding received ice candidate",e)}else console.error("Recieved WebRTC answer for client",t,"but there is no connection pending")}(this,e.id,e.message);break;default:console.info("Got message",e.message,"from remote peer",e.id)}}const Dl=window.AudioContext||window.webkitAudioContext;class Al{constructor(e){this.isEnabled=!1,this.client=e,this.connections=new Map,this.localStream=null,this.remoteStreamAudioNodes=new Map,e.addEventListener("audio",kl.bind(this)),e.addEventListener("enter",xl.bind(this)),e.addEventListener("webrtc",_l.bind(this))}setMicGain(e){this.micGainNode?this.micGainNode.gain.setValueAtTime(e,this.audioCtx.currentTime):console.warn("Cannot set mic gain when audio isn't enabled!")}setEnabled(e){let t=!!e;return this.isEnabled=t,(t?async function(e){console.log("Creating audio context");const t=new Dl;return e.audioCtx=t,e.iceConfig=await fetch("ice-config.json").then(e=>e.json().then(e=>(console.log("ICE config",e),e))),console.log("Loading user media"),navigator.mediaDevices.getUserMedia({audio:!0}).then(t=>{e.micStream=t,e.sendNode=e.audioCtx.createMediaStreamDestination(),e.micNode=e.audioCtx.createMediaStreamSource(e.micStream),e.micGainNode=e.audioCtx.createGain(),e.micGainNode.gain.setValueAtTime(1,e.audioCtx.currentTime),e.micNode.connect(e.micGainNode),e.micGainNode.connect(e.sendNode),e.localStream=e.sendNode.stream,console.log("Checking for needed audio connections");for(const[t,r]of e.client.peers)console.log("Found Peer",t,r),t<e.client.id&&r.audio&&bl(e,t)}).catch(e=>{console.dir(e),console.error(e)})}(this):async function(e){console.log("Unsetting local stream"),e.micNode.disconnect(),e.micGainNode.disconnect();let t=e.micStream.getAudioTracks();console.log("Audio Tracks",t),t.forEach(e=>{console.log("Disabling track",e),e.enabled=!1}),e.micStream=null,e.localStream=null,console.log("Stopping all remote tracks");for(const[t,r]of e.remoteStreamAudioNodes)console.log("Disconnected audio node for client",t),r.disconnect();console.log("Closing all connections");for(let[t,r]of e.connections)r.close();console.log("Closed all connections"),e.connections=new Map}(this)).then(e=>{this.client.setAudio(t)})}}function El(e){var t,r,n=e.indexOf("|");return n<0?t=e:(t=e.slice(0,n),r=e.slice(n+1)),[t,r]}function Ml(e,t,r){let n=e.eventHandlers[t];n?n.forEach((e,t)=>{e(r)}):console.error("[padington]","Could not find event handlers for type",t)}class Tl{constructor(e,t){this.id=e,this.data=t}}class Ol{constructor(e){this.id=e}}class Nl{constructor(e,t){this.id=e,this.newName=t}}class ql{constructor(e,t){this.id=e,this.isEnabled=t}}class Rl{constructor(e,t){this.id=e,this.message=t}}class Il{constructor(e,t){this.id=e,this.message=t}}function Ll(e,t){Ml(e,"system",t)}function zl(e){this.socket.onerror=this._handleError,this.name?(console.info("Using name from local storage: %c"+this.name,"font-weight: bold"),this.socket.send("init|"+this.name)):this.socket.send("init")}function Fl(e){console.error("WebSocket was closed:",e),e.wasClean?Ll(this,`Connection closed with code ${e.code} and reason '${e.reason}'`):Ll(this,"Connection broke with code "+e.code)}function Bl(e){const t="Could not connect to server at "+e.target.url;console.error("WebSocket failed before connection was established:",e),Ll(this,t),this.expectClose()}function Pl(e){const[t,r]=El(e.data);switch(t){case"chat":!function(e,t){const[r,n]=El(t);let o=Number(r);Ml(e,"chat",new Il(o,n))}(this,r);break;case"error":console.error(r);break;case"folder":Ml(this,"folder");break;case"new-user":!function(e,t){let[r,n]=El(t),o=Number(r),i=JSON.parse(n);e.peers.set(o,i),Ml(e,"enter",new Tl(o,i))}(this,r);break;case"update":!function(e,t){let[r,n]=El(t),o=Number(r),i=e.peers.get(o),s=JSON.parse(n);if(s.name){let t=s.name;i.name=t,Ml(e,"rename",new Nl(o,t))}null!=s.audio&&(i.audio=s.audio,Ml(e,"audio",new ql(o,s.audio)))}(this,r);break;case"user-left":!function(e,t){let r=Number(t);Ml(e,"leave",new Ol(r)),e.peers.delete(r)}(this,r);break;case"init":!function(e,t){const[r,n]=El(t);let o=JSON.parse(n);e.id=Number(r),console.info("This is client",e.id),Ml(e,"init",o)}(this,r);break;case"peers":!function(e,t){const r=JSON.parse(t);for(let[t,n]of Object.entries(r)){let r=Number(t);e.peers.set(r,n),r!=e.id?Ml(e,"enter",new Tl(r,n)):(e.name=n.name,Ml(e,"update",n))}}(this,r);break;case"webrtc":!function(e,t){const[r,n]=El(t);let o=JSON.parse(n),i=Number(r);Ml(e,"webrtc",new Rl(i,o))}(this,r);break;case"steps":const e=JSON.parse(r);Ml(this,"steps",{steps:e.flatMap(e=>e.steps),clientIDs:e.flatMap(e=>e.steps.map(t=>e.src))});break;default:console.warn("Unknown command %c"+t,"font-weight: bold","with argument(s):",r)}}let Vl=new URL(window.location),$l=Vl.searchParams.get("pad");const jl=$l||"",Hl="https:"==Vl.protocol;var Ul=new class{constructor(e,t,r){const n=`${e?"wss:":"ws:"}//${t}/${r}`;console.debug("Connection to pad server at",n),this.socket=new WebSocket(n,"padington"),this.id=-1,this.name=localStorage.getItem("padington-client-name"),this.peers=new Map,this.eventHandlers={system:[],chat:[],error:[],folder:[],enter:[],rename:[],audio:[],leave:[],init:[],peers:[],steps:[],webrtc:[]},this.socket.onopen=zl.bind(this),this.socket.onerror=Bl.bind(this),this.socket.onclose=Fl.bind(this),this.socket.onmessage=Pl.bind(this)}expectClose(){this.socket.onclose=function(e){console.log("Connection closed as expected!")}}sendSteps(e,t){const r=t.map(e=>e.toJSON());console.log("Sending steps",{version:e,steps:r}),this.socket.send(`steps|${e}|${JSON.stringify(r)}`)}sendWebRTC(e,t){if(null==e||null==t)throw new RangeError("padington::sendWebRTC called with",e,t);let r=`webrtc|${e}|${JSON.stringify(t)}`;this.socket.send(r)}rename(e){this.name=e,localStorage.setItem("padington-client-name",e);const t={name:e};this.socket.send("update|"+JSON.stringify(t))}sendChatMessage(e){this.socket.send("chat|"+e)}setAudio(e){const t={audio:!!e};this.socket.send("update|"+JSON.stringify(t))}addEventListener(e,t){this.eventHandlers[e].push(t)}set onsystem(e){this.eventHandlers.system=[e]}set onchat(e){this.eventHandlers.chat=[e]}set onerror(e){this.eventHandlers.error=[e]}set onfolder(e){this.eventHandlers.folder=[e]}set onenter(e){this.eventHandlers.enter=[e]}set onrename(e){this.eventHandlers.rename=[e]}set onaudio(e){this.eventHandlers.audio=[e]}set onleave(e){this.eventHandlers.leave=[e]}set oninit(e){this.eventHandlers.init=[e]}set onupdate(e){this.eventHandlers.update=[e]}set onsteps(e){this.eventHandlers.steps=[e]}set onwebrtc(e){this.eventHandlers.webrtc=[e]}}(Hl,"padington.herokuapp.com",jl);!function(e,t){var r=window.localStorage,n=document.getElementById("chat"),o=document.getElementById("editor"),i=document.getElementById("chat-close-button"),s=document.getElementById("chat-open-button"),a=document.getElementById("chat-messages"),c=document.getElementById("new-message"),l=document.getElementById("message-form"),u=document.getElementById("peers"),p=document.getElementById("peer-list"),h=document.getElementById("peer-panel-toggle"),d=document.getElementById("client-name");function f(){n.classList.remove("closed"),s.classList.add("hidden"),o.classList.add("chat-open"),r.setItem("padington-chat-open",!0)}function m(e){a.appendChild(e),a.scrollBy(0,500)}function g(t,r){let n=e.peers.get(t);n||console.error(t,e.peers);let o=n.name;var i=document.createElement("strong");i.dataset.src=t;var s=document.createTextNode(o);i.appendChild(s);var a=document.createElement("p");a.classList.add("msg-control"),a.appendChild(i);var c=document.createTextNode(r);a.appendChild(c),m(a)}h.onclick=function(e){const t=u.classList.contains("closed");t?u.classList.remove("closed"):u.classList.add("closed"),r.setItem("padington-peers-open",!t)},r.getItem("padington-peers-open")&&u.classList.remove("closed"),i.onclick=function(e){n.classList.add("closed"),s.classList.remove("hidden"),o.classList.remove("chat-open"),r.setItem("padington-chat-open",!1)},s.onclick=f,r.getItem("padington-chat-open")&&f(),e.onsystem=function(e){console.warn(e);var t=document.createElement("p");t.classList.add("msg-system");var r=document.createTextNode(e);t.appendChild(r),m(t)},e.onchat=function(t){let r=e.peers.get(t.id).name;var n=document.createElement("strong");n.dataset.src=t.id;var o=document.createTextNode(r);n.appendChild(o);var i=document.createElement("p");i.appendChild(n);var s=document.createTextNode(" "+t.message);i.appendChild(s),m(i)},e.onfolder=function(){e.expectClose(),o.textContent="",s.classList.add("hidden");var r=document.createTextNode("Choose a Pad!"),n=document.createElement("h2");n.appendChild(r);var i=document.createElement("input");i.type="text",i.name="pad",i.pattern="[^/]+";var a=document.createTextNode("Open"),c=document.createElement("button");c.type="submit",c.appendChild(a);var l=document.createElement("form");l.id="pad-chooser",l.onsubmit=function(e){i.value=`${t}${i.value}`},l.appendChild(n),l.appendChild(i),l.appendChild(c),o.appendChild(l)},e.addEventListener("enter",(function(t){g(t.id," joined the channel!"),t.id!=e.id&&function(e,t){var r=document.createElement("i");r.classList.add("fas"),r.classList.add(t.audio?"fa-microphone":"fa-user");var n=document.createElement("strong"),o=document.createTextNode(t.name);n.appendChild(o);var i=document.createElement("li");i.id="peer-"+e,i.appendChild(r),i.appendChild(n),p.appendChild(i)}(t.id,t.data)})),e.addEventListener("leave",(function(t){if(g(t.id," left the channel!"),t.id!=e.id){let e=p.querySelector("#peer-"+t.id);e&&e.remove()}})),e.onrename=function(t){let r=t.id,n=t.newName;if(r!=e.id){console.log("Rename",t.id,"->",n);let e=p.querySelector(`#peer-${r} > strong`);e&&(e.textContent=n)}else d.value!=n&&(console.warn("Received remote name change to",n,"!"),d.value=n);a.querySelectorAll(`[data-src='${r}']`).forEach((function(e){e.textContent=n}))},e.addEventListener("audio",(function(t){let r=t.id;if(r!=e.id){let e=p.querySelector(`#peer-${r} > i`);if(e){let r=["fa-user","fa-microphone"],[n,o]=t.isEnabled?[0,1]:[1,0];e.classList.remove(r[n]),e.classList.add(r[o])}}})),e.onupdate=function(e){d.value=e.name},l.onsubmit=function(t){e.sendChatMessage(c.value),c.value="",t.preventDefault()},d.onkeydown=function(e){"Enter"==e.code&&event.target.blur()},d.onblur=function(t){let r=d.value;r!=e.name&&e.rename(r)}}(Ul,jl),function(e){const t=document.querySelector("#editor");e.addEventListener("init",(function(r){t.innerHTML="",console.log("Initializing editor",r.doc);let n=dl({schema:ta,floatingMenu:!0}),o=r.version;n.push(vl({version:o,clientID:e.id})),window.view=new eo(t,{state:pt.create({doc:ta.nodeFromJSON(r.doc),plugins:n}),dispatchTransaction(t){let r=view.state.apply(t);view.updateState(r);let n=(o=r,0==(i=gl.getState(o)).unconfirmed.length?null:{version:i.version,steps:i.unconfirmed.map((function(e){return e.step})),clientID:gl.get(o).spec.config.clientID,get origins(){return this._origins||(this._origins=i.unconfirmed.map((function(e){return e.origin})))}});var o,i;n&&e.sendSteps(n.version,n.steps)}}),e.addEventListener("steps",(function(e){t=view.state,gl.getState(t).version;var t;let r=e.steps.map(e=>ke.fromJSON(ta,e));view.dispatch(yl(view.state,r,e.clientIDs))}))}))}(Ul),window.audioState=function(e){let t=document.getElementById("audio-connect-button"),r=document.getElementById("audio-disconnect-button"),n=document.getElementById("mic-volume"),o=document.getElementById("mic-volume-slider"),i=document.getElementById("mic-volume-value");o.value=1;var s=new Al(e);return t.onclick=function(e){s.setEnabled(!0).then(e=>{r.classList.remove("hidden"),n.classList.remove("hidden"),s.setMicGain(o.value),t.classList.add("hidden")}).catch(e=>console.trace(e))},o.addEventListener("input",(function(e){let t=o.value;i.textContent=t,s.setMicGain(t)})),r.onclick=function(e){s.setEnabled(!1).catch(e=>console.trace(e)),r.classList.add("hidden"),n.classList.add("hidden"),t.classList.remove("hidden")},s}(Ul)}();
//# sourceMappingURL=bundle.js.map
